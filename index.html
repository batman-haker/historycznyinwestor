<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Historyczny Inwestor ‚Äî Wersja Edukacyjna</title>
  <style>
    :root {
      --bg: #0f1222; --panel:#15182a; --text:#eef3ff; --muted:#cbd5e1;
      --accent:#8b5cf6; --accent-2:#22d3ee; --border:#2a2e44;
      --win:#22c55e; --loss:#ef4444; --neutral:#f59e0b; --shadow:rgba(0,0,0,.4);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin:0; color:var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial;
      background:
        radial-gradient(1200px 800px at 10% 0%, rgba(139,92,246,.15), rgba(0,0,0,0) 60%),
        radial-gradient(900px 700px at 90% 10%, rgba(34,211,238,.12), rgba(0,0,0,0) 60%),
        linear-gradient(180deg, #0b0e1a, #0f1222 45%, #0a0c18 100%);
    }
    .container { max-width:1200px; margin:0 auto; padding:24px; }
    .main-menu { text-align:center; padding:48px 16px; }
    .main-title { font-size: clamp(1.8rem,3.8vw,3rem); margin:0 0 8px; font-weight:800; letter-spacing:-.02em; }
    .main-title span { background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .main-subtitle { color:var(--muted); margin:0 0 24px; }
    .chapter-selection { display:grid; grid-template-columns: repeat(auto-fit,minmax(260px,1fr)); gap:16px; }
    .chapter-card { background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,0)); border:1px solid var(--border); border-radius:16px; padding:20px; text-align:left; cursor:pointer; transition: transform .25s, box-shadow .25s, border-color .25s; box-shadow:0 10px 30px var(--shadow); }
    .chapter-card:hover { transform: translateY(-4px); border-color: rgba(139,92,246,.6); box-shadow:0 16px 40px rgba(34,211,238,.16); }
    .chapter-era { font-weight:800; letter-spacing:.02em; color:var(--accent-2); }
    .chapter-name { font-size:1.25rem; margin:8px 0; font-weight:700; }
    .chapter-description { color:var(--muted); font-size:.95rem; line-height:1.45; }
    .hidden { display:none; }
    .topbar { display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap; margin-bottom:8px; }
    .back-btn { background: linear-gradient(90deg, rgba(139,92,246,.3), rgba(34,211,238,.3)); border:1px solid var(--border); color:var(--text); padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:600; }
    .back-btn:hover { filter:brightness(1.1); transform: translateY(-1px); }
    .progress-outer { width:100%; height:10px; background:#0d1122; border:1px solid var(--border); border-radius:999px; overflow:hidden; }
    .progress-inner { height:100%; width:0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width .4s ease; }
    .header { display:grid; gap:8px; margin-bottom:16px; }
    .title { font-size: clamp(1.5rem,2.5vw,2.2rem); margin:0; }
    .subtitle { color:var(--muted); margin:0; }
    .stats { display:grid; grid-template-columns: repeat(auto-fit, minmax(160px,1fr)); gap:10px; }
    .stat-card { background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:12px 14px; }
    .stat-label { color:var(--muted); font-size:.8rem; }
    .stat-value { font-size:1.25rem; font-weight:800; }
    .layout { display:grid; grid-template-columns:1.08fr .92fr; gap:16px; margin-top:16px; }
    @media (max-width:900px){ .layout{ grid-template-columns:1fr; } }
    .panel { background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:18px; box-shadow:0 10px 30px var(--shadow); }
    .panel-title { margin:0 0 10px; font-size:1.1rem; letter-spacing:.01em; }
    .scenario-text { color:#e6ebff; opacity:.95; line-height:1.6; margin-bottom:14px; }
    .choices { display:grid; gap:10px; }
    .choice-btn { border:1px solid var(--border); background:#1a1d32; color:var(--text); padding:12px 14px; border-radius:12px; text-align:left; cursor:pointer; font-weight:600; transition: transform .18s, border-color .18s, background .18s; }
    .choice-btn:hover { transform: translateY(-1px); border-color: rgba(34,211,238,.6); background:#1e2140; }
    .stock-list { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
    .stock-item { display:flex; align-items:center; justify-content:space-between; background:#151935; border:1px solid var(--border); border-radius:10px; padding:10px 12px; }
    .stock-name { font-weight:700; }
    .stock-price { color:var(--accent-2); font-variant-numeric: tabular-nums; }
    .result-panel { grid-column:1/-1; background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)); border:1px solid var(--border); border-radius:16px; padding:18px; text-align:center; box-shadow:0 10px 30px var(--shadow); }
    .profit { color:var(--win); font-weight:800; }
    .loss { color:var(--loss); font-weight:800; }
    .neutral { color:var(--neutral); font-weight:800; }
    .restart { display:inline-flex; gap:8px; align-items:center; margin-top:10px; background: linear-gradient(90deg, var(--accent), var(--accent-2)); color:#0a0c18; border:none; padding:12px 16px; border-radius:12px; cursor:pointer; font-weight:800; }
    .restart:hover { filter:brightness(1.05); }
    .hint-btn { background:transparent; color:var(--accent-2); border:1px solid var(--border); padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700; }
    .hint-btn:hover { background: rgba(34,211,238,.08); border-color: rgba(34,211,238,.5); transform: translateY(-1px); }
    .hint-box { display:none; margin-top:12px; border-left:3px solid var(--accent-2); padding:12px 14px; color:var(--muted); background: rgba(34,211,238,.08); border-radius:0 10px 10px 0; }
    .hint-box[aria-hidden="false"] { display:block; }
    .scenario-graphic { margin:8px 0 12px; background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)); border:1px solid var(--border); border-radius:12px; overflow:hidden; }
    .photo { margin-top:8px; border:1px solid var(--border); border-radius:12px; overflow:hidden; }
    .photo img { display:block; width:100%; height:auto; }
    .error { margin:16px 0; color:#fecaca; background:#7f1d1d; border:1px solid #991b1b; padding:10px 12px; border-radius:10px; display:none; }
    .hidden { display:none !important; }

    /* NOWE STYLE DLA MENU */
    .game-cover-logo { width:100%; max-width:400px; margin:0 auto 30px; }
    .game-cover-logo img { width:100%; height:auto; border-radius:20px; box-shadow:0 20px 60px rgba(0,0,0,0.6); border:3px solid var(--accent-2); transition: transform .3s ease; }
    .game-cover-logo img:hover { transform: scale(1.02); box-shadow:0 25px 70px rgba(139,92,246,0.4); }
    .menu-buttons-container { display:flex; flex-direction:column; gap:16px; max-width:500px; margin:24px auto 0; }
    .menu-main-btn { padding:18px 32px; font-size:1.2rem; font-weight:700; border:none; border-radius:12px; cursor:pointer; transition: all .3s ease; text-align:center; }
    .menu-main-btn:hover { transform: translateY(-3px); box-shadow:0 12px 30px rgba(0,0,0,.3); }
    .primary-btn { background: linear-gradient(135deg, var(--accent), var(--accent-2)); color:#0a0c18; }
    .primary-btn:hover { filter:brightness(1.1); }
    .secondary-btn { background: linear-gradient(135deg, rgba(139,92,246,.3), rgba(34,211,238,.3)); border:1px solid var(--border); color:var(--text); }
    .secondary-btn:hover { background: linear-gradient(135deg, rgba(139,92,246,.4), rgba(34,211,238,.4)); border-color: var(--accent-2); }
    .tertiary-btn { background:transparent; border:1px solid var(--border); color:var(--text); }
    .tertiary-btn:hover { background: rgba(255,255,255,.05); border-color: var(--accent); }

    /* MODAL */
    .epoch-modal { position:fixed; top:0; left:0; width:100%; height:100vh; z-index:9999; display:flex; align-items:center; justify-content:center; }
    .modal-backdrop { position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,.85); backdrop-filter:blur(8px); }
    .modal-box { position:relative; z-index:10000; background:var(--panel); border:1px solid var(--border); border-radius:20px; padding:32px; max-width:1100px; max-height:85vh; overflow-y:auto; box-shadow:0 25px 80px rgba(0,0,0,.8); }
    .modal-title { font-size:2.2rem; margin:0 0 8px; text-align:center; background: linear-gradient(90deg, var(--accent), var(--accent-2)); -webkit-background-clip:text; background-clip:text; color:transparent; }
    .modal-subtitle { text-align:center; color:var(--muted); margin:0 0 24px; font-size:1.05rem; }
    .modal-close { display:block; margin:24px auto 0; padding:12px 32px; background: linear-gradient(135deg, #e74c3c, #c0392b); color:#fff; border:none; border-radius:10px; cursor:pointer; font-weight:700; font-size:1.1rem; transition: all .3s ease; }
    .modal-close:hover { transform: translateY(-2px); box-shadow:0 8px 20px rgba(231,76,60,.5); }
    .modal-box::-webkit-scrollbar { width:10px; }
    .modal-box::-webkit-scrollbar-track { background:rgba(255,255,255,.05); border-radius:10px; }
    .modal-box::-webkit-scrollbar-thumb { background:var(--accent-2); border-radius:10px; }
    .modal-box::-webkit-scrollbar-thumb:hover { background:var(--accent); }

    /* ACHIEVEMENT NOTIFICATIONS */
    .achievement-notification { position:fixed; top:20px; right:-400px; background:linear-gradient(135deg, rgba(139,92,246,.95), rgba(34,211,238,.95)); backdrop-filter:blur(10px); padding:16px 20px; border-radius:12px; box-shadow:0 10px 40px rgba(0,0,0,.5); z-index:10001; transition: right .5s ease; min-width:300px; border:2px solid var(--gold); }
    .achievement-notification.show { right:20px; }
    .achievement-content { display:flex; align-items:center; gap:12px; }
    .achievement-icon { font-size:2.5rem; }
    .achievement-name { font-weight:800; font-size:1.1rem; color:#fff; }
    .achievement-desc { font-size:0.9rem; color:#eef; opacity:0.9; }

    /* CAPITAL CHART */
    .capital-chart { width:100%; height:200px; background:var(--panel); border:1px solid var(--border); border-radius:12px; padding:20px; margin:20px 0; }
    .chart-line { stroke:var(--accent-2); stroke-width:3; fill:none; }
    .chart-area { fill:url(#chartGradient); opacity:0.3; }
    .chart-grid { stroke:rgba(255,255,255,0.1); stroke-width:1; }
    .chart-label { fill:var(--muted); font-size:12px; }

    /* ACHIEVEMENTS DISPLAY */
    .achievements-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(140px, 1fr)); gap:10px; margin:16px 0; }
    .achievement-badge { background:rgba(139,92,246,0.2); border:1px solid var(--border); border-radius:10px; padding:12px; text-align:center; }
    .achievement-badge-icon { font-size:2rem; display:block; margin-bottom:6px; }
    .achievement-badge-name { font-size:0.85rem; font-weight:700; color:var(--text); }

    /* CAMPAIGN MODE */
    .campaign-progress { margin:20px 0; }
    .campaign-stats { display:grid; grid-template-columns:repeat(auto-fit, minmax(180px, 1fr)); gap:12px; margin-bottom:20px; }
    .campaign-epochs { display:grid; grid-template-columns:repeat(auto-fit, minmax(280px, 1fr)); gap:12px; margin:20px 0; }
    .campaign-epoch-card { background:linear-gradient(135deg, rgba(139,92,246,0.1), rgba(34,211,238,0.05)); border:2px solid var(--border); border-radius:12px; padding:16px; cursor:pointer; transition:all .3s ease; position:relative; }
    .campaign-epoch-card:hover { transform:translateY(-3px); border-color:rgba(139,92,246,0.6); box-shadow:0 8px 25px rgba(139,92,246,0.3); }
    .campaign-epoch-card.completed { background:linear-gradient(135deg, rgba(46,213,115,0.15), rgba(52,211,153,0.1)); border-color:rgba(46,213,115,0.5); }
    .campaign-epoch-card.current { background:linear-gradient(135deg, rgba(139,92,246,0.2), rgba(34,211,238,0.15)); border-color:var(--accent); box-shadow:0 0 20px rgba(139,92,246,0.4); animation:pulse 2s ease-in-out infinite; }
    .campaign-epoch-card.locked { opacity:0.5; cursor:not-allowed; background:rgba(255,255,255,0.02); }
    .campaign-epoch-card.locked:hover { transform:none; border-color:var(--border); box-shadow:none; }
    @keyframes pulse { 0%, 100% { box-shadow:0 0 20px rgba(139,92,246,0.4); } 50% { box-shadow:0 0 30px rgba(139,92,246,0.7); } }
    .campaign-epoch-number { display:inline-block; width:28px; height:28px; line-height:28px; text-align:center; background:var(--accent); color:#fff; border-radius:50%; font-weight:800; font-size:0.9rem; margin-right:8px; }
    .campaign-epoch-card.completed .campaign-epoch-number { background:#2ed573; }
    .campaign-epoch-card.locked .campaign-epoch-number { background:#555; }
    .campaign-epoch-title { font-size:1.1rem; font-weight:700; margin-bottom:6px; display:flex; align-items:center; }
    .campaign-epoch-desc { color:var(--muted); font-size:0.9rem; line-height:1.4; }
    .campaign-epoch-status { position:absolute; top:12px; right:12px; font-size:1.5rem; }
    .campaign-buttons { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:20px; }

    /* LEADERBOARD */
    .leaderboard-modal { max-width:800px; }
    .leaderboard-tabs { display:flex; gap:8px; margin:20px 0; justify-content:center; }
    .leaderboard-tab { padding:10px 20px; background:rgba(255,255,255,0.05); border:2px solid var(--border); border-radius:8px; color:var(--text); font-weight:600; cursor:pointer; transition:all .3s ease; }
    .leaderboard-tab:hover { border-color:var(--accent); background:rgba(139,92,246,0.1); }
    .leaderboard-tab.active { background:var(--accent); border-color:var(--accent); color:#fff; }
    .leaderboard-content { margin:20px 0; }
    .leaderboard-table { width:100%; border-collapse:collapse; background:rgba(255,255,255,0.02); border-radius:8px; overflow:hidden; }
    .leaderboard-table thead { background:linear-gradient(135deg, rgba(139,92,246,0.2), rgba(34,211,238,0.1)); }
    .leaderboard-table th { padding:12px; text-align:left; font-weight:700; color:var(--accent); border-bottom:2px solid var(--border); }
    .leaderboard-table td { padding:12px; border-bottom:1px solid rgba(255,255,255,0.05); color:var(--text); }
    .leaderboard-table tbody tr:hover { background:rgba(139,92,246,0.05); }
    .leaderboard-table tbody tr:first-child { background:linear-gradient(90deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05)); }
    .leaderboard-table tbody tr:first-child td:first-child::before { content:'ü•á '; }
    .leaderboard-table tbody tr:nth-child(2) td:first-child::before { content:'ü•à '; }
    .leaderboard-table tbody tr:nth-child(3) td:first-child::before { content:'ü•â '; }
    .leaderboard-rank { font-weight:700; color:var(--accent); }
    .leaderboard-profit { color:#2ed573; font-weight:600; }
    .leaderboard-loss { color:#ff4757; font-weight:600; }
    .leaderboard-empty { text-align:center; padding:40px; color:var(--muted); font-style:italic; }
    .leaderboard-actions { display:flex; gap:12px; justify-content:center; margin-top:20px; }

    /* CHART MODAL */
    .chart-modal { max-width:700px; }
    .chart-container { position:relative; height:350px; margin:20px 0; background:rgba(255,255,255,0.02); border-radius:12px; padding:20px; }
    .chart-info { display:flex; justify-content:space-around; margin:15px 0; padding:15px; background:rgba(139,92,246,0.1); border-radius:8px; }
    .chart-stat { text-align:center; }
    .chart-stat-label { font-size:0.85rem; color:var(--muted); margin-bottom:4px; }
    .chart-stat-value { font-size:1.3rem; font-weight:700; color:var(--accent); }
    .chart-stat-value.negative { color:#ff4757; }
    #chartButton { margin-top:15px; padding:10px 20px; background:rgba(139,92,246,0.2); border:2px solid var(--accent); border-radius:8px; color:var(--text); font-weight:600; cursor:pointer; transition:all .3s ease; }
    #chartButton:hover { background:var(--accent); transform:translateY(-2px); }
  </style>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script type="text/javascript" nonce="fbaf3247a48d4e4a8f9106ab1e1" src="//local.adguard.org?ts=1754656650365&amp;type=content-script&amp;dmn=mail-attachment.googleusercontent.com&amp;url=https%3A%2F%2Fmail-attachment.googleusercontent.com%2Fattachment%2Fu%2F0%2F%3Fui%3D2%26ik%3Df2ae618626%26attid%3D0.1%26permmsgid%3Dmsg-a%3Ar1370544206735525610%26th%3D19889e3900ffb5b5%26view%3Datt%26disp%3Dsafe%26realattid%3Df_me2v9lx50%26zw%26saddbat%3DANGjdJ9tnBx_fnmLD0gV18C3e8AnDwqW-CBoSG5TniDTP7IlJxdF3c7fYm1JqWHOp1e2U9TvLYbN-S64edVSp36JLaz7lgEc4vSYRpervdKBj2MWW2Ntn3HBxZVgr9bHNRnIC2GH-o-aTVqiITTbwjK6m35XDD3sTWXR9z6IIFLWdTv9OMC80sMRwu7aSEIuiCvfHTPm_eiGFWgoLnWc-VZkHCw4JXkL0q5t3iNEwoJVjtwnwRhPB3zRA51A6WN91SU_ZnAsTCRiPXd0Msyv2fRmUcHn2k_sopUnWRhtgY5u_VoQoIX030s-Zcuh0zJo6TKagK77NwE-bfelFjigt7DCc31dXx7WGPV7smw7gaUr9YHpDXAueoQIoLQWRedXTPQRiufiugXAnck0-1NRrGAAqW6p5j4FObQXhuFeE9Mh2j8tSo-HV-wluEhwmBT87d7Xy1OOu_-rSgkdbiOk-yHROdxp3tVK8Iyge5fA6Zc88exedhQbCKYDWlU7j8wGlblf5BWObkyVKv0kUmKz7iLM1nYMdzMFFHjkEQiVWG7tT6XqnDDI-vpY4je5GRtV0qwUPxb2C9NoXTzqoNVbua0ZXTQgzJHq9W6Y6N7dgMxIJE2DuZzrreT27qAi495WlA2N0h2A_zI4Fy1Hv5PPyJ96DmfPAk4j2i1q0CCSybCT3BbeKkMOI0rgyyxRbq8UzouKTlOtpAgzrrhBDUAn-wn82BdpK5DrhOnMFii0TuNUuTPPAsjJSS5klGGZDS3O-pSyP0ag3oJg4nEAnIC52JuNpOYISp4vEefezHjrMPn74LnIR9D5SsIlpkm1ZCf-Tk2YtKz8kaMOlL-1MatxeXXR0wxxXNrKVCbffgEDVQ4xWilbjmLE_MvNdd0WafGDjkvVXEf_pWTOZJhp6HV0N5B7ViNarFcExpGJdq2Ebas0Hp1jI-es8lrVhvlv1eFF5SDbsXbsVf8Vb8fKZ5QKHMtA0fjL7-mrWSHXlr0V0Rt9uNKCqAIJ_4EF3mEEVWs0pHlUZyEG237H9Y-IHB1zAGy1gACIP5KpIx2yqPXf643aBfFM_Teq1mO7VZXxz3L4wYcnniaZ13f-PqnnMixv&amp;app=chrome.exe&amp;css=3&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script><script type="text/javascript" nonce="fbaf3247a48d4e4a8f9106ab1e1" src="//local.adguard.org?ts=1754656650365&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script></head>
<body>
  <div class="container">
    <!-- EKRAN POWITALNY Z GUZIKAMI -->
    <section id="welcomeScreen" class="main-menu" aria-labelledby="welcomeHeading">
      <div class="game-cover-logo">
        <img src="https://raw.githubusercontent.com/batman-haker/historycznyinwestor/main/kochampatronow_okadka_gry_dla_inwestora_giedowego_z_elementam_1f221263-b989-4da4-8eb4-42536d07774d.png" alt="Historyczny Inwestor - Ok≈Çadka">
      </div>
      <h1 id="welcomeHeading" class="main-title">Historyczny <span>Inwestor</span></h1>
      <p class="main-subtitle">Przetrwaj najwiƒôksze wstrzƒÖsy rynkowe i zrozum, co siƒô wtedy dzia≈Ço ‚Äî krok po kroku.</p>
      <div class="menu-buttons-container">
        <button class="menu-main-btn primary-btn" id="campaignModeBtn">üèÜ Tryb Kampanii</button>
        <button class="menu-main-btn secondary-btn" id="chooseEpochBtn">üéÆ Pojedyncza Epoka</button>
        <button class="menu-main-btn secondary-btn" id="leaderboardBtn">üèÖ Ranking</button>
        <button class="menu-main-btn tertiary-btn" id="aboutBtn">‚ÑπÔ∏è O Grze</button>
      </div>
    </section>

    <!-- MODAL WYBORU EPOKI -->
    <div id="epochModal" class="epoch-modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-backdrop" id="modalBackdrop"></div>
      <div class="modal-box">
        <h2 id="modalTitle" class="modal-title">üï∞Ô∏è Wybierz Epokƒô HistorycznƒÖ</h2>
        <p class="modal-subtitle">Zacznij swojƒÖ przygodƒô od wybranego kryzysu finansowego</p>
        <div id="errorBox" class="error"></div>
        <div class="chapter-selection" id="chapterSelection"></div>
        <button class="modal-close" id="closeModalBtn" aria-label="Zamknij">‚ùå Zamknij</button>
      </div>
    </div>

    <!-- MODAL TRYBU KAMPANII -->
    <div id="campaignModal" class="epoch-modal hidden" role="dialog" aria-modal="true">
      <div class="modal-backdrop" id="campaignBackdrop"></div>
      <div class="modal-box">
        <h2 class="modal-title">üèÜ Tryb Kampanii</h2>
        <p class="modal-subtitle">Przejd≈∫ przez wszystkie 9 epok chronologicznie. Tw√≥j kapita≈Ç przenosi siƒô miƒôdzy epokami!</p>

        <div id="campaignProgress" class="campaign-progress">
          <div class="campaign-stats">
            <div class="stat-card">
              <div class="stat-label">Obecny Kapita≈Ç</div>
              <div id="campaignCapital" class="stat-value">$1,000</div>
            </div>
            <div class="stat-card">
              <div class="stat-label">Uko≈Ñczone Epoki</div>
              <div id="campaignCompleted" class="stat-value">0/9</div>
            </div>
          </div>

          <div class="campaign-epochs" id="campaignEpochs">
            <!-- Campaign epochs will be added here by JavaScript -->
          </div>
        </div>

        <div class="campaign-buttons">
          <button class="menu-main-btn primary-btn" id="startCampaignBtn">üöÄ Rozpocznij Kampaniƒô</button>
          <button class="menu-main-btn secondary-btn" id="continueCampaignBtn" style="display:none;">‚ñ∂Ô∏è Kontynuuj Kampaniƒô</button>
          <button class="menu-main-btn tertiary-btn" id="resetCampaignBtn" style="display:none;">üîÑ Resetuj Kampaniƒô</button>
        </div>

        <button class="modal-close" id="closeCampaignBtn" aria-label="Zamknij">‚ùå Zamknij</button>
      </div>
    </div>

    <!-- MODAL LEADERBOARD -->
    <div id="leaderboardModal" class="epoch-modal hidden" role="dialog" aria-modal="true">
      <div class="modal-backdrop" id="leaderboardBackdrop"></div>
      <div class="modal-box leaderboard-modal">
        <h2 class="modal-title">üèÖ Ranking Najlepszych</h2>
        <p class="modal-subtitle">Twoje TOP 10 wynik√≥w lokalnych</p>

        <div class="leaderboard-tabs">
          <button class="leaderboard-tab active" id="campaignLeaderboardTab">üèÜ Kampania</button>
          <button class="leaderboard-tab" id="singleLeaderboardTab">üéÆ Pojedyncze Epoki</button>
        </div>

        <div id="campaignLeaderboard" class="leaderboard-content">
          <table class="leaderboard-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Nick</th>
                <th>Kapita≈Ç Ko≈Ñcowy</th>
                <th>Zysk %</th>
                <th>Data</th>
              </tr>
            </thead>
            <tbody id="campaignLeaderboardBody">
              <!-- Filled by JavaScript -->
            </tbody>
          </table>
        </div>

        <div id="singleLeaderboard" class="leaderboard-content hidden">
          <table class="leaderboard-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Nick</th>
                <th>Epoka</th>
                <th>Kapita≈Ç</th>
                <th>Data</th>
              </tr>
            </thead>
            <tbody id="singleLeaderboardBody">
              <!-- Filled by JavaScript -->
            </tbody>
          </table>
        </div>

        <div class="leaderboard-actions">
          <button class="menu-main-btn tertiary-btn" id="clearLeaderboardBtn">üóëÔ∏è Wyczy≈õƒá Ranking</button>
        </div>

        <button class="modal-close" id="closeLeaderboardBtn" aria-label="Zamknij">‚ùå Zamknij</button>
      </div>
    </div>

    <!-- MODAL WYKRESU KAPITA≈ÅU -->
    <div id="chartModal" class="epoch-modal hidden" role="dialog" aria-modal="true">
      <div class="modal-backdrop" id="chartBackdrop"></div>
      <div class="modal-box chart-modal">
        <h2 class="modal-title">üìä Tw√≥j Wykres Kapita≈Çu</h2>
        <p class="modal-subtitle" id="chartSubtitle">≈öledzenie postƒôp√≥w</p>

        <div class="chart-info">
          <div class="chart-stat">
            <div class="chart-stat-label">Szczyt</div>
            <div class="chart-stat-value" id="chartPeak">-</div>
          </div>
          <div class="chart-stat">
            <div class="chart-stat-label">Dno</div>
            <div class="chart-stat-value negative" id="chartBottom">-</div>
          </div>
          <div class="chart-stat">
            <div class="chart-stat-label">Zmiana</div>
            <div class="chart-stat-value negative" id="chartChange">-</div>
          </div>
        </div>

        <div class="chart-container">
          <canvas id="marketChart"></canvas>
        </div>

        <button class="modal-close" id="closeChartBtn" aria-label="Zamknij">‚ùå Zamknij</button>
      </div>
    </div>

    <!-- STARE MENU (teraz ukryte, u≈ºywane tylko przez modal) -->
    <section id="mainMenu" class="hidden" aria-labelledby="menuHeading">
      <h1 id="menuHeading" class="main-title">Historyczny <span>Inwestor</span></h1>
      <p class="main-subtitle">Przetrwaj najwiƒôksze wstrzƒÖsy rynkowe i zrozum, co siƒô wtedy dzia≈Ço ‚Äî krok po kroku.</p>
    </section>

    <section id="gameArea" class="hidden" aria-live="polite">
      <div class="topbar">
        <button class="back-btn" id="backBtn" aria-label="Wr√≥ƒá do menu">‚Üê Powr√≥t</button>
        <div class="progress-outer" aria-hidden="true"><div id="progressBar" class="progress-inner"></div></div>
      </div>

      <header class="header">
        <h2 id="chapterTitle" class="title">‚Äî</h2>
        <p id="chapterSubtitle" class="subtitle">‚Äî</p>
        <div class="stats" role="group" aria-label="Statystyki gry">
          <div class="stat-card"><div class="stat-label">Kapita≈Ç</div><div id="capital" class="stat-value">$1,000</div></div>
          <div class="stat-card"><div class="stat-label">Okres</div><div id="month" class="stat-value">‚Äî</div></div>
          <div class="stat-card"><div id="indexLabel" class="stat-label">Indeks</div><div id="indexValue" class="stat-value">‚Äî</div></div>
          <div class="stat-card"><div class="stat-label">Decyzje</div><div id="decisions" class="stat-value">0</div></div>
        </div>
      </header>

      <div class="layout" id="gameContent"></div>
    </section>
  </div>

  <script>
  (function(){
    const errorBox = document.getElementById('errorBox');
    function showError(msg){
      errorBox.textContent = 'B≈ÇƒÖd skryptu: ' + msg;
      errorBox.style.display = 'block';
    }

    try {
      // --------- STATE ---------
      let currentChapterKey = null;
      let capital = 1000;
      let currentScenario = 0;
      let decisions = 0;
      let capitalHistory = []; // Track capital over time
      let achievements = []; // Track unlocked achievements

      // --------- CAMPAIGN MODE STATE ---------
      let isCampaignMode = false;
      let campaignData = {
        currentEpochIndex: 0,
        capital: 1000,
        completed: []
      };

      // Campaign order - chronological
      const campaignOrder = [
        {key: '1930s', name: 'Wielki Kryzys', years: '1929-1933', icon: 'üè¶'},
        {key: '1970s', name: 'Kryzys Naftowy', years: '1971-1979', icon: 'üõ¢Ô∏è'},
        {key: 'BlackMonday', name: 'Black Monday', years: '1987', icon: 'üí•'},
        {key: '1990s', name: 'Lata 90', years: '1990-1999', icon: 'üìà'},
        {key: 'DotCom', name: 'Ba≈Ñka Dot-com', years: '2000-2002', icon: 'üíª'},
        {key: 'GFC2008', name: 'Kryzys 2008', years: '2008-2009', icon: 'üèöÔ∏è'},
        {key: 'COVID2020', name: 'Pandemia COVID', years: '2020', icon: 'ü¶†'},
        {key: 'FTX2022', name: 'FTX Crash', years: '2022', icon: '‚Çø'},
        {key: 'AIBubble2023', name: 'AI Bubble', years: '2023-2025', icon: 'ü§ñ'}
      ];

      const dom = {
        mainMenu: document.getElementById('mainMenu'),
        gameArea: document.getElementById('gameArea'),
        chapterTitle: document.getElementById('chapterTitle'),
        chapterSubtitle: document.getElementById('chapterSubtitle'),
        indexLabel: document.getElementById('indexLabel'),
        capital: document.getElementById('capital'),
        month: document.getElementById('month'),
        indexValue: document.getElementById('indexValue'),
        decisions: document.getElementById('decisions'),
        gameContent: document.getElementById('gameContent'),
        chapterSelection: document.getElementById('chapterSelection'),
        backBtn: document.getElementById('backBtn'),
        progressBar: document.getElementById('progressBar')
      };

      // --------- MENU SYSTEM ---------
      // Declare variables at top level (will be initialized in initMenuSystem)
      let welcomeScreen, epochModal, chooseEpochBtn, aboutBtn, closeModalBtn, modalBackdrop;
      let campaignModeBtn, campaignModal, closeCampaignBtn, campaignBackdrop;
      let startCampaignBtn, continueCampaignBtn, resetCampaignBtn;
      let campaignEpochs, campaignCapital, campaignCompleted;
      let leaderboardBtn, leaderboardModal, closeLeaderboardBtn, leaderboardBackdrop;
      let campaignLeaderboardTab, singleLeaderboardTab;
      let campaignLeaderboard, singleLeaderboard;
      let campaignLeaderboardBody, singleLeaderboardBody, clearLeaderboardBtn;
      let chartModal, closeChartBtn, chartBackdrop, marketChartCanvas;
      let chartPeak, chartBottom, chartChange, chartSubtitle;
      let currentChart = null; // Store chart instance

      function showWelcomeScreen(){
        welcomeScreen.classList.remove('hidden');
        dom.gameArea.classList.add('hidden');
        epochModal.classList.add('hidden');
        campaignModal.classList.add('hidden');
        leaderboardModal.classList.add('hidden');
        chartModal.classList.add('hidden');
      }

      function hideWelcomeScreen(){
        welcomeScreen.classList.add('hidden');
      }

      function showModal(){
        console.log('üé≠ Opening modal...');
        epochModal.classList.remove('hidden');
        console.log('üì¶ chapterSelection element:', dom.chapterSelection);
        buildMenu(); // Populate modal with chapters
        console.log('‚úÖ Modal opened');
      }

      function hideModal(){
        epochModal.classList.add('hidden');
      }

      // --------- CAMPAIGN MODE FUNCTIONS ---------
      function loadCampaignProgress(){
        const saved = localStorage.getItem('campaignProgress');
        if(saved){
          try {
            const data = JSON.parse(saved);
            campaignData = data;
            console.log('üìÇ Campaign progress loaded:', data);
          } catch(e){
            console.error('‚ùå Failed to load campaign:', e);
          }
        }
      }

      function saveCampaignProgress(){
        localStorage.setItem('campaignProgress', JSON.stringify(campaignData));
        console.log('üíæ Campaign progress saved:', campaignData);
      }

      function openCampaignModal(){
        loadCampaignProgress();
        buildCampaignUI();
        campaignModal.classList.remove('hidden');

        // Show appropriate buttons
        if(campaignData.completed.length > 0){
          continueCampaignBtn.style.display = 'inline-block';
          resetCampaignBtn.style.display = 'inline-block';
        } else {
          continueCampaignBtn.style.display = 'none';
          resetCampaignBtn.style.display = 'none';
        }
      }

      function closeCampaignModal(){
        campaignModal.classList.add('hidden');
      }

      function buildCampaignUI(){
        // Update stats
        campaignCapital.textContent = campaignData.capital.toLocaleString('en-US');
        campaignCompleted.textContent = `${campaignData.completed.length}/9`;

        // Build epoch cards
        campaignEpochs.innerHTML = '';
        campaignOrder.forEach((epoch, index) => {
          const card = document.createElement('div');
          const isCompleted = campaignData.completed.includes(epoch.key);
          const isCurrent = index === campaignData.currentEpochIndex;
          const isLocked = index > campaignData.currentEpochIndex;

          let className = 'campaign-epoch-card';
          if(isCompleted) className += ' completed';
          if(isCurrent) className += ' current';
          if(isLocked) className += ' locked';

          let statusIcon = '';
          if(isCompleted) statusIcon = '‚úÖ';
          else if(isCurrent) statusIcon = '‚ñ∂Ô∏è';
          else if(isLocked) statusIcon = 'üîí';

          card.className = className;
          card.innerHTML = `
            <div class="campaign-epoch-title">
              <span class="campaign-epoch-number">${index + 1}</span>
              ${epoch.icon} ${epoch.name}
            </div>
            <div class="campaign-epoch-desc">${epoch.years}</div>
            <div class="campaign-epoch-status">${statusIcon}</div>
          `;

          // Click to start if current epoch
          if(isCurrent && !isLocked){
            card.style.cursor = 'pointer';
            card.addEventListener('click', () => {
              startCampaign();
            });
          }

          campaignEpochs.appendChild(card);
        });
      }

      function startCampaign(){
        if(campaignData.currentEpochIndex >= campaignOrder.length){
          alert('üéâ Gratulacje! Uko≈Ñczy≈Çe≈õ ca≈ÇƒÖ kampaniƒô!\n\nKapita≈Ç ko≈Ñcowy: $' + campaignData.capital.toLocaleString('en-US'));
          return;
        }

        isCampaignMode = true;
        const currentEpoch = campaignOrder[campaignData.currentEpochIndex];

        closeCampaignModal();
        hideWelcomeScreen();

        console.log('üöÄ Starting campaign epoch:', currentEpoch.name);
        startChapter(currentEpoch.key, campaignData.capital);
      }

      function resetCampaign(){
        if(confirm('üîÑ Czy na pewno chcesz zresetowaƒá ca≈ÇƒÖ kampaniƒô? Stracisz ca≈Çy postƒôp!')){
          campaignData = {
            currentEpochIndex: 0,
            capital: 1000,
            completed: []
          };
          saveCampaignProgress();
          buildCampaignUI();
          console.log('üîÑ Campaign reset');
        }
      }

      function onEpochComplete(){
        if(!isCampaignMode) return;

        // Save current capital
        campaignData.capital = capital;

        // Mark epoch as completed
        const currentEpoch = campaignOrder[campaignData.currentEpochIndex];
        if(!campaignData.completed.includes(currentEpoch.key)){
          campaignData.completed.push(currentEpoch.key);
        }

        // Move to next epoch
        campaignData.currentEpochIndex++;
        saveCampaignProgress();

        // Show transition message
        if(campaignData.currentEpochIndex < campaignOrder.length){
          const nextEpoch = campaignOrder[campaignData.currentEpochIndex];
          setTimeout(() => {
            if(confirm(`‚úÖ Epoka uko≈Ñczona!\n\nüí∞ Tw√≥j kapita≈Ç: $${campaignData.capital.toLocaleString('en-US')}\n\n‚ñ∂Ô∏è Nastƒôpna epoka: ${nextEpoch.icon} ${nextEpoch.name} (${nextEpoch.years})\n\nCzy chcesz kontynuowaƒá?`)){
              startCampaign();
            } else {
              showWelcomeScreen();
            }
          }, 1000);
        } else {
          // Campaign complete!
          setTimeout(() => {
            // Save campaign score
            const playerName = prompt('üèÜ Uko≈Ñczy≈Çe≈õ kampaniƒô!\n\nPodaj sw√≥j nick do rankingu (lub zostaw puste):', 'Gracz') || 'Gracz';
            saveScore('campaign', {
              name: playerName,
              capital: campaignData.capital,
              date: Date.now()
            });

            alert(`üéâüéâüéâ GRATULACJE! üéâüéâüéâ\n\nUko≈Ñczy≈Çe≈õ ca≈ÇƒÖ kampaniƒô!\n\nüí∞ Kapita≈Ç poczƒÖtkowy: $1,000\nüí∞ Kapita≈Ç ko≈Ñcowy: $${campaignData.capital.toLocaleString('en-US')}\nüìà Zysk: ${((campaignData.capital/1000 - 1) * 100).toFixed(1)}%\n\nüèÜ Prze≈ºy≈Çe≈õ 100 lat historii finans√≥w!\n\n‚úÖ Wynik zapisany w rankingu!`);
            showWelcomeScreen();
          }, 1000);
        }
      }

      // --------- LEADERBOARD SYSTEM ---------
      function loadLeaderboard(){
        const campaignScores = localStorage.getItem('leaderboard_campaign');
        const singleScores = localStorage.getItem('leaderboard_single');
        return {
          campaign: campaignScores ? JSON.parse(campaignScores) : [],
          single: singleScores ? JSON.parse(singleScores) : []
        };
      }

      function saveScore(type, scoreData){
        const leaderboard = loadLeaderboard();
        leaderboard[type].push(scoreData);

        // Sort by capital (descending) and keep top 10
        leaderboard[type].sort((a, b) => b.capital - a.capital);
        leaderboard[type] = leaderboard[type].slice(0, 10);

        localStorage.setItem(`leaderboard_${type}`, JSON.stringify(leaderboard[type]));
        console.log(`üíæ Score saved to ${type} leaderboard:`, scoreData);
      }

      function openLeaderboardModal(){
        const leaderboard = loadLeaderboard();
        renderLeaderboard('campaign', leaderboard.campaign);
        renderLeaderboard('single', leaderboard.single);
        leaderboardModal.classList.remove('hidden');
      }

      function closeLeaderboardModal(){
        leaderboardModal.classList.add('hidden');
      }

      function renderLeaderboard(type, scores){
        const tbody = type === 'campaign' ? campaignLeaderboardBody : singleLeaderboardBody;

        if(scores.length === 0){
          tbody.innerHTML = '<tr><td colspan="5" class="leaderboard-empty">Brak wynik√≥w. Zagraj pierwszƒÖ grƒô! üéÆ</td></tr>';
          return;
        }

        tbody.innerHTML = scores.map((score, index) => {
          const profitPercent = type === 'campaign'
            ? ((score.capital / 1000 - 1) * 100).toFixed(1)
            : ((score.capital / score.startCapital - 1) * 100).toFixed(1);
          const profitClass = profitPercent >= 0 ? 'leaderboard-profit' : 'leaderboard-loss';

          return `
            <tr>
              <td class="leaderboard-rank">${index + 1}</td>
              <td>${score.name || 'Gracz'}</td>
              ${type === 'single' ? `<td>${score.epoch || '?'}</td>` : ''}
              <td>$${score.capital.toLocaleString('en-US')}</td>
              ${type === 'campaign' ? `<td class="${profitClass}">${profitPercent > 0 ? '+' : ''}${profitPercent}%</td>` : ''}
              <td>${new Date(score.date).toLocaleDateString('pl-PL')}</td>
            </tr>
          `;
        }).join('');
      }

      function switchLeaderboardTab(tab){
        if(tab === 'campaign'){
          campaignLeaderboardTab.classList.add('active');
          singleLeaderboardTab.classList.remove('active');
          campaignLeaderboard.classList.remove('hidden');
          singleLeaderboard.classList.add('hidden');
        } else {
          singleLeaderboardTab.classList.add('active');
          campaignLeaderboardTab.classList.remove('active');
          singleLeaderboard.classList.remove('hidden');
          campaignLeaderboard.classList.add('hidden');
        }
      }

      function clearLeaderboard(){
        if(confirm('üóëÔ∏è Czy na pewno chcesz wyczy≈õciƒá WSZYSTKIE rankingi? Tej operacji nie mo≈ºna cofnƒÖƒá!')){
          localStorage.removeItem('leaderboard_campaign');
          localStorage.removeItem('leaderboard_single');
          renderLeaderboard('campaign', []);
          renderLeaderboard('single', []);
          console.log('üóëÔ∏è Leaderboards cleared');
        }
      }

      // --------- CHART SYSTEM ---------
      function openChartModal(epochKey){
        // Use capitalHistory (player's capital over time)
        if(capitalHistory.length < 2){
          alert('üìä Wykres dostƒôpny po pierwszej decyzji!');
          return;
        }

        const ch = chapters[epochKey];
        if(!ch) return;

        // Labels: Start, Decyzja 1, Decyzja 2, etc.
        const labels = capitalHistory.map((_, idx) => {
          if(idx === 0) return 'Start';
          return `Decyzja ${idx}`;
        });

        const startCap = capitalHistory[0];
        const currentCap = capitalHistory[capitalHistory.length - 1];
        const peak = Math.max(...capitalHistory);
        const bottom = Math.min(...capitalHistory);
        const change = ((currentCap / startCap - 1) * 100).toFixed(1);

        // Determine color based on profit/loss
        const isProfit = currentCap >= startCap;
        const lineColor = isProfit ? '#2ed573' : '#ff4757';
        const bgColor = isProfit ? 'rgba(46, 213, 115, 0.1)' : 'rgba(255, 71, 87, 0.1)';

        // Update stats
        chartSubtitle.textContent = `Tw√≥j kapita≈Ç (${ch.title})`;
        chartPeak.textContent = `$${peak.toLocaleString()}`;
        chartBottom.textContent = `$${bottom.toLocaleString()}`;
        chartChange.textContent = `${change > 0 ? '+' : ''}${change}%`;
        chartChange.className = `chart-stat-value ${isProfit ? '' : 'negative'}`;

        // Destroy previous chart
        if(currentChart){
          currentChart.destroy();
        }

        // Create chart
        const ctx = marketChartCanvas.getContext('2d');
        currentChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: 'Kapita≈Ç',
              data: capitalHistory,
              borderColor: lineColor,
              backgroundColor: bgColor,
              borderWidth: 3,
              tension: 0.3,
              fill: true,
              pointBackgroundColor: lineColor,
              pointBorderColor: '#fff',
              pointBorderWidth: 2,
              pointRadius: 5,
              pointHoverRadius: 7
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: true,
                labels: {
                  color: '#eef3ff',
                  font: { size: 14, weight: '600' }
                }
              },
              tooltip: {
                backgroundColor: 'rgba(15, 18, 34, 0.95)',
                titleColor: '#8b5cf6',
                bodyColor: '#eef3ff',
                borderColor: '#8b5cf6',
                borderWidth: 2,
                padding: 12,
                displayColors: false,
                callbacks: {
                  label: function(context){
                    return `Kapita≈Ç: $${context.parsed.y.toLocaleString()}`;
                  }
                }
              }
            },
            scales: {
              x: {
                ticks: {
                  color: '#cbd5e1',
                  maxRotation: 45,
                  minRotation: 45
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.05)'
                }
              },
              y: {
                ticks: {
                  color: '#cbd5e1',
                  callback: function(value){
                    return '$' + value.toLocaleString();
                  }
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.05)'
                }
              }
            },
            animation: {
              duration: 1500,
              easing: 'easeInOutQuart'
            }
          }
        });

        chartModal.classList.remove('hidden');
        console.log('üìà Chart opened for', epochKey);
      }

      function closeChartModal(){
        chartModal.classList.add('hidden');
      }

      // Initialize menu system AFTER DOM loads
      function initMenuSystem(){
        console.log('üéÆ Initializing menu system...');

        // Initialize all DOM elements
        welcomeScreen = document.getElementById('welcomeScreen');
        epochModal = document.getElementById('epochModal');
        chooseEpochBtn = document.getElementById('chooseEpochBtn');
        aboutBtn = document.getElementById('aboutBtn');
        closeModalBtn = document.getElementById('closeModalBtn');
        modalBackdrop = document.getElementById('modalBackdrop');

        campaignModeBtn = document.getElementById('campaignModeBtn');
        campaignModal = document.getElementById('campaignModal');
        closeCampaignBtn = document.getElementById('closeCampaignBtn');
        campaignBackdrop = document.getElementById('campaignBackdrop');
        startCampaignBtn = document.getElementById('startCampaignBtn');
        continueCampaignBtn = document.getElementById('continueCampaignBtn');
        resetCampaignBtn = document.getElementById('resetCampaignBtn');
        campaignEpochs = document.getElementById('campaignEpochs');
        campaignCapital = document.getElementById('campaignCapital');
        campaignCompleted = document.getElementById('campaignCompleted');

        leaderboardBtn = document.getElementById('leaderboardBtn');
        leaderboardModal = document.getElementById('leaderboardModal');
        closeLeaderboardBtn = document.getElementById('closeLeaderboardBtn');
        leaderboardBackdrop = document.getElementById('leaderboardBackdrop');
        campaignLeaderboardTab = document.getElementById('campaignLeaderboardTab');
        singleLeaderboardTab = document.getElementById('singleLeaderboardTab');
        campaignLeaderboard = document.getElementById('campaignLeaderboard');
        singleLeaderboard = document.getElementById('singleLeaderboard');
        campaignLeaderboardBody = document.getElementById('campaignLeaderboardBody');
        singleLeaderboardBody = document.getElementById('singleLeaderboardBody');
        clearLeaderboardBtn = document.getElementById('clearLeaderboardBtn');

        chartModal = document.getElementById('chartModal');
        closeChartBtn = document.getElementById('closeChartBtn');
        chartBackdrop = document.getElementById('chartBackdrop');
        marketChartCanvas = document.getElementById('marketChart');
        chartPeak = document.getElementById('chartPeak');
        chartBottom = document.getElementById('chartBottom');
        chartChange = document.getElementById('chartChange');
        chartSubtitle = document.getElementById('chartSubtitle');

        console.log('‚úÖ All DOM elements initialized');

        dom.backBtn.addEventListener('click', () => {
          console.log('Back button clicked');
          isCampaignMode = false; // Reset campaign mode when returning to menu
          showWelcomeScreen();
        });

        chooseEpochBtn.addEventListener('click', () => {
          console.log('Choose epoch clicked');
          isCampaignMode = false;
          showModal();
        });

        aboutBtn.addEventListener('click', () => {
          console.log('About clicked');
          alert('üìà HISTORYCZNY INWESTOR - Wersja Edukacyjna\n\nWciel siƒô w rolƒô inwestora prze≈ºywajƒÖcego najwiƒôksze kryzysy finansowe ostatnich 100 lat.\n\nüéØ Cel: Zrozum mechanizmy rynkowe i naucz siƒô podejmowaƒá mƒÖdre decyzje\nüìö 9 Epok: Od Wielkiego Kryzysu 1929 do AI Bubble 2023\nüí° Ucz siƒô na b≈Çƒôdach historii!\n\nüèÜ NOWO≈öƒÜ: Tryb Kampanii - przejd≈∫ przez wszystkie epoki chronologicznie!\n\nWersja: 4.0-campaign');
        });

        closeModalBtn.addEventListener('click', () => {
          console.log('Close modal clicked');
          hideModal();
        });

        modalBackdrop.addEventListener('click', () => {
          console.log('Backdrop clicked');
          hideModal();
        });

        // Campaign Mode Event Listeners
        campaignModeBtn.addEventListener('click', () => {
          console.log('Campaign mode clicked');
          openCampaignModal();
        });

        closeCampaignBtn.addEventListener('click', () => {
          console.log('Close campaign modal clicked');
          closeCampaignModal();
        });

        campaignBackdrop.addEventListener('click', () => {
          console.log('Campaign backdrop clicked');
          closeCampaignModal();
        });

        startCampaignBtn.addEventListener('click', () => {
          console.log('Start campaign clicked');
          // Reset campaign
          campaignData = {
            currentEpochIndex: 0,
            capital: 1000,
            completed: []
          };
          saveCampaignProgress();
          startCampaign();
        });

        continueCampaignBtn.addEventListener('click', () => {
          console.log('Continue campaign clicked');
          startCampaign();
        });

        resetCampaignBtn.addEventListener('click', () => {
          console.log('Reset campaign clicked');
          resetCampaign();
        });

        // Leaderboard Event Listeners
        leaderboardBtn.addEventListener('click', () => {
          console.log('Leaderboard clicked');
          openLeaderboardModal();
        });

        closeLeaderboardBtn.addEventListener('click', () => {
          console.log('Close leaderboard clicked');
          closeLeaderboardModal();
        });

        leaderboardBackdrop.addEventListener('click', () => {
          console.log('Leaderboard backdrop clicked');
          closeLeaderboardModal();
        });

        campaignLeaderboardTab.addEventListener('click', () => {
          console.log('Campaign leaderboard tab clicked');
          switchLeaderboardTab('campaign');
        });

        singleLeaderboardTab.addEventListener('click', () => {
          console.log('Single leaderboard tab clicked');
          switchLeaderboardTab('single');
        });

        clearLeaderboardBtn.addEventListener('click', () => {
          console.log('Clear leaderboard clicked');
          clearLeaderboard();
        });

        // Chart Event Listeners
        closeChartBtn.addEventListener('click', () => {
          console.log('Close chart clicked');
          closeChartModal();
        });

        chartBackdrop.addEventListener('click', () => {
          console.log('Chart backdrop clicked');
          closeChartModal();
        });

        console.log('‚úÖ Menu system initialized');
      }

      // --------- HINTS (obszerne t≈Ça historyczne ‚Äî ukryte do klikniƒôcia) ---------
      const hints = {
        '1930s': [
          'Pa≈∫dziernik 1929: Czarny Czwartek/Wtorek ‚Äì margin calls lavina. Dow 381 ‚Üí 230 w dni.',
          'Listopad 1929: Bank runs begin. Brak FDIC. "Buy the dip" = catching falling knife.',
          'Czerwiec 1930: Smoot-Hawley tariffs signed. Bear market rally kusi. "Worst is over"? Nie.',
          'Grudzie≈Ñ 1930: Bank of United States fails ‚Äì 400k deponent√≥w. Banking panic.',
          'Maj 1931: Credit-Anstalt (Austria) collapse. Depression goes global. Gold standard breaks.',
          'Wrzesie≈Ñ 1931: Britain leaves gold standard. Funt -25%. Fed podnosi stopy (!) ‚Äì mistake.',
          'Lipiec 1932: Dow 41 (-89% od szczytu). Bezrobocie 25%. Hooverville. Absolutne dno.',
          'Listopad 1932: FDR election landslide. New Deal obiecany. Nadzieja wraca. Prohibition ends.',
          'Marzec 1933: Bank Holiday. FDIC insurance. Dolar dewaluowany $20.67 ‚Üí $35. Dno CONFIRMED.',
          'Lekcja: Deflacja + leverage = disaster. Got√≥wka + jako≈õƒá = survival. Don\'t catch falling knives.'
        ],
        '1970s': [
          'Sierpie≈Ñ 1971: Nixon zamyka "gold window". Bretton Woods collapse. Dolar dewaluowany. Z≈Çoto i commodities boom start.',
          'Pa≈∫dziernik 1973: Wojna Yom Kippur. OPEC embargo. Ropa $3 ‚Üí $12. Gas lines. Szok poda≈ºowy = stagflacja.',
          'Marzec 1974: Inflacja + recesja = stagflacja. Limity cen = niedobory. Cash + bonds lose to inflation.',
          'Sierpie≈Ñ 1974: Nixon resign (Watergate). Wysokie stopy procentowe. Growth stocks massacred.',
          'Stycze≈Ñ 1975: Recesja peak. Bezrobocie 9%. Fed ≈Çagodzi, ale inflacja wysoka. Jako≈õƒá po przecenie.',
          'Lipiec 1976: Recovery. Mikroprocesory wchodzƒÖ do przemys≈Çu. Efficiency tech trend.',
          'Maj 1977: Carter prezydent. Misery Index 13.5%. Inflacja 6.5%+. Dolar s≈Çaby. Z≈Çoto $148 (by≈Ço $35).',
          'Grudzie≈Ñ 1978: Drugi szok naftowy (Iran revolution ahead). Inflacja rozkrƒôca siƒô. Real assets dominujƒÖ.',
          'Sierpie≈Ñ 1979: Volcker Fed Chair. War on inflation. Stopy ‚Üí 20% (1981). Z≈Çoto ‚Üí $850. Bonds massacred.',
          'Lekcja: Real assets (z≈Çoto, commodities, RE) chroniƒÖ w stagflacji. Cash = trash. Volcker wins long term.'
        ],
        '1990s': [
          'Listopad 1990: S&L crisis 700+ bank√≥w. $160B bailout. Gulf War buildup. Recesja.',
          'Marzec 1991: Desert Storm victory 100h. Oil crash. PC boom (Windows 3.0). Recovery!',
          'Luty 1994: Fed 3% ‚Üí 6% w rok. Bond massacre. Orange County bankrut. Tequila crisis.',
          'Lipiec 1995: Goldilocks economy. Netscape IPO. Passive investing boom. S&P +30%.',
          'Grudzie≈Ñ 1996: Greenspan "irrational exuberance" ‚Äì ale rynek ignoruje. Dow 6000+.',
          'Pa≈∫dziernik 1997: Thailand baht collapse. Asian crisis. Dow -7% w dzie≈Ñ. USA decouples.',
          'Sierpie≈Ñ 1998: Russia default. LTCM leverage 25:1 implodes. Fed bailout. 3 rate cuts.',
          'Maj 1999: Dow 10,000. Nasdaq +40% YTD. Day trading boom. "Eyeballs" metrics. FOMO.',
          'Grudzie≈Ñ 1999: Y2K peak. Nasdaq 4000 (+86% YTD). Best decade ever. Bubble bursts soon.',
          'Don\'t fight Fed. Goldilocks = gold. Tech boom legit until bubble. Decoupling works.'
        ],
        'DotCom': [
          '1998: Netscape IPO model. Amazon, Yahoo, eBay public. "Eyeballs" > revenue. VC flood.',
          'Y2K 1999: IPO co tydzie≈Ñ. Pets.com, eToys bez zysk√≥w, wyceny miliardowe. Day trading boom.',
          '10 marca 2000: Nasdaq 5048 ATH. P/E 100+. Add ".com" = +50%. Greenspan stopy 6.5%.',
          '14 kwietnia 2000: Nasdaq -9% w dzie≈Ñ. Fed tightening dzia≈Ça. IPO window zamyka siƒô.',
          'Listopad 2000: -40% od szczytu. VC funding freeze. Pets.com liquidates 9 miesiƒôcy po IPO.',
          '2001: 200+ dot-coms bankrupt. eToys, Webvan gone. Tylko profitable survive.',
          '11 wrze≈õnia: WTC zamachy. Markets closed 4 dni. Travel/ad spending collapse.',
          '2002: WorldCom $104B bankrupt. Enron fraud. Sarbanes-Oxley. Trust destroyed.',
          'Pa≈∫dziernik 2002: Nasdaq 1114 (-78%). 5000 dot-coms dead. Survivors: AMZN, EBAY, GOOG.',
          'Quality + cashflow wins. Valuations matter long term. "This time is different" = lie.'
        ],
        'BlackMonday': [
          'Stycze≈Ñ 1987: Reagan bull 1982-87 (+230%). P/E 20+. Portfolio insurance $90B. "Greed is good".',
          'Kwiecie≈Ñ 1987: Volcker out, Greenspan in. Rates rising. Dollar weak. Trade deficit $15B/month.',
          'Sierpie≈Ñ 1987: Dow 2722 ATH (+40% YTD). Program trading dominuje. Fed stopy 9.5%. Stretched.',
          'Wrzesie≈Ñ 1987: Dow -8% od ATH. Portfolio insurance triggers. Volatility spike. Correction overdue.',
          '16 Pa≈∫dziernika: PiƒÖtek -5% (-108 punkt√≥w). Program trading flood. Media hype panic weekend.',
          '19 Pa≈∫dziernika: BLACK MONDAY -22.6% (-508 punkt√≥w). Biggest drop EVER. Systems crash. Chaos.',
          '20 Pa≈∫dziernika: Terrible Tuesday. Fed liquidity pledge. Goldman/Salomon buy. Rynek +5.9%!',
          'Grudzie≈Ñ 1987: Dow +11% od do≈Çka. Fed cuts. No recession. Techniczny krach, nie fundamentalny.',
          'Stycze≈Ñ 1988: Bull market resumed. Circuit breakers introduced. Portfolio insurance dead.',
          'Lekcja: Technical crashes happen. Fed put works. Don\'t panic sell. Quality recovers fastest.'
        ],
        'GFC2008': [
          '9 sierpnia 2007 ‚Äì BNP Paribas freeze. CDOs toksyczne. LIBOR spike. ‚ÄûTo lokalne".',
          'Citi, Merrill write-downs $15-18B. Monoline insurers lose AAA. Recession starts.',
          '16 marca 2008 ‚Äì Bear Stearns $2/share (by≈Ço $170). Leverage 35:1. Moral hazard.',
          'Fannie/Freddie $5T exposure. IndyMac bankrut. Oil $147. Stagflacja?',
          '15 wrze≈õnia ‚Äì LEHMAN BANKRUTUJE. $600B. AIG bailout $85B. Money markets break buck.',
          '3 pa≈∫dziernika ‚Äì TARP $700B passed. Iceland banks fail. VIX 80. Great Depression 2.0?',
          '16 grudnia ‚Äì Fed 0% ZIRP. Citi $45B bailout. Madoff $65B Ponzi. Auto bailout.',
          '17 lutego 2009 ‚Äì Obama $787B stimulus. Bank stress tests. Citi <$1. Nationalization fear.',
          '9 marca ‚Äì S&P 666 dno. QE1 $1.75T announced. Mark-to-market relaxed. 11-year bull begins.',
          'Counterparty risk fatal. Cash is king. Quality survives. Buy the fear = legendary.'
        ],
        'COVID2020': [
          '23 stycznia ‚Äì Wuhan lockdown 11M ludzi. Rynki ignorujƒÖ. ‚ÄûTo Chiny".',
          'Diamond Princess cruise ‚Äì 700 zara≈ºonych. Trump: \"15 przypadk√≥w ‚Üí zero\".',
          'Najszybszy krach w historii ‚Äì 34% w 23 dni. VIX 80. Toilet paper panic.',
          'Fed UNLIMITED QE. $2T stimulus. $1200 checks. Oil WTI -$37 (minus!).',
          'Robinhood traders ‚Äì Hertz bankrut +900%. Dave Portnoy: \"easiest game\".',
          'Zoom +355% YoY. Peloton sold out. Amazon hiring 175k. Work from home forever.',
          'Tesla 5:1 split. Nasdaq +80% od marca. Softbank \"Nasdaq whale\" leak.',
          '9 listopada ‚Äì Pfizer szczepionka 90%. Rotation: value +15%, cruises +40%.',
          'Bitcoin $29k (+300% YTD). Stimulus #2. Reopening vs stay-at-home.',
          'Don\'t fight the Fed. V-shaped recovery. Tech bubble 2.0. Meme stocks era.'
        ],
        'FTX2022': [
          'Fed podnosi stopy ‚Üí risk-off. Leverage w systemie gigantyczny. Krypto krew.',
          'Luna/UST to algorytmiczny stablecoin ‚Äì kolapsnƒÖ≈Ç w 72h z $40B do $0.',
          'Celsius obiecuje 18% APY. 13 czerwca zamra≈ºa wyp≈Çaty. $20B locked.',
          '3AC ‚Äì Su Zhu i Kyle Davies ‚Äì d≈∫wignia 10x. Margin call. Efekt domina.',
          'Ethereum Merge ‚Äì Proof of Stake. Miners kapitulujƒÖ. Sell the news.',
          'Wrzesie≈Ñ ‚Äì cisza przed burzƒÖ. FTX kupuje BlockFi. SBF ‚Äûratuje" rynek.',
          'CoinDesk leak: Alameda ma $5B FTT jako collateral. CZ vs SBF. Bank run.',
          'FTX u≈ºywa≈Ç depozyt√≥w klient√≥w na spekulacje. Binance wycofa≈Ç siƒô z przejƒôcia.',
          'SBF aresztowany. Genesis zamra≈ºa wyp≈Çaty. GBTC discount -50%. Contagion.',
          'Not your keys, not your coins. Self-custody = survival. Counterparty risk fatal.'
        ],
        'AIBubble2023': [
          'ChatGPT osiƒÖgnƒÖ≈Ç 100M u≈ºytkownik√≥w w 2 miesiƒÖce ‚Äì najszybsze przyjƒôcie w historii.',
          'Nvidia to picks-and-shovels play ‚Äì sprzedaje GPU ($30k/H100). Zawsze wygrywa.',
          'Microsoft zainwestowa≈Ç $13B w OpenAI. Copilot = $30/user recurring revenue.',
          'Open source (Llama 2, Mistral) vs proprietary (GPT-4, Claude). Kto wygra?',
          'Sam Altman fired & rehired ‚Äì drama pokaza≈Ça ≈ºe Microsoft kontroluje OpenAI.',
          'Google Gemini 1.5 ma 1M tokens context. DeepMind + Google Cloud = threat.',
          'Sora (video AI) i valuacje venture ‚Äì wiƒôkszo≈õƒá bez revenue, ale wyceny miliardowe.',
          'O1 reasoning i AI agents ‚Äì GPT my≈õli, Claude kontroluje komputer. Capex $50B/rok.',
          'Energy bottleneck ‚Äì datacenters ≈ºrƒÖ prƒÖd. Uranium, grid infrastructure kluczowe.'
        ]
      };

      // --------- ROZDZIA≈ÅY I DANE ---------
      const chapters = {
        '1930s': {
          era:'Lata 1930', name:'Wielki Kryzys', desc:'Od Czarnych Dni po Nowy ≈Åad. Zrozum mechanikƒô paniki i odbicia.',
          title:'Inwestor Wielkiego Kryzysu',
          subtitle:'Wall Street, jesie≈Ñ 1929. Po latach hossy wielu kupuje akcje na kredyt (mar≈ºa). Banki nie majƒÖ ubezpieczenia depozyt√≥w, a gospodarka zaczyna siƒô potykaƒá. W tym rozdziale poznasz margin call, ‚Äûodbicie nied≈∫wiedzie‚Äù i rolƒô got√≥wki oraz sektor√≥w defensywnych.',
          indexLabel:'Dow Jones',
          scenarios:[
            { month:'Pa≈∫dziernik 1929', indexValue:381, title:'Zbli≈ºa siƒô Czarny Czwartek', description:'Gazety od miesiƒôcy opisujƒÖ rekordy. Coraz popularniejsze jest kupowanie akcji na kredyt (mar≈ºa) ‚Äî gdy rynek ro≈õnie, zyski sƒÖ powiƒôkszone, ale gdy spada, broker ≈ºƒÖda dop≈Çaty albo sprzedaje Twoje akcje. KrƒÖ≈ºƒÖ pog≈Çoski o k≈Çopotach w sp√≥≈Çkach i bankach. To moment, w kt√≥rym drobny b≈ÇƒÖd mo≈ºe wciƒÖgnƒÖƒá ca≈Çy system w lawinƒô. Co robisz: dok≈Çadasz paliwa do hossy, czy chronisz kapita≈Ç?',
              choices:[{text:'Kupuj wiƒôcej akcji ‚Äì hossa trwa!',effect:'buy_stocks'},{text:'Sprzedaj wszystko i id≈∫ w got√≥wkƒô',effect:'sell_all'},{text:'Kup z≈Çoto jako zabezpieczenie',effect:'buy_gold'},{text:'Graj na spadki ‚Äì krach nadchodzi',effect:'short_market'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/1/19/Crowd_outside_nyse.jpg' },
            { month:'Listopad 1929', indexValue:230, title:'Krach siƒô rozpoczƒÖ≈Ç', description:'W kilka dni indeksy spadajƒÖ o kilkadziesiƒÖt procent. Uruchamia siƒô efekt domina: margin-calle wymuszajƒÖ panicznƒÖ sprzeda≈º, banki bez ubezpieczenia depozyt√≥w same wpadajƒÖ w k≈Çopoty, a klienci ustawiajƒÖ siƒô w kolejkach po got√≥wkƒô. ‚ÄûKup do≈Çek" kusi, ale niepewno≈õƒá i brak p≈Çynno≈õci potrafiƒÖ ciƒÖgnƒÖƒá spadki d≈Çu≈ºej, ni≈º siƒô wydaje rozsƒÖdne.',
              choices:[{text:'Kupuj spadki ‚Äì tanio!',effect:'buy_dip'},{text:'Czekaj na stabilizacjƒô',effect:'hold_cash'},{text:'Sp√≥≈Çki u≈ºyteczno≈õci publicznej',effect:'buy_utilities'},{text:'Towary i ziemia rolna',effect:'buy_commodities'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/5/5e/New_York_stock_exchange_ticker_tape_parade_1919.jpg' },
            { month:'Czerwiec 1930', indexValue:211, title:'Fa≈Çszywy ≈õwit', description:'Po ostrych zjazdach pojawia siƒô odbicie ‚Äî klasyczne ‚Äûodbicie nied≈∫wiedzie". Politycy zapewniajƒÖ, ≈ºe ‚Äûnajgorsze za nami", ale podwy≈ºszone c≈Ça (Smoot‚ÄìHawley) uderzajƒÖ w handel, a firmy tnƒÖ inwestycje i etaty. Kr√≥tkotrwa≈Ça hossa ≈Çatwo wciƒÖga nieostro≈ºnych z powrotem na rynek.',
              choices:[{text:'Blue-chipy z dywidendƒÖ',effect:'buy_dividends'},{text:'Kopalnie z≈Çota',effect:'buy_gold_miners'},{text:'Obligacje rzƒÖdowe',effect:'buy_bonds'},{text:'Za≈Ç√≥≈º firmƒô',effect:'start_business'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/2/2a/Construction_New_Deal.jpg' },
            { month:'Grudzie≈Ñ 1930', indexValue:170, title:'Bank of United States upada', description:'11 grudnia ‚Äì Bank of United States (New York) bankrutuje. Najwiƒôkszy bank failure w historii USA (do tego momentu). 400,000 deponent√≥w traci oszczƒôdno≈õci. ≈ªadne ubezpieczenie depozyt√≥w. Efekt domina ‚Äì kolejne banki upadajƒÖ. Ludzie chowajƒÖ got√≥wkƒô pod materacem. Credit contraction zabija gospodarkƒô. "Banking panic" w pe≈Çni.',
              choices:[{text:'Got√≥wka pod materac ‚Äì zaufanie zero',effect:'cash_mattress_30'},{text:'Tylko biggest banks ‚Äì JP Morgan',effect:'biggest_banks_30'},{text:'Z≈Çoto ‚Äì jedyne bezpiecze≈Ñstwo',effect:'gold_safety_30'},{text:'Obligacje rzƒÖdowe',effect:'govt_bonds_30'}]},
            { month:'Maj 1931', indexValue:140, title:'Credit-Anstalt ‚Äì kryzys globalny', description:'11 maja ‚Äì Credit-Anstalt (najwiƒôkszy bank Austrii) upada. Efekt domina w Europie. German banks w panice. Britain odkrywa ≈ºe nie mo≈ºe utrzymaƒá gold standard. Globalna deflacja. Handel miƒôdzynarodowy collapse. Hoover moratorium na reparacje wojenne. Ale za p√≥≈∫no ‚Äì Depression goes global.',
              choices:[{text:'Sprzedaj wszystko ‚Äì global collapse',effect:'sell_global_31'},{text:'Short europejskie banki',effect:'short_europe_31'},{text:'USA safe haven ‚Äì American stocks',effect:'usa_haven_31'},{text:'Z≈Çoto i commodities tylko',effect:'gold_commodities_31'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/9/9c/Breadline.jpg' },
            { month:'Wrzesie≈Ñ 1931', indexValue:130, title:'Britain opuszcza gold standard', description:'21 wrze≈õnia ‚Äì Wielka Brytania opuszcza gold standard. Funt dewaluuje -25%. Bank of England kapituluje. USA i Francja trzymajƒÖ z≈Çoto ale pod presjƒÖ. Eksport trudniejszy (strong dollar). Deflacja w USA siƒô pog≈Çƒôbia. Fed podnosi stopy (!) ≈ºeby broniƒá z≈Çota ‚Äì cios w gospodarkƒô.',
              choices:[{text:'Nieruchomo≈õci w kryzysie',effect:'buy_real_estate'},{text:'Firmy spo≈ºywcze ‚Äì defensywa',effect:'buy_staples'},{text:'Gromad≈∫ got√≥wkƒô ‚Äì deflacja wygrywa',effect:'hoard_cash'},{text:'Wiƒôcej z≈Çota',effect:'buy_more_gold'}]},
            { month:'Lipiec 1932', indexValue:41, title:'Samo dno ‚Äì Dow -89%', description:'8 lipca ‚Äì Dow Jones 41 (szczyt by≈Ç 381). Spadek -89% od szczytu. Najgorsze w historii. Bezrobocie 25%. Hooverville slumsy w miastach. Bonus Army protestuje w DC. Wyceny absurdalne ‚Äì P/E 5-7. Ale strach maximum. Irving Fisher (ekonomista) zbankrutowa≈Ç. ‚ÄûKapitulacja" pe≈Çna. Kto kupuje dno zostanie milionerem.',
              choices:[{text:'All-in w akcje ‚Äì to dno stulecia',effect:'buy_bottom'},{text:'Silne sp√≥≈Çki ‚Äì IBM, Coca-Cola',effect:'buy_quality'},{text:'Akcje alkoholowe (Prohibition ends soon)',effect:'buy_alcohol'},{text:'Zosta≈Ñ przy got√≥wce ‚Äì mo≈ºe byƒá gorzej',effect:'stay_safe'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/1/14/Newspaper_boy_1930s.jpg' },
            { month:'Listopad 1932', indexValue:45, title:'FDR wygrywa ‚Äì nadzieja wraca', description:'8 listopada ‚Äì Franklin D. Roosevelt wygrywa wybory landslide. Obiecuje "New Deal" ‚Äì programy rob√≥t publicznych, reform bankowy, koniec Prohibition. Wall Street czeka na inauguracjƒô (marzec 1933). Rynek lekko odbija z do≈Çka. Ale banki nadal upadajƒÖ. "Banking holiday" coming. Pytanie: czy FDR uratuje system?',
              choices:[{text:'Kup przed inauguracjƒÖ ‚Äì optymizm',effect:'buy_fdr_hope'},{text:'Czekaj na konkretne dzia≈Çania',effect:'wait_fdr_action'},{text:'Infrastructura ‚Äì New Deal play',effect:'infra_new_deal'},{text:'Alcohol stocks ‚Äì Prohibition ends!',effect:'alcohol_prohibition_end'}]},
            { month:'Marzec 1933', indexValue:63, title:'Bank Holiday i Nowy ≈Åad', description:'4 marca ‚Äì FDR inauguracja. "The only thing we have to fear is fear itself". 6 marca ‚Äì Emergency Banking Act. Banki zamkniƒôte 4 dni. Audyt systemu. 9 marca ‚Äì banki otwierajƒÖ, ludzie WK≈ÅADAJƒÑ pieniƒÖdze (nie wycofujƒÖ!). FDIC insurance wchodzi. Prohibition ends. Dolar dewaluuje ‚Äì z≈Çoto $20.67 ‚Üí $35. New Deal starts. Dno POTWIERDZONE.',
              choices:[{text:'Infrastruktura ‚Äì roboty publiczne',effect:'buy_infrastructure'},{text:'Sprzedaj z≈Çoto ‚Äì konfiskata ryzyko',effect:'sell_gold'},{text:'Rolnictwo ‚Äì AAA subsidy',effect:'buy_agriculture'},{text:'Koleje ‚Äì transport recovery',effect:'buy_railroads'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/1/1a/CCC-workers.jpg' }
          ],
          stockPrices:{ 'General Electric':[396,168,134,105,92,85,34,40,58], 'AT&T':[304,197,178,165,152,144,110,120,136], 'US Steel':[262,150,88,72,60,54,22,30,43], 'Z≈Çoto':[20.67,20.67,20.67,20.67,20.67,20.67,20.67,20.67,35.00], 'Coca-Cola':[78,45,56,52,58,62,48,54,67], 'IBM':[211,98,67,58,50,45,78,95,124] }
        },

        '1970s': {
          era:'Lata 1970', name:'Kryzys Naftowy i Stagflacja', desc:'Embargo OPEC, inflacja i recesje. Jak chroniƒá realnƒÖ warto≈õƒá?',
          title:'Inwestor Kryzysu Naftowego',
          subtitle:'Lata 70. to szko≈Ça przetrwania: ceny ropy rosnƒÖ jak szalone, inflacja wysysa si≈Çƒô nabywczƒÖ, a gospodarka zwalnia. Zobaczysz, kto korzysta na drogim paliwie, a kto cierpi ‚Äî i jak my≈õleƒá o ochronie oszczƒôdno≈õci.',
          indexLabel:'S&P 500',
          scenarios:[
            { month:'Sierpie≈Ñ 1971', indexValue:100, title:'Nixon Shock ‚Äì koniec gold standard', description:'15 sierpnia ‚Äì Nixon zamyka "gold window". USA nie wymienia ju≈º dolar√≥w na z≈Çoto. Bretton Woods system collapse. Dolar dewaluowany. Floating currencies begin. Inflacja leci w g√≥rƒô (food +8%, energy +10%). Arthur Burns (Fed) drukuje pieniƒÖdze na Vietnamskie deficit. Z≈Çoto legalnie dostƒôpne dla Amerykan√≥w (od 1974). Commodities boom zaczyna siƒô.',
              choices:[{text:'Z≈Çoto ‚Äì koniec gold standard!',effect:'buy_gold_71'},{text:'Commodities broad ‚Äì inflacja',effect:'buy_commodities_71'},{text:'International diversification',effect:'buy_intl_71'},{text:'Stay US stocks ‚Äì ignore macro',effect:'stay_stocks_71'}]},
            { month:'Pa≈∫dziernik 1973', indexValue:108, title:'Wojna Yom Kippur', description:'OPEC ogranicza wydobycie i eksport. Cena ropy skacze wielokrotnie; na stacjach ustawiajƒÖ siƒô kolejki, a koszt transportu i produkcji ro≈õnie niemal wszƒôdzie. To szok poda≈ºowy: mniej towaru ‚Üí wy≈ºsze ceny. Firmy paliwowe i w≈Ça≈õciciele surowc√≥w zarabiajƒÖ, a linie lotnicze i logistyka dostajƒÖ cios.',
              choices:[{text:'Kup sp√≥≈Çki naftowe',effect:'buy_oil'},{text:'Short na transport',effect:'short_transport'},{text:'Energia alternatywna',effect:'buy_alt_energy'},{text:'Z≈Çoto i towary',effect:'buy_commodities_70s'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/0/0a/Gas_station_line2.jpg' },
            { month:'Marzec 1974', indexValue:95, title:'Kryzys siƒô pog≈Çƒôbia', description:'RzƒÖdy pr√≥bujƒÖ zamra≈ºaƒá ceny, co ko≈Ñczy siƒô niedoborami. Inflacja ro≈õnie, a gospodarka hamuje ‚Äî to ‚Äûstagflacja". Dla inwestora oznacza to, ≈ºe got√≥wka traci si≈Çƒô nabywczƒÖ, a zwyk≈Çe obligacje te≈º nie ratujƒÖ. ZyskujƒÖ biznesy z mocnym ‚Äûpricing power" i infrastruktura energetyczna.',
              choices:[{text:'Infrastruktura energetyczna',effect:'buy_energy_infrastructure'},{text:'Towary podstawowe (staples)',effect:'buy_staples_70s'},{text:'Nieruchomo≈õci',effect:'buy_real_estate_70s'},{text:'Got√≥wka',effect:'hold_cash_70s'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/1/17/Oil_barrel.jpg' },
            { month:'Sierpie≈Ñ 1974', indexValue:72, title:'Rezygnacja Nixona', description:'Kryzys polityczny zwiƒôksza niepewno≈õƒá, a wysokie stopy procentowe obni≈ºajƒÖ wyceny sp√≥≈Çek wzrostowych. Inwestorzy szukajƒÖ przystani w dywidendach i metalach szlachetnych. Kr√≥tka sprzeda≈º sektor√≥w zale≈ºnych od taniego finansowania mo≈ºe dzia≈Çaƒá, ale wymaga dyscypliny.',
              choices:[{text:'Dywidendowe defensywy',effect:'buy_dividends_70s'},{text:'Metale szlachetne',effect:'buy_precious_metals'},{text:'Short growth',effect:'short_growth'},{text:'Rynki miƒôdzynarodowe',effect:'buy_international'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/0/0d/Nixon_Resigns.jpg' },
            { month:'Stycze≈Ñ 1975', indexValue:68, title:'Mocna recesja', description:'Bezrobocie siƒôga szczyt√≥w. Bank centralny zaczyna luzowaƒá politykƒô, ale inflacja nadal wysoka. ‚ÄûJako≈õƒá po przecenie" czƒôsto wygrywa w kolejnych latach. RealnƒÖ warto≈õƒá pomagajƒÖ chroniƒá aktywa rosnƒÖce z inflacjƒÖ (czƒô≈õƒá towar√≥w, nieruchomo≈õci) i obligacje indeksowane inflacjƒÖ.',
              choices:[{text:'Jako≈õƒá po przecenie',effect:'buy_quality_70s'},{text:'Tech efektywno≈õciowy',effect:'buy_efficiency_tech'},{text:'Rolnictwo',effect:'buy_agriculture_70s'},{text:'Inflation-linked',effect:'buy_tips'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/2/2e/Unemployment_line_1970s.jpg' },
            { month:'Lipiec 1976', indexValue:104, title:'Dwustulecie', description:'Gospodarka ≈Çapie oddech. Firmy inwestujƒÖ w oszczƒôdno≈õƒá energii i automatyzacjƒô; do przemys≈Çu wchodzƒÖ mikroprocesory. Innowacje potrafiƒÖ poprawiƒá produktywno≈õƒá nawet w trudnych czasach kosztowych.',
              choices:[{text:'Wczesny tech',effect:'buy_tech_70s'},{text:'Oszczƒôdzanie energii',effect:'buy_conservation'},{text:'Dobra konsumpcyjne',effect:'buy_consumer_disc'},{text:'Zosta≈Ñ w towarach',effect:'stay_commodities'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/5/53/Microprocessor.jpg' },
            { month:'Maj 1977', indexValue:97, title:'Carter i stagflacja w pe≈Çni', description:'Jimmy Carter prezydent (od stycznia). Inflacja 6.5% i ro≈õnie. Unemployment 7%. "Misery Index" (inflacja + unemployment) = 13.5%. Fed s≈Çaby ‚Äì Arthur Burns ustƒôpuje, William Miller (1978) te≈º miƒôkki. Dolar s≈Çabnie. "Malaise" speech (1979). Energy crisis trwa. Z≈Çoto $148 (by≈Ço $35 w 1971). Real assets dominujƒÖ.',
              choices:[{text:'Z≈Çoto i srebro ‚Äì dolar s≈Çaby',effect:'gold_silver_77'},{text:'Energy stocks ‚Äì crisis d≈Çugoterminowy',effect:'energy_77'},{text:'TIPS ‚Äì inflacja double-digit ahead',effect:'tips_77'},{text:'Short dolar ‚Äì currency diversify',effect:'short_dollar_77'}]},
            { month:'Grudzie≈Ñ 1978', indexValue:96, title:'Drugi szok naftowy', description:'Napiƒôcia na Bliskim Wschodzie ponownie ograniczajƒÖ poda≈º ropy. Inflacja rozkrƒôca siƒô, a rynki zaczynajƒÖ dyskontowaƒá ostrzejszƒÖ politykƒô pieniƒô≈ºnƒÖ w kolejnych latach. Premiowane sƒÖ realne aktywa i sp√≥≈Çki surowcowe; sektory wra≈ºliwe na stopy dostajƒÖ po kieszeni.',
              choices:[{text:'Ponownie: sp√≥≈Çki naftowe',effect:'buy_oil_again'},{text:'Mocniej w alternatywƒô',effect:'buy_alt_energy_late'},{text:'Aktywa antyinflacyjne',effect:'buy_inflation_assets'},{text:'Short sektory wra≈ºliwe na stopy',effect:'short_rates'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/9/9a/Oil_platform.jpg' },
            { month:'Sierpie≈Ñ 1979', indexValue:107, title:'Volcker appointment ‚Äì wojna z inflacjƒÖ', description:'6 sierpnia ‚Äì Paul Volcker zostaje Fed Chairman. Inflacja 11.3%. Z≈Çoto $300. Volcker zapowiada: "bƒôdƒô walczy≈Ç z inflacjƒÖ za wszelkƒÖ cenƒô". Stopy p√≥jdƒÖ w g√≥rƒô MOCNO (peak 20% w 1981). Short term b√≥l, long term wygrana. Bonds massacred. Z≈Çoto rally do $850 (stycze≈Ñ 1980). Stocks volatile. Koniec ery stagflacji blisko ‚Äì ale przez b√≥l.',
              choices:[{text:'Obligacje kr√≥tkoterminowe ‚Äì rates spike',effect:'short_bonds_79'},{text:'Z≈Çoto parabolic ‚Äì $850 coming',effect:'gold_parabolic_79'},{text:'Defensive stocks ‚Äì recession ahead',effect:'defensive_79'},{text:'Bet on Volcker ‚Äì buy quality',effect:'quality_volcker_79'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/9/9a/Oil_platform.jpg' }
          ],
          stockPrices:{ 'Exxon Mobil':[45,52,71,84,78,89,92,96,110], 'Texaco':[25,28,42,38,35,47,50,52,58], 'Ford':[70,65,41,38,33,42,40,39,38], 'Z≈Çoto':[40,97,154,161,140,125,148,208,300], 'IBM':[360,341,246,238,264,287,310,354,340], "McDonald's":[85,77,52,49,58,71,78,86,90] }
        },

        '1990s': {
          era:'Lata 1990', name:'Azja, LTCM i euforia', desc:'Od recesji 1990‚Äì91 do bƒÖbla internetowego.',
          title:'Inwestor Lata 90.',
          subtitle:'Od ‚Äûflight to quality" po ‚Äûdon\'t fight the Fed": jak rynki reagujƒÖ na kryzysy i euforie.',
          indexLabel:'S&P 500',
          scenarios:[
            { month:'Listopad 1990', indexValue:324, title:'Recesja - S&L crisis i Gulf War', description:'Savings & Loan crisis - 700+ bank√≥w upad≈Ço. $160B bailout. Recesja oficjalna. Fed obni≈ºa stopy z 8% do 6%. Napiƒôcia Gulf War - Saddam Hussein okupuje Kuwejt. Oil spike. Consumer confidence crash. Bush: "read my lips, no new taxes" - ale podnosi podatki. Defensywa i obligacje bezpieczne.',
              choices:[{text:'Defensywa + dywidendy',effect:'buy_def_90'},{text:'Cash - czekaj na clarity',effect:'hold_cash_90'},{text:'Treasuries - safe haven',effect:'buy_bonds_90'},{text:'Tech - PC boom nadchodzi',effect:'buy_pc_90'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/3/3d/Personal_computers_1990s.jpg' },
            { month:'Marzec 1991', indexValue:375, title:'Gulf War victory - odbicie', description:'17 stycznia - Operation Desert Storm. 100 godzin ground war, zwyciƒôstwo USA. Oil ceny spadajƒÖ. Recesja ko≈Ñczy siƒô (officially marzec 1991). Fed stopy 6% ‚Üí 5.5%. "Peace dividend" - defense spending mo≈ºe spa≈õƒá. PC sales boom - Windows 3.0. Soft landing begins. Bear market over.',
              choices:[{text:'Buy cyclicals - recovery play',effect:'buy_cyclicals_91'},{text:'Tech momentum - MSFT, Intel',effect:'buy_tech_91'},{text:'Stay defensive - too early',effect:'stay_defensive_91'},{text:'International - Europe growth',effect:'buy_international_91'}]},
            { month:'Luty 1994', indexValue:470, title:'Fed tightening - bond massacre', description:'4 lutego - Fed podnosi stopy pierwszy raz od 1989. 3% ‚Üí 6% w rok. "Bond massacre" - obligacje -10% w miesiƒÖce. Orange County bankrut ($1.6B na derivatives). Mexico peso crisis (Tequila crisis). Greenspan aggressive. Growth stocks hit. Value outperforms. Reality check po 3 latach hossy.',
              choices:[{text:'Rotate to value - growth hit',effect:'rotate_value_94'},{text:'Short bonds - wiƒôcej podwy≈ºek',effect:'short_bonds_94'},{text:'Emerging markets - cheap',effect:'buy_em_94'},{text:'Hold tech - long term story',effect:'hold_tech_94'}]},
            { month:'Lipiec 1995', indexValue:560, title:'Soft landing - Goldilocks economy', description:'Fed ko≈Ñczy cycle - stopy 6%, potem cuts. Inflacja pod kontrolƒÖ 2-3%. Productivity boom - internet, PC, globalizacja. Netscape IPO (sierpie≈Ñ) - internet hype starts. Passive investing boom - Vanguard index funds. Clinton balanced budget. "New economy" narracja. S&P +30% YTD. Perfect setup.',
              choices:[{text:'Passive index - Goldilocks',effect:'buy_index_95'},{text:'Small-cap value - cheap',effect:'buy_scv_95'},{text:'Telecom infrastructure',effect:'buy_telco_95'},{text:'Stay defensive - overheated?',effect:'stay_def_95'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/6/6d/NYSE_trading_floor.jpg' },
            { month:'Lipiec 1996', indexValue:670, title:'Greenspan "irrational exuberance"', description:'5 grudnia 1996 - Greenspan speech: "irrational exuberance?" - ale rynek ignoruje. Dow 6000+ pierwszy raz. Tech boom accelerates. AOL, Yahoo, Amazon IPOs. Capital gains tax cut 28% ‚Üí 20%. Inflation low. Unemployment 5.4%. Microsoft $85B market cap. Bull market in full swing.',
              choices:[{text:'All-in tech - new economy real',effect:'allin_tech_96'},{text:'Heed Greenspan - take profits',effect:'heed_greenspan_96'},{text:'Balanced approach - rebalance',effect:'balanced_96'},{text:'International diversification',effect:'international_96'}]},
            { month:'Pa≈∫dziernik 1997', indexValue:950, title:'Asian Financial Crisis', description:'2 lipca - Thailand baht collapse. Contagion spreads: Indonesia, Korea, Malaysia. "Asian Tigers" crash. Hong Kong stocks -40%. 27 pa≈∫dziernika - Dow -554 (-7.2%) w dzie≈Ñ. IMF bailouts. Russia/Brazil next? Flight to quality. But USA strong - "decoupling". Fed cuts 0.25%. Crisis = buying opportunity.',
              choices:[{text:'Buy USA dip - decoupling',effect:'buy_dip_97'},{text:'Flight to Treasuries',effect:'bonds_97'},{text:'Short emerging markets',effect:'short_em_97'},{text:'Gold safe haven',effect:'gold_97'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/7/7b/Bangkok_skyline_1997.jpg' },
            { month:'Sierpie≈Ñ 1998', indexValue:1085, title:'Russia default + LTCM implodes', description:'17 sierpnia - Russia defaults on debt. Ruble collapses. Long-Term Capital Management (LTCM) - leverage 25:1 - loses $4.6B. Nobel Prize winners on board. Fed organizes $3.6B bailout (14 banks). Contagion fear. Brazil wobbles. Flight to quality. Greenspan cuts stopy 3x. "Don\'t fight the Fed" lesson.',
              choices:[{text:'Buy after Fed rescue',effect:'buy_after_fed_98'},{text:'Cash - more shoes to drop',effect:'hold_98'},{text:'Short leverage/hedge funds',effect:'short_fin_98'},{text:'Tech momentum - survivors',effect:'buy_momo_98'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/4/49/Alan_Greenspan.jpg' },
            { month:'Maj 1999', indexValue:1340, title:'Tech mania acceleration', description:'Dow 10,000+ pierwszy raz (29 marca). Nasdaq +40% YTD. Internet IPOs co tydzie≈Ñ. Day trading boom. AOL buys Netscape $4.2B. "Eyeballs" metrics. P/E ratios irrelevant. Y2K spending boom. Fed stopy 4.75%. Greenspan concerned ale nie chce burst bubble. FOMO maximum. Top blisko.',
              choices:[{text:'Join mania - FOMO trade',effect:'join_mania_99'},{text:'Quality tech only - MSFT, CSCO',effect:'quality_tech_99'},{text:'Rotate out - bubble obvious',effect:'rotate_out_99'},{text:'Hedge with puts',effect:'hedge_puts_99'}]},
            { month:'Grudzie≈Ñ 1999', indexValue:1469, title:'Y2K peak - millennium euphoria', description:'31 grudnia - Y2K bug fears (turned out nothing). Nasdaq 4000+ (+86% YTD!). S&P 500 +21%. Best decade ever. Internet "changes everything". Pets.com, eToys public. Valuations absurd. Fed stopy 5.5%. Greenspan podwy≈ºki coming. Clinton impeachment over. Dotcom bubble peak ahead (marzec 2000). Party ending soon.',
              choices:[{text:'All-in dotcoms - ride it',effect:'allin_dotcom_99'},{text:'Rotate to value - bubble',effect:'rot_value_99'},{text:'Rebalance 60/40 discipline',effect:'rebal_99'},{text:'Short crazy valuations',effect:'short_hyper_99'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/2/2b/Nasdaq_screen_times_square.jpg' }
          ],
          stockPrices:{ 'S&P 500':[324,375,470,560,670,950,1085,1340,1469], 'Microsoft':[0.9,1.2,1.8,2.4,3.5,4.6,5.2,7.0,8.9], 'Cisco':[0.4,0.6,1.0,1.6,2.2,3.1,4.2,6.0,7.7], 'General Electric':[1.2,1.3,1.5,1.7,1.9,2.2,2.4,2.6,2.8], 'Intel':[1.8,2.2,2.8,3.8,5.2,7.0,8.5,11.0,14.5], 'Amazon':[0,0,0,1.7,3.0,10.0,52.0,75.0,75.0], 'Yahoo':[0,0,0,0,0,18.0,108.0,300.0,475.0], 'AOL':[2.5,3.0,4.5,6.0,12.0,24.0,38.0,68.0,95.0], 'US 10Y Treasury':[100,99,98,103,105,106,104,101,98], 'Gold':[380,360,385,385,390,325,290,290,290] }
        },

        'DotCom': {
          era:'2000‚Äì2002', name:'Ba≈Ñka Dot-com', desc:'Euforia internetowa i bolesne otrze≈∫wienie.',
          title:'Inwestor ery dot-com',
          subtitle:'Zobacz, jak narracja ‚Äûnowej ekonomii" zderzy≈Ça siƒô z brakiem zysk√≥w ‚Äî i kto przetrwa≈Ç.',
          indexLabel:'NASDAQ',
          scenarios:[
            { month:'Sierpie≈Ñ 1998', indexValue:1499, title:'Netscape i poczƒÖtek manii', description:'Netscape IPO (1995) pokaza≈Ço ≈ºe internet = pieniƒÖdze. Amazon, Yahoo, eBay ju≈º publiczne. AOL ma 14M subscribers. "Eyeballs" wa≈ºniejsze ni≈º revenue. Venture capital leje siƒô do ka≈ºdego startupu z ".com" w nazwie. Fed obni≈ºa stopy po LTCM. Greenspan: "irrational exuberance"... ale rynek ignoruje.',
              choices:[{text:'All-in internet stocks',effect:'allin_dotcom_98'},{text:'Blue chips tech - MSFT, Intel, Cisco',effect:'buy_bluechip_tech_98'},{text:'Value stocks - za tanie teraz',effect:'buy_value_98'},{text:'Bonds - ba≈Ñka siƒô ko≈Ñczy',effect:'bonds_caution_98'}]},
            { month:'Stycze≈Ñ 1999', indexValue:2506, title:'Y2K paranoia i IPO mania', description:'Y2K bug fear ‚Äì firmy wydajƒÖ miliardy na IT upgrade. IPO co tydzie≈Ñ: ka≈ºdy internet startup wychodzi na gie≈Çdƒô po 6 miesiƒôcach. Pets.com, eToys, Webvan ‚Äì wyceny miliardowe bez zysk√≥w. Day trading boom. CNBC non-stop. "This time is different" ‚Äì nowa ekonomia, internet zmieni wszystko.',
              choices:[{text:'Flip IPOs - kupuj i sprzedaj w dzie≈Ñ',effect:'flip_ipos_99'},{text:'Quality growth - Amazon, eBay',effect:'quality_growth_99'},{text:'Old economy - Walmart, GE',effect:'old_economy_99'},{text:'Cash out - to szale≈Ñstwo',effect:'cash_out_99'}]},
            { month:'Marzec 2000', indexValue:5048, title:'SZCZYT - peak euphoria', description:'10 marca - Nasdaq 5048 ATH. P/E ratios 100+. Pets.com Super Bowl ad $2M. Companies add ".com" to name = instant +50%. "Burn rate" acceptable - growth at all costs. Greenspan podnosi stopy (6.5%). Microsoft antitrust case. Ale... FOMO maximum. "Get in or miss out forever".',
              choices:[{text:'FOMO - kup ka≈ºdy IPO teraz',effect:'buy_ipos_00'},{text:'Rotate to quality - MSFT profitable',effect:'rot_quality_00'},{text:'Massive rebalance to value',effect:'rot_value_00'},{text:'Short crazy valuations',effect:'short_extreme_00'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/2/2b/Nasdaq_screen_times_square.jpg' },
            { month:'Kwiecie≈Ñ 2000', indexValue:3860, title:'Pierwsze pƒôkniƒôcie', description:'14 kwietnia - Nasdaq -9% w jeden dzie≈Ñ. Fed aggressive tightening dzia≈Ça. Tech spending cycle turns. Profit warnings od Intel, Cisco. Margin calls. IPO window zamyka siƒô. Pets.com withdraw IPO. Ale wiƒôkszo≈õƒá my≈õli "just correction, buy the dip". Reality: ba≈Ñka pƒôka.',
              choices:[{text:'Buy the dip - to korekta',effect:'buy_dip_dotcom_00'},{text:'Sell unprofitable - keep winners',effect:'sell_unprofitable_00'},{text:'Rotate defensywa',effect:'rotate_defensive_00'},{text:'Short index - to dopiero poczƒÖtek',effect:'short_nasdaq_00'}]},
            { month:'Listopad 2000', indexValue:3000, title:'Kapitulacja - funding dries up', description:'Nasdaq -40% od szczytu. Wiƒôkszo≈õƒá dot-com√≥w bez cash runway. VC funding zamro≈ºone. Layoffs start. Amazon -80%, Yahoo -70%. Tylko profitable survive. "Eyeballs" nie p≈ÇacƒÖ rachunk√≥w. Pets.com liquidates (9 miesiƒôcy od IPO). Reality check brutal.',
              choices:[{text:'Hold and pray - ‚Äûlong term"',effect:'hold_bag_00'},{text:'Cash - kapita≈Ç zachowaj',effect:'move_cash_00'},{text:'Only profitable - MSFT, eBay',effect:'buy_prof_00'},{text:'Hedge/short junk',effect:'hedge_00'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/9/98/Internet_bubble_chart.png' },
            { month:'Czerwiec 2001', indexValue:2160, title:'Bankrupty wave', description:'Dot-coms bankrutujƒÖ masowo: eToys, Webvan, Boo.com. 200+ internet companies gone. Nasdaq -60% od ATH. Telecom bubble te≈º pƒôka - WorldCom, Global Crossing w k≈Çopotach. Unemployment ro≈õnie. Fed obni≈ºa stopy agresywnie (z 6.5% do 3.5%). Ale bear market trwa.',
              choices:[{text:'Tech bounce play - oversold?',effect:'tech_bounce_01'},{text:'Telecom value - infrastructure',effect:'telecom_value_01'},{text:'Safe haven - bonds, gold',effect:'safe_haven_01'},{text:'International diversification',effect:'international_01'}]},
            { month:'Wrzesie≈Ñ 2001', indexValue:1423, title:'9/11 SZOK', description:'11 wrze≈õnia - zamachy na WTC. Markets closed 4 dni (longest since 1933). Reopening: -7% w dzie≈Ñ. Travel/airlines decimated. Ad spending collapse. Recession official. Fed emergency cuts (3% ‚Üí 1.75%). Patriot Act. War on Terror. Tech advertising dies. Dark times.',
              choices:[{text:'Defense stocks - Lockheed, Raytheon',effect:'buy_defense_01'},{text:'Short airlines/travel',effect:'short_travel_01'},{text:'Cash - uncertainty max',effect:'hold_cash_01'},{text:'Quality tech survivors',effect:'buy_quality_01'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/5/5c/NYC_9-11_WTC.jpg' },
            { month:'Lipiec 2002', indexValue:1328, title:'WorldCom i Enron skandale', description:'WorldCom bankrutuje ($104B - biggest ever). Enron scandal (cooking books). Arthur Andersen dissolves. Tyco, Adelphia frauds exposed. Sarbanes-Oxley Act passed. Trust w corporate America destroyed. Nasdaq -78% od ATH. "Stocks for long run?" questioned.',
              choices:[{text:'Capitulation sell - koniec systemu',effect:'capitulate_02'},{text:'Quality blue chips only',effect:'bluechips_only_02'},{text:'Value/cashflow focus',effect:'value_cashflow_02'},{text:'Bonds - equity risk premium gone',effect:'bonds_only_02'}]},
            { month:'Pa≈∫dziernik 2002', indexValue:1114, title:'DNO - survivors emerge', description:'9 pa≈∫dziernika - Nasdaq 1114 dno (-78% od ATH). 5000+ dot-coms bankrutowa≈Çy. Zostali winners: Amazon, eBay, Google (private jeszcze), Salesforce. P/E ratios normalne. Valuations reasonable. Fed 1.25% stopy. Contrarian buyers nagrodzeni. Quality + cashflow wins long term.',
              choices:[{text:'All-in survivors - AMZN, EBAY, MSFT',effect:'buy_leaders_02'},{text:'Value rotation - cashflow matters',effect:'buy_value_02'},{text:'Bonds - rally was fake head',effect:'stay_bonds_02'},{text:'Penny stocks gambling',effect:'penny_02'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/6/6b/NASDAQ_MarketSite.jpg' }
          ],
          stockPrices:{ 'NASDAQ':[1499,2506,5048,3860,3000,2160,1423,1328,1114], 'Cisco':[20,50,77,60,50,18,15,12,13], 'Amazon':[52,75,75,55,36,15,6,8,15], 'Pets.com':[11,14,14,4,0,0,0,0,0], 'Microsoft':[42,58,58,52,34,28,24,22,26], 'Intel':[28,45,74,58,36,28,24,18,16], 'Yahoo':[108,475,475,120,36,15,10,8,12], 'eToys':[78,78,78,8,0,0,0,0,0], 'WorldCom':[64,64,64,40,18,12,8,0.1,0], 'US 10Y Treasury':[98,99,98,100,101,106,108,108,106] }
        },

        'BlackMonday': {
          era:'1987', name:'Black Monday', desc:'Najwiƒôkszy jednodniowy krach w historii. Dow Jones -22.6% w jeden dzie≈Ñ!',
          title:'Inwestor Black Monday',
          subtitle:'19 pa≈∫dziernika 1987 ‚Äì najczarniejszy poniedzia≈Çek w historii Wall Street. Portfolio insurance i panika wywo≈Ça≈Çy lawinƒô.',
          indexLabel:'Dow Jones',
          scenarios:[
            { month:'Stycze≈Ñ 1987', indexValue:2158, title:'Reagan Bull Market w pe≈Çni', description:'Rynek byka od 1982 ‚Äì Dow +230%! Reagan tax cuts, deregulation, falling interest rates. Fed Chair Paul Volcker pokona≈Ç inflacjƒô. "Greed is good" ‚Äì Wall Street culture. Portfolio insurance nowa zabawka ‚Äì algorytmiczne hedging. Wyceny wysokie (P/E 20+), ale momentum silne. "This time is different?"',
              choices:[{text:'Stay fully invested ‚Äì hossa trwa',effect:'stay_invested_87'},{text:'Take profits ‚Äì wyceny wysokie',effect:'take_profits_early_87'},{text:'Buy puts jako insurance',effect:'buy_insurance_87'},{text:'Leverage long ‚Äì FOMO trade',effect:'leverage_long_87'}]},
            { month:'Kwiecie≈Ñ 1987', indexValue:2405, title:'Volcker out, Greenspan in', description:'Paul Volcker rezygnuje z Fed (June 1987 incoming). Alan Greenspan nastƒôpcƒÖ ‚Äì rynki niepewne jak zareaguje. Dollar s≈Çabnie. Trade deficit USA ro≈õnie. Louvre Accord (luty) ‚Äì G7 pr√≥buje stabilizowaƒá waluty. Stopy procentowe zaczynajƒÖ rosnƒÖƒá (inflation fears). First cracks?',
              choices:[{text:'Bet on Greenspan dovish ‚Äì buy',effect:'bet_greenspan_87'},{text:'Hedge dollar weakness ‚Äì gold/intl',effect:'hedge_dollar_87'},{text:'Reduce exposure ‚Äì rates rising',effect:'reduce_exposure_87'},{text:'Bonds over stocks ‚Äì caution',effect:'bonds_caution_87'}]},
            { month:'Sierpie≈Ñ 1987', indexValue:2722, title:'Szczyt hossy ‚Äì ATH', description:'Dow Jones 2722 ATH (25 sierpnia). +40% YTD! Rynek przegrzany. Portfolio insurance popularno≈õƒá max ‚Äì $90B assets. Program trading dominuje (computerized). Fed podnosi stopy ‚Äì 10Y Treasury 9.5%. Iran-Contra hearings. Analitycy ostrzegajƒÖ: valuations stretched, liquidity concerns.',
              choices:[{text:'Zosta≈Ñ w indeksie ‚Äì momentum',effect:'stay_bull_87'},{text:'Zabezpiecz opcjami put',effect:'buy_puts_87'},{text:'Rotacja do obligacji',effect:'rotate_bonds_87'},{text:'Short przez futures',effect:'short_fut_87'}]},
            { month:'Wrzesie≈Ñ 1987', indexValue:2596, title:'Pierwsze pƒôkniƒôcia', description:'Dow spad≈Ç -8% od ATH. Stopy dalej w g√≥rƒô (Fed fighting inflation). Dollar s≈Çaby. Trade deficit $15B/month. Program trading triggers sell signals. Portfolio insurance zaczyna aktywowaƒá. Volatility ro≈õnie. Media: "correction overdue". Nervous market.',
              choices:[{text:'Buy the dip ‚Äì correction normalna',effect:'buy_dip_sept_87'},{text:'Increase hedges ‚Äì worse coming',effect:'increase_hedges_87'},{text:'Move to cash ‚Äì wait clarity',effect:'move_cash_87'},{text:'Short aggressively',effect:'short_aggressive_87'}]},
            { month:'16 Pa≈∫dziernik 1987', indexValue:2246, title:'PiƒÖtek przed krachem', description:'Dow -108 punkt√≥w w piƒÖtek (-5%). Portfolio insurance triggers massively. Program trading sell orders flood market. Trading systems overwhelmed. Weekend: media hype fear. "Meltdown Monday?" Brokers work weekend. Margin calls coming. Panic building.',
              choices:[{text:'Sprzedaj wszystko przed weekendem',effect:'sell_friday_87'},{text:'Kup spadki ‚Äì oversold',effect:'buy_dip_87'},{text:'Zostaw portfel ‚Äì to korekta',effect:'hold_87'},{text:'Hedge dodatkowymi puts',effect:'more_puts_87'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/1/19/Crowd_outside_nyse.jpg' },
            { month:'19 Pa≈∫dziernik 1987', indexValue:1738, title:'BLACK MONDAY - KRACH', description:'Dow Jones -508 punkt√≥w (-22.6%) w JEDEN DZIE≈É! Biggest drop EVER. Portfolio insurance death spiral ‚Äì sell triggers more selling. NYSE systems crash. Phone lines jammed. Brokers can\'t execute. S&P futures -29%. Hong Kong closed entire week. Pure panic. "End of world?"',
              choices:[{text:'PANIKA ‚Äì sprzedaj wszystko!',effect:'panic_sell_87'},{text:'Kup dno ‚Äì historyczna okazja',effect:'buy_crash_87'},{text:'Czekaj na stabilizacjƒô',effect:'wait_stable_87'},{text:'Short dalej ‚Äì depression coming',effect:'short_more_87'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/1/19/Crowd_outside_nyse.jpg' },
            { month:'20 Pa≈∫dziernik 1987', indexValue:1841, title:'Wtorek ‚Äì kontynuacja paniki?', description:'Terrible Tuesday ‚Äì rynek otwiera w chaosie. Dow -200 w pierwszej godzinie. Fed announces: "will provide liquidity". Greenspan first crisis. Major firms (Goldman, Salomon) step in ‚Äì buy aggressively. Rynek ODWRACA +102 (+5.9%)! Biggest point gain ever. Relief rally begins.',
              choices:[{text:'Sell rally ‚Äì dead cat bounce',effect:'sell_rally_87'},{text:'Fed put works ‚Äì buy now!',effect:'buy_fed_put_87'},{text:'Wait for confirmation',effect:'wait_confirm_87'},{text:'Double down on shorts',effect:'double_short_87'}]},
            { month:'Grudzie≈Ñ 1987', indexValue:1938, title:'Odbicie po szoku', description:'Dow +11% od do≈Çka. Fed obni≈ºa stopy 7.5% ‚Üí 6.5%. Greenspan "whatever it takes". Gospodarka OK ‚Äì no recession! Portfolio insurance blamed, regulacje coming (circuit breakers). Krach by≈Ç techniczny, nie fundamentalny. Quality stocks recover fastest. Lesson: don\'t panic sell.',
              choices:[{text:'Kup quality blue chips',effect:'buy_quality_87'},{text:'Zwiƒôksz ekspozycjƒô na tech',effect:'buy_tech_87'},{text:'Pozosta≈Ñ w defensywach',effect:'stay_def_87'},{text:'Zachowaj got√≥wkƒô ‚Äì czekaj',effect:'keep_cash_87'}]},
            { month:'Stycze≈Ñ 1988', indexValue:1958, title:'Nowa normalno≈õƒá', description:'3 miesiƒÖce po krachu. Dow odrobi≈Ç po≈Çowƒô strat. Economy silna ‚Äì GDP +3.8%, unemployment 5.7%. Circuit breakers introduced. Portfolio insurance dead. Lessons learned: liquidity matters, Fed put exists, fundamentals > technicals long term. Bull market resumed (do 2000).',
              choices:[{text:'All-in recovery ‚Äì bull back',effect:'allin_recovery_88'},{text:'Gradual re-entry ‚Äì DCA approach',effect:'gradual_entry_88'},{text:'Defensive positioning still',effect:'defensive_88'},{text:'Wait for better entry',effect:'wait_better_88'}]}
          ],
          stockPrices:{ 'IBM':[145,150,157,140,132,103,108,120,125], 'Microsoft':[1.9,2.0,2.1,1.9,1.8,1.4,1.5,1.6,1.7], 'GE':[48,50,52,47,43,33,36,39,41], 'Z≈Çoto':[445,450,460,462,465,480,478,485,480], 'Bonds':[98,99,100,101,102,108,107,106,104] }
        },

        'GFC2008': {
          era:'2008‚Äì2009', name:'Wielki Kryzys Finansowy', desc:'Ba≈Ñka kredytowa, Lehman, QE i dno 2009.',
          title:'Inwestor 2008',
          subtitle:'Od ‚Äûto lokalne" do globalnej paniki: jak dzia≈Ça≈Ça d≈∫wignia, p≈Çynno≈õƒá i interwencje.',
          indexLabel:'S&P 500',
          scenarios:[
            { month:'Sierpie≈Ñ 2007', indexValue:1455, title:'BNP Paribas freeze ‚Äì subprime pƒôka', description:'9 sierpnia ‚Äì BNP Paribas zamra≈ºa 3 fundusze z ekspozycjƒÖ na subprime. Pierwszy sygna≈Ç ≈ºe CDOs i MBS sƒÖ toksyczne. LIBOR spike. Homebuilders w ruinie (Countrywide, New Century bankrutujƒÖ). Fed obni≈ºa stopy. Wiƒôkszo≈õƒá inwestor√≥w: ‚Äûto lokalne, housing bubble deflating". Ale... CDO exposure wszƒôdzie.',
              choices:[{text:'Short homebuilders/financials',effect:'short_mbs_07'},{text:'Rotate to quality stocks',effect:'move_quality_07'},{text:'Ignoruj ‚Äì ‚Äûlokalne, contained"',effect:'ignore_07'},{text:'Buy gold ‚Äì safe haven',effect:'gold_07'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/8/8b/Subprime_Mortgage_Crisis_2007.png' },
            { month:'Stycze≈Ñ 2008', indexValue:1378, title:'Recesja zaczyna siƒô', description:'Unemployment ro≈õnie. Consumer spending s≈Çabnie. Banks piszƒÖ write-downs na MBS (Citi $18B, Merrill $15B). Monoline insurers (MBIA, Ambac) ‚Äì kt√≥rzy ubezpieczali CDO ‚Äì tracƒÖ AAA rating. Fed emergency cut -0.75%. Stimulus checks ($600). Bear Stearns hedge funds implodujƒÖ. Market volatility spike.',
              choices:[{text:'Sell everything ‚Äì recession coming',effect:'sell_recession_08'},{text:'Buy the dip ‚Äì Fed cuts helping',effect:'buy_dip_recession'},{text:'Defensive rotation ‚Äì staples, utilities',effect:'rotate_defensive_08'},{text:'International diversification',effect:'diversify_international_08'}]},
            { month:'Marzec 2008', indexValue:1276, title:'Bear Stearns IMPLODUJE', description:'14 marca ‚Äì Bear Stearns run. Leverage 35:1. Counterparty risk. 16 marca ‚Äì Fed organizuje emergency sale do JPMorgan za $2/share (by≈Ço $170 rok temu). Fed otwiera discount window dla investment banks. ‚ÄûMoral hazard" debate. Pytanie: kto nastƒôpny? Lehman? Merrill?',
              choices:[{text:'Buy banks ‚Äì ‚Äûblood in streets"',effect:'buy_banks_08'},{text:'Short investment banks',effect:'short_fin_08'},{text:'Cash is king ‚Äì flight to safety',effect:'cash_08'},{text:'Defensywa ‚Äì healthcare, staples',effect:'def_08'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/4/46/Bear_Stearns_Headquarters.jpg' },
            { month:'Lipiec 2008', indexValue:1267, title:'Fannie i Freddie ‚Äì quasi-bankrut', description:'Fannie Mae i Freddie Mac ‚Äì GSEs z $5T mortgage exposure ‚Äì tracƒÖ 90% warto≈õci. Treasury musi je ratowaƒá. IndyMac Bank (9th largest thrift) bankrutuje ‚Äì biggest bank failure since S&L crisis. Oil $147 (rekord). Inflation + recession = stagflacja? Bear market rally ju≈º siƒô sko≈Ñczy≈Ç.',
              choices:[{text:'Short regional banks',effect:'short_regional_banks'},{text:'Energy play ‚Äì oil $150+ coming?',effect:'buy_energy_08'},{text:'Treasury bonds ‚Äì ultimate safety',effect:'treasuries_08'},{text:'Emerging markets ‚Äì decoupling myth',effect:'buy_em_08'}]},
            { month:'Wrzesie≈Ñ 2008', indexValue:1204, title:'LEHMAN BANKRUTUJE ‚Äì blackout', description:'15 wrze≈õnia ‚Äì Lehman Brothers bankrutuje. $600B assets. Counterparty chains rozpadajƒÖ siƒô. Money market funds ‚Äûbreak the buck". Commercial paper market zamro≈ºony. Credit default swaps explode. Merrill sprzedany do BofA. AIG bliski upadku (CDS exposure $500B) ‚Äì Fed bailout $85B. Washington Mutual bankrutuje. CHAOS.',
              choices:[{text:'PANIKA sell ‚Äì koniec systemu',effect:'panic_sell_gfc'},{text:'Buy gold/treasuries ‚Äì flight to quality',effect:'safe_haven_08'},{text:'Short cyclicals/financials',effect:'short_cyc_08'},{text:'Cash + wait for government action',effect:'stay_cash_08'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/5/5a/Lehman_Brothers_Times_Square_by_David_Shankbone.jpg' },
            { month:'Pa≈∫dziernik 2008', indexValue:968, title:'TARP i globalna panika', description:'3 pa≈∫dziernika ‚Äì Congress passes TARP ($700B bailout). Ale rynek dalej spada ‚Äì trust zniknƒÖ≈Ç. Iceland banks bankrutujƒÖ. European banks (Fortis, Dexia) bailouts. VIX 80. S&P -40% YTD. Madoff scandal. GM/Chrysler/Ford b≈ÇagajƒÖ o bailout. ‚ÄûGreat Depression 2.0" w nag≈Ç√≥wkach. Unemployment 6.5% i ro≈õnie.',
              choices:[{text:'Capitulation ‚Äì sprzedaj wszystko',effect:'capitulate_oct08'},{text:'Buy index ‚Äì max pessimism = dno?',effect:'buy_index_oct08'},{text:'Gold + commodities collapse hedge',effect:'gold_commodities_08'},{text:'Wait for clarity',effect:'wait_clarity_08'}]},
            { month:'Grudzie≈Ñ 2008', indexValue:903, title:'Fed stopy 0% ‚Äì Citi bailout', description:'16 grudnia ‚Äì Fed obni≈ºa stopy do 0-0.25% (ZIRP). Pierwsza QE zapowiedziana. Citigroup dostaje $45B bailout + $300B gwarancji. Auto bailout ‚Äì GM i Chrysler dostanƒÖ $17B. Bernie Madoff aresztowany ($65B Ponzi). S&P 500 najgorszy rok od 1931. Wszyscy czekajƒÖ na Obamƒô (inauguracja stycznia).',
              choices:[{text:'Buy the fear ‚Äì max capitulation',effect:'buy_fear_dec08'},{text:'Quality dividend stocks',effect:'quality_dividend_08'},{text:'Bonds ‚Äì deflation risk real',effect:'bonds_deflation_08'},{text:'International ‚Äì US toxic',effect:'international_dec08'}]},
            { month:'Luty 2009', indexValue:735, title:'Obama stimulus ‚Äì ale dno jeszcze nie', description:'17 lutego ‚Äì Obama podpisuje $787B stimulus (ARRA). Biggest since New Deal. Bank stress tests announced. Citi trading <$1. Nationalization fears. Housing prices still falling. Unemployment 8.3%. Market testing new lows. Geithner (Treasury) plan unclear. Fear peak.',
              choices:[{text:'This is the bottom ‚Äì all-in',effect:'allin_feb09'},{text:'Wait for stress test results',effect:'wait_stress_tests'},{text:'Dividend aristocrats',effect:'dividend_aristocrats_09'},{text:'Stay defensive',effect:'stay_defensive_09'}]},
            { month:'Marzec 2009', indexValue:676, title:'DNO ‚Äì QE1 i turn', description:'9 marca ‚Äì S&P 500 dno 666 (-57% od szczytu). Bank stress tests show banks need capital but survivable. 18 marca ‚Äì Fed announces QE1 ($1.75T). Citigroup profitable in Q1. Mark-to-market accounting relaxed. Technical turn. Contrarian buyers nagrodzeni. Quality + financials skaczƒÖ. Begin of 11-year bull market.',
              choices:[{text:'All-in ‚Äì legendary bottom',effect:'allin_09'},{text:'Buy financials + value',effect:'buy_value_09'},{text:'Stay in bonds ‚Äì rally fake',effect:'stay_bonds_09'},{text:'Wait for confirmation',effect:'wait_09'}],
              image:'https://upload.wikimedia.org/wikipedia/commons/5/5c/Federal_Reserve_Building.jpg' }
          ],
          stockPrices:{ 'S&P 500 (SPY)':[145,138,128,127,120,97,90,73,70], 'Goldman Sachs (GS)':[220,195,125,180,115,65,55,60,85], 'Citigroup (C)':[47,30,22,18,15,7,4,2,3], 'JPMorgan (JPM)':[47,42,40,38,35,30,22,18,25], 'Caterpillar (CAT)':[80,75,72,65,55,40,32,28,35], 'Gold':[670,750,920,950,890,820,850,920,950], 'US 10Y Treasury':[99,102,104,103,105,109,110,112,108], 'Ford (F)':[8,6,4,5,3,2,1.5,1.8,3], 'Home Depot (HD)':[38,32,28,26,23,18,16,18,24] }
        },

        'COVID2020': {
          era:'2020', name:'Kryzys COVID-19', desc:'Pandemia, lockdowny, QE infinity i najszybsze odbicie w historii.',
          title:'Inwestor pandemii COVID-19',
          subtitle:'Od panicznej wyprzeda≈ºy po najszybsze odbicie w historii. Technologia kontra turystyka. Praca zdalna zmienia ≈õwiat.',
          indexLabel:'S&P 500',
          scenarios:[
            { month:'Stycze≈Ñ 2020', indexValue:3280, title:'Wuhan lockdown ‚Äì nikt nie wierzy', description:'31 grudnia 2019 ‚Äì WHO dostaje raporty o ‚Äûpneumonii nieznanego pochodzenia" w Wuhan. 23 stycznia ‚Äì Chiny ZAMYKAJƒÑ Wuhan (11M ludzi). Rynki ignorujƒÖ ‚Äì ‚Äûto Chiny, nie dotrze tu". S&P 500 na ATH. Eksperci: ‚Äûgrypa zabija wiƒôcej". Ale... eksport z Chin zaczyna siƒô zatykaƒá.',
              choices:[{text:'Ignoruj ‚Äì lokalny problem Chin',effect:'ignore_wuhan'},{text:'Hedge ‚Äì kup VIX calls/puts',effect:'buy_vix_hedge_covid'},{text:'Short cruise lines profilaktycznie',effect:'short_cruises_early'},{text:'Rotacja do tech ‚Äì stay home trend',effect:'rotate_tech_jan'}]},
            { month:'Luty 2020', indexValue:3386, title:'Pierwsze alarmy ‚Äì ‚Äûto tylko grypa"', description:'WHO og≈Çasza pandemiƒô (11 lutego). W≈Çochy wprowadzajƒÖ lockdown (21 lutego). Diamond Princess cruise ship ‚Äì 700 zara≈ºonych. Pierwsze przypadki w USA (Seattle). Rynki zaczynajƒÖ siƒô denerwowaƒá, ale wiƒôkszo≈õƒá wierzy w V-shaped recovery. Fed \"monitoruje sytuacjƒô\". Trump: \"15 przypadk√≥w, nied≈Çugo bƒôdzie zero\".',
              choices:[{text:'Nadal ignoruj ‚Äì przesada medi√≥w',effect:'ignore_covid'},{text:'Short travel ‚Äì linie, hotele, cruises',effect:'short_travel_covid'},{text:'Buy tech ‚Äì Zoom, Netflix, Amazon',effect:'buy_tech_covid'},{text:'Defensywa ‚Äì utilities, staples',effect:'rotate_def_covid'}]},
            { month:'Marzec 2020', indexValue:2237, title:'PANIKA ‚Äì najszybszy krach w historii', description:'Spadek -34% w 23 dni ‚Äì najszybszy krach EVER! 11 marca ‚Äì WHO oficjalna pandemia. 13 marca ‚Äì Trump national emergency. Lockdowny globalne. Ludzie zamkniƒôci. Restauracje, hotele, linie lotnicze = zero revenue. NBA suspended. Tom Hanks COVID+. VIX 80. Toilet paper panic. Oil -50%. ‚ÄûKoniec ≈õwiata".',
              choices:[{text:'PANIKA ‚Äì sprzedaj wszystko!',effect:'sell_all_covid'},{text:'Buy the dip ‚Äì Fed zadzia≈Ça',effect:'buy_dip_covid'},{text:'Gold + Bitcoin safe haven',effect:'buy_safe_haven_covid'},{text:'All-in tech ‚Äì stay home trade',effect:'allin_tech_covid'}]},
            { month:'Kwiecie≈Ñ 2020', indexValue:2912, title:'Fed idzie BRRR ‚Äì infinite QE', description:'23 marca ‚Äì dno S&P 2191. Fed og≈Çasza UNLIMITED QE. ‚ÄûWhatever it takes". $2T stimulus (CARES Act). $1200 checks dla Amerykan√≥w. Bankruptcy wave ‚Äì Hertz, JCPenney, Neiman Marcus. Oil futures WTI -$37 (minus!). Ale... rynek odbija +30% od do≈Çka. \"Don\'t fight the Fed\".',
              choices:[{text:'Buy index ‚Äì Fed put aktywny',effect:'buy_index_fed_put'},{text:'Distressed debt ‚Äì bankrupty okazja',effect:'buy_distressed_covid'},{text:'Stay cash ‚Äì druga fala nadejdzie',effect:'stay_cash_wave2'},{text:'Commodities ‚Äì inflation coming',effect:'buy_commodities_covid'}]},
            { month:'Maj 2020', indexValue:3044, title:'Robinhood traders ‚Äì meme stocks era', description:'Ludzie siedzƒÖ w domach z $1200 checks i 0% prowizjƒÖ. Robinhood traders kupujƒÖ bankruty: Hertz +900%, AMC, airlines. ‚ÄûYOLO" i ‚Äûstonks only go up". Dave Portnoy: \"Stocks are the easiest game\". Unemployment 15%, ale rynek ro≈õnie. TSLA +120% YTD. Reality disconnect.',
              choices:[{text:'Join the party ‚Äì meme stocks!',effect:'join_meme_party'},{text:'Fade the rally ‚Äì to nie ma sensu',effect:'fade_rally_may'},{text:'Quality tech ‚Äì fundamentals matter',effect:'quality_tech_may'},{text:'Gold ‚Äì money printing = inflation',effect:'gold_inflation_hedge'}]},
            { month:'Lipiec 2020', indexValue:3271, title:'Tech bubble 2.0 ‚Äì praca zdalna wygrywa', description:'Zoom revenue +355% YoY. Netflix +60M subscribers. Peloton sold out. Amazon hiring 175k. Shopify, Etsy, Wayfair ‚Äì e-commerce eksploduje. \"Work from home forever\" ‚Äì Twitter, Facebook remote. Office REITs w ruinie. Nasdaq outperforms. FAANG = 25% S&P 500. Koncentracja risk?',
              choices:[{text:'Double down tech ‚Äì to nowa era',effect:'double_tech_wfh'},{text:'Contrarian ‚Äì rotate to value',effect:'rotate_value_july'},{text:'Short office REITs',effect:'short_office_reits'},{text:'Balance ‚Äì equal weight index',effect:'equal_weight_balance'}]},
            { month:'Wrzesie≈Ñ 2020', indexValue:3363, title:'Tesla split i tech sell-off', description:'31 sierpnia ‚Äì Tesla 5:1 split. Akcje +70% w sierpniu. Nasdaq +80% od marca. P/E ratios absurdalne. 3 wrze≈õnia ‚Äì nag≈Çy sell-off tech -10% w tydzie≈Ñ. Profit taking? Bubble deflating? Softbank \"Nasdaq whale\" leak. Rotation zaczyna siƒô. Election uncertainty (Trump vs Biden).',
              choices:[{text:'Buy the tech dip ‚Äì just correction',effect:'buy_tech_dip_sept'},{text:'Rotate cyclicals ‚Äì recovery play',effect:'rotate_cyclicals_sept'},{text:'Hedge with puts ‚Äì toppy',effect:'hedge_puts_sept'},{text:'International diversification',effect:'diversify_intl_covid'}]},
            { month:'Listopad 2020', indexValue:3557, title:'Biden wins + Pfizer szczepionka 90%!', description:'3 listopada ‚Äì Biden wygrywa (official 7 listopada). 9 listopada ‚Äì Pfizer og≈Çasza szczepionkƒô 90% skuteczna. Markets explode. Rotation MASYWNA: value +15%, small caps +20%, energy +25% w 2 tygodnie. Tech flat. Cruise lines +40%. \"Reopening trade\" zaczyna siƒô. Ende pandemii w sight.',
              choices:[{text:'Rotate reopening ‚Äì linie, hotele',effect:'rotate_reopening_nov'},{text:'Stay tech ‚Äì growth nadal wygra',effect:'stay_tech_nov'},{text:'Small cap value ‚Äì zabite',effect:'scv_rotation_nov'},{text:'Emerging markets ‚Äì global recovery',effect:'em_recovery_nov'}]},
            { month:'Grudzie≈Ñ 2020', indexValue:3756, title:'Szczepionki roll-out ‚Äì koniec pandemii?', description:'Szczepionki zatwierdzone (Pfizer, Moderna). Szczepienia rozpoczƒôte. Nadzieja na powr√≥t normalno≈õci w 2021. Tech nadal mocny ‚Äì praca zdalna permanent. E-commerce przejƒÖ≈Ç retail. Bitcoin $29k (+300% YTD). Stimulus #2 passed. Fed trzyma stopy przy 0%. Reopening trade vs stay-at-home. Co teraz?',
              choices:[{text:'Reopening full ‚Äì linie, hotele, REITs',effect:'buy_reopening_covid'},{text:'Hold tech ‚Äì fundamenty solid',effect:'stay_tech_covid'},{text:'Crypto ‚Äì Bitcoin do $100k?',effect:'buy_crypto_covid'},{text:'Balanced 60/40 rebalance',effect:'rebalance_covid'}]}
          ],
          stockPrices:{ 'S&P 500 (SPY)':[328,338,223,291,304,327,336,355,375], 'Zoom':[68,107,160,252,310,405,477,450,450], 'Tesla':[145,180,120,155,255,425,380,585,705], 'Boeing':[328,328,95,140,185,182,165,210,215], 'Carnival Cruise':[51,38,8,12,15,18,22,28,22], 'Bitcoin':[9300,10000,5000,6800,9500,11400,11800,19500,28000], 'Gold':[1520,1580,1700,1740,1770,1960,1950,1870,1895], 'Peloton':[28,33,26,45,68,95,120,140,155], 'AMC':[7.5,6,3,4.5,5.5,4.8,7,5,4] }
        },

        'FTX2022': {
          era:'2022', name:'FTX Crypto Crash', desc:'Upadek Terra Luna, 3AC, Celsius i FTX. Krypto zima. Bitcoin -77%.',
          title:'Inwestor krachu krypto 2022',
          subtitle:'Od $69k do $16k. Algorytmiczne stablecoiny, d≈∫wignia, efekt domina i Sam Bankman-Fried w areszcie.',
          indexLabel:'Bitcoin',
          scenarios:[
            { month:'Kwiecie≈Ñ 2022', indexValue:42000, title:'Fed podnosi stopy ‚Äì risk-off', description:'Bitcoin spad≈Ç z $69k (listopad 2021) do $42k. Fed walczy z inflacjƒÖ ‚Äì stopy idƒÖ w g√≥rƒô. Nasdaq -20%. Tech i krypto krwawiƒÖ. Leverage w systemie gigantyczny: 3AC po≈ºyczy≈Ç miliardy, Celsius obiecuje 18% APY, Luna/UST ma $18B market cap. DeFi yields 100%+. Wszyscy m√≥wiƒÖ "just a correction".',
              choices:[{text:'Sell ‚Äì Fed nie ≈ºartuje',effect:'sell_early_2022'},{text:'Buy the dip ‚Äì inflation hedge',effect:'buy_dip_early_2022'},{text:'DeFi farming ‚Äì 100% APY!',effect:'defi_farming_2022'},{text:'Stablecoins safe haven ‚Äì USDC/UST',effect:'move_stables_2022'}]},
            { month:'Maj 2022', indexValue:30000, title:'Luna/Terra IMPLODUJE', description:'UST to algorytmiczny stablecoin ‚Äì mia≈Ç trzymaƒá $1 przez arbitra≈º z Luna. Wieloryb (czy Citadel?) sprzedaje $350M UST. Peg siƒô ≈Çamie (UST = $0.90). Luna Foundation Guard sprzedaje $3B Bitcoin. Panic spirala ‚Äì Luna drukuje BILIONY monet. $40B market cap ‚Üí $0 w 72h. Do Kwon znika. Terraform Labs bankrut.',
              choices:[{text:'Short Luna ‚Äì oczywisty scam',effect:'short_luna'},{text:'Kup dip ‚Äì ‚Äûto tylko FUD"',effect:'buy_luna_dip'},{text:'Sprzedaj wszystkie alts',effect:'sell_alts_luna'},{text:'Trzymaj BTC/ETH only',effect:'hold_majors_luna'}]},
            { month:'Czerwiec 2022', indexValue:25000, title:'Celsius ZAMRA≈ªA wyp≈Çaty', description:'13 czerwca ‚Äì niedzielny wiecz√≥r. Celsius og≈Çasza: "Zamra≈ºamy wyp≈Çaty ze wzglƒôdu na ekstremalne warunki rynkowe". $20B klient√≥w locked. Alex Mashinsky jeszcze tydzie≈Ñ temu m√≥wi≈Ç "jeste≈õmy w super kondycji". Okazuje siƒô: Celsius ma dziurƒô, gra≈Ç z d≈∫wigniƒÖ, stETH depeg go zabija. Klienci w panice ‚Äì kto nastƒôpny?',
              choices:[{text:'Run na gie≈Çdy ‚Äì withdraw NOW',effect:'run_cex_celsius'},{text:'Short CEL token do zera',effect:'short_cel_token'},{text:'Trust Process ‚Äì poczekaj',effect:'trust_celsius_process'},{text:'Hardware wallet ASAP',effect:'hardware_wallet_move'}]},
            { month:'Lipiec 2022', indexValue:21000, title:'3AC bankrutuje ‚Äì efekt domina', description:'Three Arrows Capital (Su Zhu & Kyle Davies) ‚Äì mega fund, zarzƒÖdzali miliardami. Grali z d≈∫wigniƒÖ 10x. Trzymali Luna, stETH. Margin calls. Voyager po≈ºyczy≈Ç 3AC $650M ‚Äì nie dostanie zwrotu. BlockFi exposure. Genesis exposure. Wszyscy po≈ºyczali od siebie ‚Äì COUNTERPARTY RISK eksploduje. Nikt nie wie kto jest nastƒôpny.',
              choices:[{text:'Wyp≈Çaƒá WSZYSTKO z CEX',effect:'withdraw_cex'},{text:'Short exchange tokens ‚Äì FTT, CEL',effect:'short_cex_tokens'},{text:'Bitcoin to got√≥wka + czekaj',effect:'cash_wait_ftx'},{text:'Buy Bitcoin ‚Äì warto≈õƒá d≈Çugoterminowa',effect:'buy_btc_crash'}]},
            { month:'Sierpie≈Ñ 2022', indexValue:23000, title:'Ethereum Merge ‚Äì fa≈Çszywa nadzieja', description:'Ethereum przechodzi z Proof of Work na Proof of Stake ‚Äì "The Merge". Narracja: deflacja ETH, ekologia, staking yields. ETH pumps do $2000. Miners kapitulujƒÖ ‚Äì sprzedajƒÖ GPU i BTC/ETH reserves. Ale... recesja trwa, adoption nie ro≈õnie, Tornado Cash sanctions. Rally nie trzyma.',
              choices:[{text:'All-in ETH ‚Äì Merge bullish!',effect:'allin_eth_merge'},{text:'Sell the news ‚Äì klasyka',effect:'sell_merge_news'},{text:'Mining stocks ‚Äì kapitulacja = dno',effect:'buy_miners_merge'},{text:'Tether FUD ‚Äì diversify stables',effect:'diversify_stables'}]},
            { month:'Wrzesie≈Ñ 2022', indexValue:20000, title:'Cisza przed burzƒÖ', description:'Rynek stabilizuje siƒô w $19-21k range. Volatilno≈õƒá niska. "Boring" ‚Äì m√≥wiƒÖ traderzy. Celsius, Voyager, 3AC w bankructwie. FTX wyglƒÖda solidnie ‚Äì SBF "ratuje" firmy, kupuje BlockFi za $25M. Alameda Research (trading firm SBF) podobno profitable. CZ (Binance) i SBF na Twitterze friendly. Nikt nie wie co siƒô ≈õwiƒôci.',
              choices:[{text:'Accumulate ‚Äì dno wydaje siƒô in',effect:'accumulate_sept'},{text:'Nadal risk-off ‚Äì czekaj',effect:'risk_off_sept'},{text:'Leverage long ‚Äì volatility squeeze',effect:'leverage_long_sept'},{text:'Short setup ‚Äì dead cat bounce',effect:'short_setup_sept'}]},
            { month:'Listopad 2022', indexValue:17000, title:'FTX IMPLODUJE ‚Äì CZ vs SBF', description:'2 listopada ‚Äì CoinDesk leak: Alameda Research balance sheet pokazuje $5B FTT token (FTX w≈Çasny token) jako collateral. 6 listopada ‚Äì CZ tweetuje: "Sprzedajemy FTT". SBF: "Jeste≈õmy OK, mamy backing". 8 listopada ‚Äì bank run na FTX. Binance og≈Çasza przejƒôcie. 9 listopada ‚Äì Binance WYCOFUJE SIƒò po due diligence. 11 listopada ‚Äì FTX bankrutuje. $10B depozyt√≥w zniknƒô≈Ço.',
              choices:[{text:'PANIKA ‚Äì sprzedaj wszystko',effect:'panic_ftx'},{text:'Self-custody ‚Äì not your keys',effect:'self_custody'},{text:'Short WSZYSTKIE CEX',effect:'short_all_cex'},{text:'Tether risk ‚Äì USDC only',effect:'avoid_tether'}]},
            { month:'Grudzie≈Ñ 2022', indexValue:16500, title:'SBF aresztowany, Genesis crash', description:'12 grudnia ‚Äì SBF aresztowany na Bahamach. Ekstradycja do USA. Zarzuty: fraud, money laundering, wire fraud. Caroline Ellison (Alameda CEO) i Gary Wang (FTX CTO) wsp√≥≈ÇpracujƒÖ z prokuraturƒÖ. Genesis (DCG/Barry Silbert) zamra≈ºa wyp≈Çaty ‚Äì exposure na 3AC i FTX. Grayscale (GBTC) discount -50%. SEC attacks wszystkich.',
              choices:[{text:'Short GBTC ‚Äì discount explode',effect:'short_gbtc'},{text:'Genesis contagion ‚Äì sell all',effect:'genesis_contagion'},{text:'Buy Bitcoin ‚Äì fundamenty OK',effect:'buy_btc_fundamentals'},{text:'Wait for regulation clarity',effect:'wait_regulation'}]},
            { month:'Stycze≈Ñ 2023', indexValue:16800, title:'Kapitulacja i... odbicie?', description:'Bitcoin -77% od ATH. Ethereum -80%. Altcoiny -90-95%. Miners sprzedajƒÖ. Magazyny krypto zamykajƒÖ (Vice Motherboard). SBF w areszcie. Do Kwon w ukryciu (Serbia?). SEC atakuje Kraken, Coinbase, Gemini. Wszyscy m√≥wiƒÖ "krypto umar≈Ço". Ale... on-chain metrics: HODLers accumulate, hash rate stabilny, Lightning Network ro≈õnie. Dno?',
              choices:[{text:'All-in BTC ‚Äì dno dekady',effect:'allin_btc_dno'},{text:'DCA strategy ‚Äì ma≈Çymi krokami',effect:'dca_btc'},{text:'Czekaj na $10k ‚Äì dalej spadnie',effect:'wait_10k'},{text:'Nigdy wiƒôcej krypto',effect:'quit_crypto'}]}
          ],
          stockPrices:{ 'Bitcoin':[42000,30000,25000,21000,23000,20000,17000,16500,16800], 'Ethereum':[3000,2000,1500,1200,2000,1400,1100,1200,1250], 'FTT (FTX Token)':[40,25,18,5,4,3,1,0.5,0.1], 'Luna':[80,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001,0.0001], 'Coinbase (COIN)':[130,110,75,55,60,50,40,35,40], 'Tether (USDT)':[1.00,1.00,0.995,0.98,0.997,0.995,0.99,1.00,1.00], 'Celsius (CEL)':[2.5,1.2,0.15,0.10,0.08,0.06,0.05,0.03,0.02], 'Marathon Digital (MARA)':[25,15,10,8,9,7,6,5.5,7], 'Grayscale BTC Trust (GBTC)':[28,22,18,15,16,14,12,10,11] }
        },

        'AIBubble2023': {
          era:'2023-2025', name:'AI Bubble', desc:'ChatGPT, Nvidia, Microsoft. AGI hype czy faktyczny prze≈Çom? P/E na orbicie.',
          title:'Inwestor rewolucji AI',
          subtitle:'Od ChatGPT do AI agents. Nvidia +600%, startupy po $1B bez revenue, Sam Altman fired i rehired. Ba≈Ñka czy rewolucja?',
          indexLabel:'S&P 500',
          scenarios:[
            { month:'Listopad 2022', indexValue:3950, title:'ChatGPT launch', description:'OpenAI wypuszcza ChatGPT. 1M u≈ºytkownik√≥w w 5 dni. 100M w 2 miesiƒÖce ‚Äì najszybsze przyjƒôcie technologii w historii. Twitter eksploduje. Microsoft negocjuje deal. Wszyscy testujƒÖ AI. Google w panice ‚Äì "Code Red". Valuacje AI startup√≥w wystrzeliwujƒÖ.',
              choices:[{text:'All-in Nvidia ‚Äì GPU print money',effect:'buy_nvda'},{text:'Microsoft + OpenAI partnership',effect:'buy_msft_ai'},{text:'Kup wszystkich ‚Äì Google, Meta, MSFT',effect:'buy_all_ai'},{text:'To hype ‚Äì czekaj na korektƒô',effect:'wait_ai_correction'}]},
            { month:'Marzec 2023', indexValue:4050, title:'GPT-4 launch i Microsoft Copilot', description:'OpenAI wypuszcza GPT-4 ‚Äì zdaje egzaminy prawnicze w top 10%. Microsoft integruje AI z Office (Copilot) za $30/miesiƒÖc. GitHub Copilot ma ju≈º 1M p≈ÇacƒÖcych. Morgan Stanley u≈ºywa GPT-4 internal. Wall Street kupuje narracjƒô: "$30/user √ó 1B u≈ºytkownik√≥w = $360B ARR". Valuacja OpenAI skacze do $29B.',
              choices:[{text:'Microsoft ‚Äì monopol na AI productivity',effect:'buy_msft_copilot'},{text:'Kup AI startups (private markets)',effect:'buy_ai_startups'},{text:'Short tradycyjny software ‚Äì disruption',effect:'short_old_software'},{text:'Google catch-up ‚Äì Bard improving',effect:'buy_google_catchup'}]},
            { month:'Maj 2023', indexValue:4200, title:'Nvidia earnings szok', description:'Nvidia og≈Çasza wyniki ‚Äì revenue +265% YoY. Datacenter segment eksploduje. Jensen Huang (CEO) m√≥wi "iPhone moment AI". Akcje skaczƒÖ +25% po godzinach. P/E ponad 100. Analitycy podnoszƒÖ targety. Google, Meta, Amazon ‚Äì wszyscy kupujƒÖ H100 GPU za $30k sztuka. Kolejka 6 miesiƒôcy.',
              choices:[{text:'Buy the breakout ‚Äì momentum',effect:'buy_nvda_breakout'},{text:'Short ‚Äì wycena absurdalna',effect:'short_nvda'},{text:'Kup AMD ‚Äì ta≈Ñsza alternatywa',effect:'buy_amd_ai'},{text:'Cloud providers ‚Äì AWS, Azure',effect:'buy_cloud'}]},
            { month:'Sierpie≈Ñ 2023', indexValue:4350, title:'Open source AI ‚Äì Llama 2 i Mistral', description:'Meta wypuszcza Llama 2 open source ‚Äì darmowy, mo≈ºna hostowaƒá lokalnie. Mistral (francuski startup) zbiera $113M seed ‚Äì najwiƒôkszy w EU. Valuacja $260M bez produktu. Open source community buduje alternatywy: Vicuna, WizardLM, Orca. Pytanie: czy OpenAI zachowa przewagƒô?',
              choices:[{text:'Bet on open source ‚Äì Meta, Hugging Face',effect:'bet_opensource'},{text:'Proprietary wygra ‚Äì OpenAI, Anthropic',effect:'bet_proprietary'},{text:'Infrastructure play ‚Äì Nvidia nadal',effect:'stick_nvda'},{text:'Diversify ‚Äì kup index AI ETF',effect:'buy_ai_etf'}]},
            { month:'Listopad 2023', indexValue:4550, title:'Sam Altman FIRED', description:'Board OpenAI wyrzuca Sam Altman bez wyja≈õnienia. 700 pracownik√≥w grozi odej≈õciem do Microsoft. Satya Nadella (MSFT CEO) oferuje pracƒô wszystkim. Drama trwa 5 dni. Altman wraca jako CEO z nowym boardem. Microsoft umacnia kontrolƒô. Rynek: chaos ‚Üí ulga ‚Üí rally.',
              choices:[{text:'Kup Microsoft ‚Äì kontrola OpenAI',effect:'buy_msft_drama'},{text:'Sell ‚Äì governance risk',effect:'sell_openai_drama'},{text:'Kup konkurencjƒô ‚Äì Anthropic/Google',effect:'buy_anthropic_google'},{text:'All-in OpenAI products (private)',effect:'bet_openai'}]},
            { month:'Grudzie≈Ñ 2023', indexValue:4700, title:'Gemini launch ‚Äì Google strikes back', description:'Google wypuszcza Gemini Ultra ‚Äì twierdzi ≈ºe lepszy od GPT-4. Gemini 1.5 ma context window 1M tokens (GPT-4: 32k). DeepMind zintegrowany z Google Cloud. Bard dostaje upgrade. Analitycy: "Google ma compute, data i talent ‚Äì mo≈ºe wygraƒá". Akcje Google +15% w tydzie≈Ñ.',
              choices:[{text:'Rotate do Google ‚Äì undervalued AI',effect:'rotate_google'},{text:'Bet on duopoly ‚Äì MSFT + GOOGL',effect:'bet_duopoly'},{text:'Anthropic dark horse ‚Äì Claude 2',effect:'bet_anthropic'},{text:'Nvidia wygra niezale≈ºnie od winner',effect:'nvda_picks_shovels'}]},
            { month:'Luty 2024', indexValue:5000, title:'Sora video AI ‚Äì valuacje szalejƒÖ', description:'OpenAI pokazuje Sora ‚Äì text-to-video AI. Filmy 1080p, 60s, fotorealistyczne. Hollywood w szoku. Character.ai (chatboty) valuacja $1B bez revenue. Inflection (Pi chatbot) $4B. Perplexity (search) $3B. Mistral (4 miesiƒÖce od launch) $2B. Ka≈ºdy AI startup zbiera setki milion√≥w.',
              choices:[{text:'Venture capital ‚Äì late stage AI funds',effect:'invest_vc_ai'},{text:'Public only ‚Äì prywatne overvalued',effect:'public_only'},{text:'Creative AI ‚Äì Adobe, Shutterstock',effect:'buy_creative_ai'},{text:'Cash out ‚Äì top jest blisko',effect:'cash_out_early'}]},
            { month:'Czerwiec 2024', indexValue:5460, title:'Ba≈Ñka czy prze≈Çom?', description:'Nvidia $3T market cap ‚Äì top 3 na ≈õwiecie. AI startupy: Character.ai $1B, Anthropic $18B, Perplexity $3B, Inflection $4B ‚Äì wiƒôkszo≈õƒá bez revenue. UE uchwala AI Act. China restrictions na chipy. Nvidia guidance: +50% growth. Ale P/E >100. Inwestorzy pytajƒÖ: to DotCom 2.0?',
              choices:[{text:'Take profits ‚Äì wyceny szalone',effect:'take_profits_ai'},{text:'HODL ‚Äì to iPhone moment',effect:'hodl_ai'},{text:'Rotate ‚Äì AI infrastructure (ASML)',effect:'rotate_infra'},{text:'Short ‚Äì ba≈Ñka jak DotCom',effect:'short_ai_bubble'}]},
            { month:'Pa≈∫dziernik 2024', indexValue:5600, title:'Reasoning models i AI agents', description:'OpenAI wypuszcza O1 ‚Äì model reasoning. "My≈õli" przed odpowiedziƒÖ. Zdaje IMO (matematyka olimpijska). Google odpowiada Gemini 2.0 ‚Äì AI agents. Anthropic Computer Use ‚Äì AI kontroluje komputer. Nvidia og≈Çasza Blackwell GPU. Microsoft i Google capex $50B/rok na datacenters. Pytanie: revenue nadƒÖ≈ºy za capex?',
              choices:[{text:'Double down ‚Äì AGI blisko',effect:'double_down_agi'},{text:'Profit taking ‚Äì by≈Ça dobra jazda',effect:'final_profit_take'},{text:'Energy play ‚Äì AI ≈ºre prƒÖd (uranium)',effect:'buy_energy_ai'},{text:'Chips diversification ‚Äì TSMC, ASML',effect:'chips_diversify'}]}
          ],
          stockPrices:{ 'Nvidia (NVDA)':[150,200,300,390,480,620,750,900,1100], 'Microsoft (MSFT)':[240,290,340,365,380,420,440,450,480], 'Google (GOOGL)':[90,105,120,125,140,165,160,170,185], 'Meta (META)':[120,180,280,340,450,480,520,560,600], 'AMD':[70,85,110,125,140,155,170,180,200], 'ARM Holdings':[50,60,80,95,120,130,135,140,155] }
        }
      };

      // --------- MENU ---------
      function buildMenu(){
        console.log('üìã Building menu...');
        const keys = Object.keys(chapters);
        console.log('üìö Chapters:', keys);
        const html = keys.map(key => {
          const c = chapters[key];
          return `<article class="chapter-card" data-key="${key}" tabindex="0" role="button" aria-label="${c.era}: ${c.name}">
            <div class="chapter-era">${c.era}</div>
            <div class="chapter-name">${c.name}</div>
            <div class="chapter-description">${c.desc}</div>
          </article>`;
        }).join('');
        dom.chapterSelection.innerHTML = html || '<p>Brak rozdzia≈Ç√≥w.</p>';

        const cards = dom.chapterSelection.querySelectorAll('.chapter-card');
        console.log('üÉè Found cards:', cards.length);

        cards.forEach(card => {
          card.addEventListener('click', () => {
            console.log('üéØ Card clicked:', card.dataset.key);
            startChapter(card.dataset.key);
          });
          card.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
              console.log('‚å®Ô∏è Enter pressed on:', card.dataset.key);
              startChapter(card.dataset.key);
            }
          });
        });
        console.log('‚úÖ Menu built with', cards.length, 'cards');
      }

      // --------- GAME FLOW ---------
      function startChapter(key, startingCapital = 1000){
        console.log('üöÄ Starting chapter:', key, 'with capital:', startingCapital);
        currentChapterKey = key;
        capital = startingCapital;
        currentScenario = 0;
        decisions = 0;
        capitalHistory = [startingCapital]; // Reset and track starting capital
        achievements = []; // Reset achievements
        const ch = chapters[key];

        if (!ch) {
          console.error('‚ùå Chapter not found:', key);
          alert('B≈ÇƒÖd: Nie znaleziono rozdzia≈Çu ' + key);
          return;
        }

        console.log('üìñ Chapter:', ch.title);

        dom.chapterTitle.textContent = ch.title;
        dom.chapterSubtitle.textContent = ch.subtitle;
        dom.indexLabel.textContent = ch.indexLabel;
        dom.decisions.textContent = decisions;

        // Hide all menus
        console.log('üôà Hiding menus...');
        dom.mainMenu.classList.add('hidden');
        hideWelcomeScreen();
        hideModal();

        // Show game
        console.log('üëÅÔ∏è Showing game area...');
        dom.gameArea.classList.remove('hidden');
        renderScenario();
        updateProgress();
        console.log('‚úÖ Chapter started!');
      }

      function showMainMenu(){
        dom.gameArea.classList.add('hidden');
        showWelcomeScreen(); // Show welcome screen instead of old menu
      }

      function updateProgress(){ const total = chapters[currentChapterKey].scenarios.length; const pct = Math.min(100, Math.round(((currentScenario)/total)*100)); dom.progressBar.style.width = pct + '%'; }

      function formatPrice(v){ if (typeof v === 'string') return v; if (v >= 10) return '$' + v.toLocaleString(); return '$' + Number(v).toFixed(2); }

      function renderGraphic(chKey){
        const accent = getComputedStyle(document.documentElement).getPropertyValue('--accent').trim();
        const accent2 = getComputedStyle(document.documentElement).getPropertyValue('--accent-2').trim();
        const base = `<svg width="100%" height="90" viewBox="0 0 400 90" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="0%"><stop offset="0%" stop-color="${accent}"/><stop offset="100%" stop-color="${accent2}"/></linearGradient></defs><rect x="0" y="0" width="400" height="90" fill="none" stroke="rgba(255,255,255,0.06)"/>`;
        const tail = `</svg>`;
        const bull = '<path d="M5,70 C60,40 120,60 170,35 C220,20 280,50 330,30 C360,20 380,25 395,20" fill="none" stroke="url(#g)" stroke-width="3" />';
        const bear = '<path d="M5,20 C60,40 120,25 170,45 C220,60 280,30 330,50 C360,60 380,55 395,62" fill="none" stroke="url(#g)" stroke-width="3" />';
        const oil = '<path d="M60,80 L80,20 L100,80 Z M140,80 L160,25 L180,80 Z M220,80 L240,22 L260,80 Z" fill="url(#g)" opacity="0.8"/>';
        const chip = '<rect x="150" y="20" width="100" height="50" rx="6" stroke="url(#g)" fill="none" stroke-width="3"/><g opacity="0.7"><rect x="145" y="12" width="6" height="16"/><rect x="249" y="12" width="6" height="16"/><rect x="145" y="62" width="6" height="16"/><rect x="249" y="62" width="6" height="16"/></g>';
        const bank = '<rect x="40" y="30" width="320" height="40" rx="4" fill="none" stroke="url(#g)" stroke-width="3"/><path d="M40,30 L200,10 L360,30" stroke="url(#g)" stroke-width="3" fill="none"/>';
        let body = bull; if (chKey==='1930s') body = bear; else if (chKey==='1970s') body = oil; else if (chKey==='1990s') body = chip; else if (chKey==='DotCom') body = bull; else if (chKey==='GFC2008') body = bank;
        return base + body + tail;
      }

      function renderScenario(){
        const ch = chapters[currentChapterKey];
        const s = ch.scenarios[currentScenario];
        dom.capital.textContent = `$${capital.toLocaleString()}`;
        dom.month.textContent = s.month;
        dom.indexValue.textContent = s.indexValue;
        dom.decisions.textContent = decisions;

        const hintText = (hints[currentChapterKey] && hints[currentChapterKey][currentScenario]) || '';

        dom.gameContent.innerHTML = `
          <section class="panel">
            <h3 class="panel-title">${s.title}</h3>
            <div class="scenario-graphic">${renderGraphic(currentChapterKey)}</div>
            <p class="scenario-text">${s.description}</p>
            <div class="choices">
              ${s.choices.map((c,i)=>`<button class="choice-btn" data-idx="${i}">${c.text}</button>`).join('')}
            </div>
            <button class="hint-btn" id="hintBtn" aria-expanded="false" aria-controls="hintBox">üí° Wskaz√≥wka</button>
            <div id="hintBox" class="hint-box" aria-hidden="true">${hintText}</div>
            <button id="chartButton">üìä Zobacz m√≥j wykres</button>
          </section>
          <aside class="panel" aria-label="Ceny na rynku">
            <h3 class="panel-title">Ceny na rynku</h3>
            <div class="stock-list">
              ${Object.entries(ch.stockPrices).map(([name, arr]) => `
                <div class="stock-item"><span class="stock-name">${name}</span><span class="stock-price">${formatPrice(arr[currentScenario])}</span></div>
              `).join('')}
            </div>
          </aside>`;

        dom.gameContent.querySelectorAll('.choice-btn').forEach(btn => btn.addEventListener('click', () => {
          const idx = Number(btn.getAttribute('data-idx'));
          makeChoice(idx);
        }));

        const hintBtn = document.getElementById('hintBtn');
        const hintBox = document.getElementById('hintBox');
        if (hintBtn && hintBox) {
          hintBtn.addEventListener('click', () => {
            const expanded = hintBtn.getAttribute('aria-expanded') === 'true';
            hintBtn.setAttribute('aria-expanded', String(!expanded));
            hintBox.setAttribute('aria-hidden', String(expanded));
          });
        }

        // Chart button (only for 1930s)
        const chartButton = document.getElementById('chartButton');
        if(chartButton){
          chartButton.addEventListener('click', () => {
            console.log('Chart button clicked');
            openChartModal(currentChapterKey);
          });
        }

        updateProgress();
      }

      function rng(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

      function calculateResult(effect){
        const R=(min,max)=>rng(min,max); let moneyChange=0, message='', type='neutral';
        const outcomes={
          // 1930s
          // Pa≈∫dziernik 1929 - Czarny Czwartek
          buy_stocks:[-R(1000,1600),'Kupi≈Çe≈õ tu≈º przed krachem. Broker dzwoni: wezwanie do uzupe≈Çnienia depozytu! Musisz sprzedaƒá po -70%. KATASTROFA. Panika wszƒôdzie.','loss'],
          sell_all:[R(15,60),'Sprzeda≈Çe≈õ przed krachem. SƒÖsiedzi m√≥wiƒÖ ≈ºe jeste≈õ tch√≥rzem. Ocali≈Ç kapita≈Ç, ale prowizja 3% zjada czƒô≈õƒá.','profit'],
          buy_gold:[R(-80,40),'Z≈Çoto te≈º spada w panice - wszyscy potrzebujƒÖ got√≥wki na pokrycie strat. Gorsze ni≈º my≈õla≈Çe≈õ.','neutral'],
          short_market:[R(50,140),'Gra na spadki dzia≈Ça≈Ça! Ale broker zamknƒÖ≈Ç pozycjƒô w panice i prowizje wysokie. Zysk znacznie mniejszy.','profit'],
          // Listopad 1929 - Krach
          buy_dip:[-R(600,1000),'To NIE by≈Ço dno. Banki upadajƒÖ. Spadki trwajƒÖ jeszcze 3 LATA. Kupi≈Çe≈õ za wcze≈õnie - ≈Çapanie spadajƒÖcego no≈ºa. RUINA.','loss'],
          hold_cash:[R(-15,35),'Got√≥wka bezpieczna, ale deflacja zbli≈ºa siƒô. Prowizja za przechowanie w banku. Eksperci m√≥wiƒÖ "kupuj dno" - ignorujesz.','neutral'],
          buy_utilities:[R(-180,40),'U≈ºyteczno≈õci te≈º cierpiƒÖ - nikt nie p≈Çaci rachunk√≥w. 30% klient√≥w nie wywiƒÖzuje siƒô z p≈Çatno≈õci. Lepsze ni≈º akcje, ale bolesna strata.','loss'],
          buy_commodities:[R(-220,60),'Popyt siƒô za≈Çamuje. Fabryki zamykajƒÖ. Deflacja zabija towary. Mo≈ºe tylko z≈Çoto siƒô utrzyma?','loss'],
          // Czerwiec 1930 - Fa≈Çszywy ≈õwit (PU≈ÅAPKA!)
          buy_dividends:[-R(300,550),'WIELKA PU≈ÅAPKA! Sp√≥≈Çki ZAWIESZAJƒÑ dywidendy tydzie≈Ñ po twoim zakupie. Ta "pewna" wyp≈Çata to iluzja. Fa≈Çszywe odbicie w bessie. KATASTROFA!','loss'],
          buy_gold_miners:[R(-350,80),'G√≥rnicy to akcje - d≈∫wignia finansowa dzia≈Ça PRZECIWKO tobie. Cena z≈Çota ro≈õnie, ale akcje g√≥rnicze padajƒÖ -40%. ≈ªƒÖdania dop≈Çat!','loss'],
          buy_bonds:[R(25,80),'MƒÖdry wyb√≥r. Obligacje skarbowe = jedyny bezpieczny port. Ale zysk niewielki i prowizje 2%.','profit'],
          start_business:[-R(500,50),'Za≈Ç√≥≈º biznes w Depresji? SZALE≈ÉSTWO! 25% bezrobocie. Nikt nie kupuje. Bankructwo po 4 miesiƒÖcach. Stracone oszczƒôdno≈õci.','loss'],
          // Grudzie≈Ñ 1930 - Bank of US upada (400k deponent√≥w traci oszczƒôdno≈õci)
          cash_mattress_30:[R(-30,40),'Trzymasz got√≥wkƒô pod materacem. Deflacja zjada 5% rocznie. Ryzyko kradzie≈ºy. SƒÖsiedzi tracƒÖ wszystko w bankach - ty przynajmniej masz kapita≈Ç.','neutral'],
          biggest_banks_30:[R(-280,50),'Postawi≈Çe≈õ na JP Morgan. Oni przetrwajƒÖ... ale ich akcje spadajƒÖ -35%. Zaraza paniki wszƒôdzie. Szturm na banki codziennie.','loss'],
          gold_safety_30:[R(35,100),'Z≈Çoto = jedyna bezpieczna przysta≈Ñ. Ludzie uciekajƒÖ od papier√≥w. MƒÖdra decyzja w panice bankowej. Ale prowizje dealer√≥w wysokie.','profit'],
          govt_bonds_30:[R(50,120),'Obligacje skarbowe - bezpieczna przysta≈Ñ. Wszyscy uciekajƒÖ do bezpiecze≈Ñstwa. Rentowno≈õƒá spada, ceny w g√≥rƒô. Ale defensywna strategia - zwroty niewielkie.','profit'],
          // Maj 1931 - Credit-Anstalt collapse (Austria ‚Üí Europe ‚Üí ≈õwiat)
          sell_global_31:[R(-150,50),'Sprzedajesz w PANICE po najgorszych cenach. Za p√≥≈∫no - strata -25% ju≈º zrealizowana. Zaraza b≈Çyskawiczna. Najgorszy moment.','loss'],
          short_europe_31:[R(60,150),'MORALNY DYLEMAT: grasz na spadki europejskich bank√≥w. Zarabiasz na tragedii milion√≥w. Austria, Niemcy w chaosie. Ale broker ogranicza pozycje - mniej zysk√≥w.','profit'],
          usa_haven_31:[-R(180,300),'PU≈ÅAPKA! My≈õla≈Çe≈õ ≈ºe USA jest bezpieczne od europejskiego kryzysu? WIELKI B≈ÅƒÑD! Depresja idzie do Ameryki. Zaraza globalna.','loss'],
          gold_commodities_31:[R(50,120),'Ucieczka do jako≈õci. Wszyscy uciekajƒÖ do realnych aktyw√≥w. Z≈Çoto, srebro. Ale transport i koszty przechowania wysokie -20%.','profit'],
          // Wrzesie≈Ñ 1931 - Britain opuszcza gold standard (funt -25%!)
          buy_real_estate:[-R(500,250),'Nieruchomo≈õci w Depresji? NAJGORSZA DECYZJA! Egzekucje wszƒôdzie. Podatek od nieruchomo≈õci + koszty utrzymania. Ceny spadajƒÖ -60%+. KATASTROFA.','loss'],
          buy_staples:[R(15,80),'Jedzenie, myd≈Ço, tyto≈Ñ - ludzie nadal kupujƒÖ podstawy. Defensywna strategia dzia≈Ça, ale zyski niewielkie. Prowizje 3%.','profit'],
          hoard_cash:[R(-40,45),'Deflacja zjada warto≈õƒá -3% rocznie, ale got√≥wka daje spok√≥j. Rezerwa Federalna podnosi stopy (b≈ÇƒÖd historyczny!) - gospodarka w d√≥≈Ç.','neutral'],
          buy_more_gold:[R(40,100),'Wielka Brytania zrywa ze standardem z≈Çota = chaos walutowy. Z≈Çoto prawdziwym pieniƒÖdzem. MƒÖdra decyzja, ale koszty przechowania i premie dealer√≥w wysokie.','profit'],
          // Lipiec 1932 - ABSOLUTNE DNO (Dow 41, -89% od szczytu, 25% bezrobocie)
          buy_bottom:[R(-300,200),'ZAK≈ÅAD PRZECIWKO T≈ÅUMOWI - najwy≈ºsze ryzyko! Wszyscy w panice, ty kupujesz. NIE WIESZ czy to dno. Mo≈ºe czekaƒá rok bez wzrost√≥w. Irving Fisher zbankrutowa≈Ç pr√≥bujƒÖc.','neutral'],
          buy_quality:[R(25,130),'Coca-Cola, IBM po przecenie. Jako≈õƒá ZAWSZE wraca... ale moment trudny. Mo≈ºe czekaƒá 12-18 miesiƒôcy na odbicie. Prowizje wysokie.','profit'],
          buy_alcohol:[R(-120,120),'Prohibicja ko≈Ñczy siƒô wkr√≥tce - spekulacja na przysz≈Ço≈õƒá! Ale nielegalny rynek dzia≈Ça ≈õwietnie, legalne sp√≥≈Çki s≈Çabe. Wielki hazard.','neutral'],
          stay_safe:[R(-50,30),'Kapitulacja po 3 latach kryzysu. Nie wierzysz ju≈º w rynek. Trzymasz got√≥wkƒô. OMINIESZ najwiƒôksze odbicie w historii! Stracona szansa.','neutral'],
          // Listopad 1932 - FDR wygrywa landslide (nadzieja!)
          buy_fdr_hope:[R(45,110),'Nowy ≈Åad nadchodzi! Rynek przeczuwa. Kupujesz nadziejƒô - klasyczne "kup plotkƒô". Impet powoli ro≈õnie. Ale inauguracja za 4 miesiƒÖce.','profit'],
          wait_fdr_action:[R(-50,45),'Czekasz na konkretne dzia≈Çania. Ostro≈ºny... ale rynek ju≈º zaczyna wyceniaƒá. Omijasz wczesne wzrosty. Koszt oczekiwania.','neutral'],
          infra_new_deal:[R(60,140),'Dobra przewidywanie! Infrastruktura = serce Nowego ≈Åadu. Cement, stal, koleje. Ale wykonanie zajmie miesiƒÖce. Wyb√≥r wymaga cierpliwo≈õci.','profit'],
          alcohol_prohibition_end:[R(35,110),'Prohibicja ko≈Ñczy siƒô 1933! Legalny alkohol = nowa bran≈ºa. Ale kt√≥re sp√≥≈Çki przetrwajƒÖ? Wielkie ryzyko realizacji. Przemytnicy majƒÖ przewagƒô.','profit'],
          // Marzec 1933 - Bank Holiday i New Deal (DNO POTWIERDZONE! Odbicie siƒô zaczyna)
          buy_infrastructure:[R(50,140),'Nowy ≈Åad DZIA≈ÅA! Masywne projekty publiczne. Infrastruktura solidny zak≈Çad. Ale realizacja zajmie kwarta≈Çy. Trzeba cierpliwo≈õci.','profit'],
          sell_gold:[-R(180,350),'KATASTROFA! Roosevelt konfiskuje z≈Çoto RozporzƒÖdzeniem 6102. Przeliczenie $20.67 ‚Üí $35. Sprzeda≈Çe≈õ tu≈º przed 40% wzrostem! Najgorszy moment w historii.','loss'],
          buy_agriculture:[R(35,100),'Ustawa o dostosowaniach rolnych subsydiuje farmer√≥w. Ceny stabilizujƒÖ siƒô. MƒÖdry sektor, ale ryzyko suszy 1934. Zwroty umiarkowane.','profit'],
          buy_railroads:[R(-120,90),'Koleje cykliczne i zad≈Çu≈ºone. Nowy ≈Åad pomaga, ale odbicie BARDZO d≈Çugie. Mo≈ºe zajƒÖƒá 3-5 lat. Moment ekstremalnie trudny.','neutral'],
          // 1970s
          // Sierpie≈Ñ 1971 - Nixon Shock
          buy_gold_71:[R(80,200),'Standard z≈Çota ko≈Ñczy siƒô ‚Äì z≈Çoto ro≈õnie! Ale koszty przechowywania, mar≈ºe dealer√≥w 5-8%, op√≥≈∫nienia. Nie tak prosto jak my≈õla≈Çe≈õ.','profit'], buy_commodities_71:[R(45,130),'Surowce rosnƒÖ ‚Äì ochrona przed inflacjƒÖ. Ale wymogi depozytu na kontraktach, koszty rolowania. Prowizje 4%.','profit'], buy_intl_71:[R(10,80),'Dywersyfikacja walutowa pomaga trochƒô. Spready walutowe, ryzyko kursu, op≈Çaty konwersji -3%.','profit'], stay_stocks_71:[R(-120,50),'PU≈ÅAPKA! Stagflacja przez dekadƒô! Akcje walczƒÖ z inflacjƒÖ i recesjƒÖ. Nifty Fifty collapse ahead -40%.','loss'],
          // Pa≈∫dziernik 1973 - Wojna Yom Kippur
          buy_oil:[R(120,220),'Energetyka w g√≥rƒô! Ale kontrola OPEC = zmienno≈õƒá. Ryzyko nacjonalizacji. Gro≈∫by podatk√≥w nadzwyczajnych. Trudny timing.','profit'], short_transport:[R(90,180),'Transport oberwa≈Ç ‚Äì zysk. Ale ryzyko przymusowego zamkniƒôcia pozycji, op≈Çaty maklera 5%, wysokie wymogi depozytowe.','profit'], buy_alt_energy:[R(-120,100),'Wczesna faza solar/wiatr ‚Äì BARDZO ryzykowne! Wiƒôkszo≈õƒá startup√≥w bankrutuje. Technologia nieudowodniona. Mo≈ºe strata totalna.','neutral'], buy_commodities_70s:[R(25,90),'Surowce chroniƒÖ przed inflacjƒÖ czƒô≈õciowo. Ale struktura cen futures zjada zwroty, koszty magazynowania, ryzyko wyga≈õniƒôcia.','profit'],
          // Marzec 1974 - Kryzys siƒô pog≈Çƒôbia
          buy_energy_infrastructure:[R(25,95),'RurociƒÖgi/rafinerie zyskujƒÖ trochƒô. Niepewno≈õƒá regulacyjna, kapita≈Çoch≈Çonne, mo≈ºliwe ciƒôcia dywidend.','profit'], buy_staples_70s:[R(10,65),'Podstawowe dobra trzymajƒÖ popyt OK. Ale ograniczona si≈Ça cenowa, mar≈ºe ≈õci≈õniƒôte. Defensywa s≈Çaba.','profit'], buy_real_estate_70s:[R(-40,80),'Nieruchomo≈õci mieszane! Inflacja pomaga, ALE oprocentowanie kredyt√≥w 10%+! Finansowanie trudne, kryzys p≈Çynno≈õci.','neutral'], hold_cash_70s:[R(-60,-10),'Inflacja 12% ZJADA got√≥wkƒô -10% realnie rocznie! Najgorsza decyzja w stagflacji. Gwarantowana strata!','loss'],
          // Sierpie≈Ñ 1974 - Rezygnacja Nixona
          buy_dividends_70s:[R(-10,50),'Dywidendy ≈ÇagodzƒÖ b√≥l trochƒô. Ale wiele sp√≥≈Çek TNIE dywidendy. Wska≈∫niki wyp≈Çat nie do utrzymania. Pu≈Çapka warto≈õci!','neutral'], buy_precious_metals:[R(35,110),'Z≈Çoto/srebro korzystajƒÖ z politycznego chaosu. Ale mar≈ºe dealer√≥w 6-10%, r√≥≈ºnica miƒôdzy kupnem a sprzeda≈ºƒÖ, magazynowanie.','profit'], short_growth:[R(35,100),'Wzrost√≥wki karcone stopami OK. Ale koszty pozycji kr√≥tkiej, ≈ºƒÖdania dop≈Çat je≈õli odbicie. Timing trudny.','profit'], buy_international:[R(-60,80),'Dywersyfikacja miƒôdzynarodowa RYZYKOWNA! Europa/Japonia te≈º w stagflacji. Chaos walutowy. Mo≈ºe gorsze ni≈º USA.','neutral'],
          // Stycze≈Ñ 1975 - Mocna recesja
          buy_quality_70s:[R(25,100),'Jako≈õƒá po przecenie - dobry pomys≈Ç d≈Çugoterminowo. Ale recesja trwa. Ryzyko pu≈Çapki warto≈õci. Trzeba czekaƒá 2-3 lata.','profit'], buy_efficiency_tech:[R(10,90),'Efektywno≈õƒá kosztowa mile widziana przez firmy. Ale wczesna faza, zmienne, wiele bankructw. Wysokie ryzyko.','profit'], buy_agriculture_70s:[R(15,80),'Rolnictwo korzysta z cen surowc√≥w. Ale ryzyko pogody, interwencja rzƒÖdu, cykle nadpoda≈ºy.','profit'], buy_tips:[R(15,60),'Obligacje antyinflacyjne chroniƒÖ teoretycznie. Ale nowy instrument, niska p≈Çynno≈õƒá, b≈Çƒôdy ≈õledzenia.','profit'],
          // Lipiec 1976 - Dwustulecie
          buy_tech_70s:[R(-50,80),'Wczesny tech 1976 BARDZO zmienny! Apple/Microsoft jeszcze ma≈Çe. Wiƒôkszo≈õƒá firm bankrutuje. Los na loterii.','neutral'], buy_conservation:[R(5,75),'Efektywno≈õƒá energetyczna s≈Çabym trendem. Konsumenci niezainteresowani gdy ceny spadajƒÖ. Subsydia ograniczone.','profit'], buy_consumer_disc:[R(-80,50),'Dobra luksusowe CIERPIƒÑ! Realne p≈Çace spadajƒÖ, bezrobocie wysokie. Ludzie kupujƒÖ tylko podstawy. Recesja boli.','neutral'], stay_commodities:[R(-50,60),'Surowce cykliczne - szczyt przed nami? Mo≈ºe korekta nadchodzi. Timing bardzo trudny. Zmienno≈õƒá ekstremalna.','neutral'],
          // Maj 1977 - Carter/Stagflacja
          gold_silver_77:[R(65,180),'Metale szlachetne w g√≥rƒô ‚Äì dolar s≈Çaby! Ale zmienno≈õƒá +/- 20% miesiƒôcznie. Spready dealer√≥w 8%. Timing krytyczny.','profit'], energy_77:[R(35,110),'Kryzys energetyczny d≈Çugoterminowy - solidna teza. Ale nacjonalizacja, podatki nadzwyczajne, manipulacje OPEC. Wysokie ryzyko.','profit'], tips_77:[R(25,90),'Obligacje antyinflacyjne chroniƒÖ teoretycznie. Ale rentowno≈õci op√≥≈∫nione za inflacjƒÖ, niska p≈Çynno≈õƒá, b≈Çƒôdy nowego instrumentu.','profit'], short_dollar_77:[R(45,130),'Dolar s≈Çabnie ‚Äì dywersyfikacja walutowa pomaga. Ale ekstremalna zmienno≈õƒá walut, koszty konwersji 3-5%, komplikacje podatkowe.','profit'],
          // Grudzie≈Ñ 1978 - Drugi szok naftowy
          buy_oil_again:[R(45,120),'Drugi szok naftowy - rewolucja w Iranie. Energia w g√≥rƒô! Ale chaos geopolityczny, poda≈º nieprzewidywalna, obawy o szczyt ropy przesadzone.','profit'], buy_alt_energy_late:[R(-50,90),'Alternatywy solar/wiatr pod koniec lat 70 - cykl szumu! Wiƒôkszo≈õƒá projekt√≥w upada. Technologia niedojrza≈Ça. Zale≈ºno≈õƒá od subsydi√≥w.','neutral'], buy_inflation_assets:[R(25,100),'Aktywa realne antyinflacyjne (surowce, nieruchomo≈õci) czƒô≈õciowo dzia≈ÇajƒÖ. Ale timing szczytu? Volcker nadchodzi = b√≥l.','profit'], short_rates:[R(25,90),'Sektory wra≈ºliwe na stopy cierpiƒÖ (u≈ºyteczno≈õƒá publiczna, fundusze nieruchomo≈õci). Gra na spadki dzia≈Ça. Ale szok Volckera nadchodzi = wiƒôcej b√≥lu.','profit'],
          // Sierpie≈Ñ 1979 - Volcker appointment
          short_bonds_79:[R(90,220),'Obligacje rozgromione ‚Äì stopy 20%! Gra na spadki dzia≈Ça ≈öWIETNIE! Ale brutalne ≈ºƒÖdania dop≈Çat, broker mo≈ºe zamknƒÖƒá pozycjƒô, ryzyko przymusowego odkupu.','profit'], gold_parabolic_79:[R(120,300),'Z≈Çoto PARABOLICZNE $300 ‚Üí $850! Ale zmienno≈õƒá SZALONA ¬±15% dziennie! Manipulacja braci Hunt, mo≈ºe zawaliƒá siƒô w ka≈ºdym momencie. Timing = loteria!','profit'], defensive_79:[R(10,65),'Recesja 1980-82 przed nami ‚Äì defensywa... ale stagflacja niszczy wszystko. Nawet "bezpieczne" sektory cierpiƒÖ. Brak bezpiecznej przystani.','profit'], quality_volcker_79:[R(35,110),'Volcker wygrywa d≈Çugoterminowo ‚Äì jako≈õƒá wygra za 3-5 lat. Ale kr√≥tkoterminowy b√≥l EKSTREMALNY. Trzeba wytrzymaƒá -30% spadek.','profit'],
          // 1990s
          // Listopad 1990 - Recesja S&L
          buy_def_90:[R(20,75),'Defensywa chroni w recesji trochƒô. Ale kryzys kas oszczƒôdno≈õciowych = ryzyko systemowe. Wiele "defensywnych" bank√≥w upada. Ograniczona ochrona.','profit'], hold_cash_90:[R(-35,15),'Got√≥wka bezpieczna, ale tracisz timing odbicia. Obni≈ºki st√≥p Fed nadchodzƒÖ = ogromny koszt utraconych okazji. Inflacja 5% zjada warto≈õƒá.','neutral'], buy_bonds_90:[R(20,60),'Obni≈ºki st√≥p Fed = wzrost obligacji OK. Ale ryzyko duracji, recesja mo≈ºe byƒá d≈Çuga. Ryzyko spreadu kredytowego.','profit'], buy_pc_90:[R(-120,140),'Boom na komputery PC DOPIERO zaczyna! IBM dominuje ale Apple/Compaq walczƒÖ. Timing trudny, ekstremalna zmienno≈õƒá ¬±40%.','neutral'],
          // Marzec 1991 - Gulf War victory
          buy_cyclicals_91:[R(70,170),'Zak≈Çad na odbicie ‚Äì sp√≥≈Çki cykliczne rosnƒÖ, ale timing trudny! Recesja niesko≈Ñczona. Bezrobocie 7%. Mo≈ºliwe fa≈Çszywe starty.','profit'], buy_tech_91:[R(90,220),'MSFT, Intel start boomu... ALE wyceny ju≈º wysokie! Zaciƒôta konkurencja. Ryzyko realizacji. Trzeba cierpliwo≈õci 3-5 lat.','profit'], stay_defensive_91:[R(-70,50),'PU≈ÅAPKA! Za ostro≈ºnie = przegapiasz najlepszƒÖ bessƒô dekady. Koszt utraconych okazji GIGANTYCZNY. Strach parali≈ºuje.','neutral'], buy_international_91:[R(30,110),'Europa/Japonia korzystajƒÖ z dywidendy pokojowej teoretycznie. Ale ich gospodarki s≈Çabe, problemy strukturalne. USA wygrywa.','profit'],
          // Luty 1994 - Fed tightening
          rotate_value_94:[R(55,140),'Warto≈õciowe sp√≥≈Çki radzƒÖ sobie lepiej przy zaostrzeniu trochƒô. Ale timing rotacji trudny, pu≈Çapek warto≈õci mn√≥stwo. Potrzebne umiejƒôtno≈õci wyboru akcji.','profit'], short_bonds_94:[R(65,160),'Masakra obligacji -9% w 1994! Gra na spadki dzia≈Ça ALE brutalne wymogi depozytowe, ograniczona d≈∫wignia. Op≈Çaty maklera 4%.','profit'], buy_em_94:[R(-280,60),'WIELKA PU≈ÅAPKA! Rynki wschodzƒÖce zdziesiƒÖtkowane przez Fed + kryzys Tequila w Meksyku. Zaraza w Azji/Ameryce ≈Åaci≈Ñskiej. Mo≈ºe straciƒá -50%. KATASTROFA!','loss'], hold_tech_94:[R(30,120),'Korekta tech -15% kr√≥tkoterminowo boli. D≈Çugoterminowo OK ale trzeba wytrzymaƒá spadek. Wielu inwestor√≥w kapituluje.','profit'],
          // Lipiec 1995 - Goldilocks
          buy_index_95:[R(35,90),'Inwestowanie pasywne rosnƒÖcym trendem. Solidny wyb√≥r ale timing rynku ma znaczenie. Wyceny ju≈º wysokie P/E 18.','profit'], buy_scv_95:[R(25,100),'Ma≈Çe warto≈õciowe sp√≥≈Çki dzia≈ÇajƒÖ... ale niska p≈Çynno≈õƒá, szerokie spready 2-4%. Wiele mikro-sp√≥≈Çek = pu≈Çapki warto≈õci.','profit'], buy_telco_95:[R(-80,50),'Obawy o zad≈Çu≈ºenie telekomunikacji POWA≈ªNE! Chaos deregulacji. Oszustwo WorldCom przed nami. Niepewno≈õƒá podzia≈Çu AT&T. Ryzyko!','neutral'], stay_def_95:[R(-45,25),'Za konserwatywnie = przegapiasz 5-letni mega boom tech! Najwiƒôkszy koszt utraconych okazji dekady. Mo≈ºe ca≈Çkowicie -50% relatywnie.','neutral'],
          // Lipiec 1996 - Irrational exuberance
          allin_tech_96:[R(110,290),'Nowa gospodarka DZIA≈ÅA 4 lata! Mega zyski... ALE zmienno≈õƒá ¬±30%, korekty -20% brutalne. Timing wyj≈õcia = niemo≈ºliwy. Mo≈ºe byƒá krach 2000.','profit'], heed_greenspan_96:[R(-180,40),'WIELKA PU≈ÅAPKA! "Irracjonalny entuzjazm" ALE 4 lata boomu przed nami! Wyj≈õcie za wcze≈õnie = przegapiasz +300% zwrot√≥w. Najgorszy timing!','loss'], balanced_96:[R(45,130),'Zr√≥wnowa≈ºone podej≈õcie rozsƒÖdne ale koszt utraconych okazji. Tech dominuje. Rebalansowanie = ciƒÖg≈Ça sprzeda≈º zwyciƒôzc√≥w. FrustrujƒÖce.','profit'], international_96:[R(20,85),'Dywersyfikacja miƒôdzynarodowa OK teoretycznie. ALE kryzys azjatycki 1997 przed nami! Europa/Japonia wypadajƒÖ gorzej ni≈º USA masywnie.','profit'],
          // Pa≈∫dziernik 1997 - Asian crisis
          buy_dip_97:[R(35,100),'Oddzielenie USA dzia≈Ça... ale ryzyko zarazy realne! LTCM przed nami 1998. Szybkie odbicie ale zmienno≈õƒá. Timing kszta≈Çtu V trudny.','profit'], bonds_97:[R(5,45),'Ucieczka do bezpiecznej przystani. P≈Çytki zysk, rentowno≈õci ju≈º niskie. Ograniczona duracja. Lepiej ni≈º akcje ale nieinspirujƒÖce.','neutral'], short_em_97:[R(45,130),'Masakra rynk√≥w wschodzƒÖcych Tajlandia/Korea/Indonezja! Gra na spadki dzia≈Ça ALE p≈Çynno≈õƒá wysycha, trudno zamknƒÖƒá pozycje. Ryzyko kontrahenta.','profit'], gold_97:[R(-50,20),'Z≈Çoto P≈ÅASKIE - najgorszy przypadek! Silny dolar, dezinflacja. Banki centralne sprzedajƒÖ rezerwy. Martwy aktyw pod koniec lat 90.','neutral'],
          // Sierpie≈Ñ 1998 - LTCM
          buy_after_fed_98:[R(45,120),'Ratowanie LTCM przez Fed = zwy≈ºkowe! "Nie walcz z Fed" dzia≈Ça... ale timing trudny. Zaraza rosyjskiego bankructwa. Ekstremalna zmienno≈õƒá.','profit'], hold_98:[R(-35,20),'Got√≥wka "bezpieczna" ale tracisz gwa≈Çtowne wzrosty 1999-2000! Koszt utraconych okazji OGROMNY. Najlepszy bieg byka fina≈Çu przed nami.','neutral'], short_fin_98:[R(-180,80),'PU≈ÅAPKA! Grasz na spadki finansowych w kryzysie LTCM... ale ratowanie Fed = BRUTALNE przymusowe zamkniƒôcie pozycji! ≈ªƒÖdania dop≈Çat. Mo≈ºe bankructwo.','neutral'], buy_momo_98:[R(25,130),'Tech momentum do 2000 dzia≈Ça... ALE spadki -30% po drodze. Stalowe nerwy potrzebne. Timing wyj≈õcia niemo≈ºliwy.','profit'],
          // Maj 1999 - Mania acceleration
          join_mania_99:[R(90,250),'Strach przed przegapieniem uzasadniony - jeszcze 10 miesiƒôcy! ALE zmienno≈õƒá SZALONA ¬±50%! Timing wyj≈õcia = loteria. Mo≈ºesz zostaƒá z torbƒÖ.','profit'], quality_tech_99:[R(75,190),'MSFT, Cisco jako≈õƒá... przetrwajƒÖ krach d≈Çugoterminowo. ALE kr√≥tkoterminowo -80% spadek 2000-02! Trzeba wytrzymaƒá 3 lata.','profit'], rotate_out_99:[R(-200,30),'WIELKA PU≈ÅAPKA! Rotacja za wcze≈õnie = przegapiasz fina≈Çowy paraboliczny wzrost +150%! Najgorszy timing. Patrzenie z boku = agonia.','loss'], hedge_puts_99:[R(40,130),'Ubezpieczenie opcjami sprzeda≈ºy MƒÑDRE teoretycznie... ale rozpad warto≈õci czasowej -5%/miesiƒÖc! Zanik premii brutalny. Timing musi byƒá PERFEKCYJNY.','profit'],
          // Grudzie≈Ñ 1999 - Y2K peak
          allin_dotcom_99:[R(-600,250),'ABSOLUTNY SZCZYT! 3 miesiƒÖce przed -80% krachem! Wszystko na jednƒÖ kartƒô = KATASTROFA! Pets.com, Webvan bankrutujƒÖ. Mo≈ºe straciƒá WSZYSTKO.','neutral'], rot_value_99:[R(35,110),'Perfekcyjny timing teoretycznie ‚Äì warto≈õciowe wygra 2000-07. ALE kr√≥tkoterminowy b√≥l patrzƒÖc na tech +40% Q1 2000. Nerwy!','profit'], rebal_99:[R(25,80),'Mechaniczna dyscyplina rebalansowania ratuje przed katastrofƒÖ. ALE emocjonalnie trudne sprzedawaƒá zwyciƒôzc√≥w. Presja otoczenia.','profit'], short_hyper_99:[R(65,180),'Pƒôkniƒôcie ba≈Ñki 3 mies przed nami! Gra na spadki PERFEKCYJNY timing... ALE stycze≈Ñ-marzec 2000 sza≈Ç wzrost√≥w +40% = ≈ºƒÖdania dop≈Çat! Mo≈ºe bankructwo przed zyskiem.','profit'],
          // DotCom
          // Sierpie≈Ñ 1998 - PoczƒÖtek manii
          allin_dotcom_98:[R(90,300),'Wcze≈õnie w 1998 = masywne zyski do marca 2000... ALE trzeba wyj≈õƒá IDEALNIE! Timing wyj≈õcia = niemo≈ºliwy. Wiƒôkszo≈õƒá odda zyski z powrotem.','profit'], buy_bluechip_tech_98:[R(110,250),'MSFT, Intel, Cisco wygrywajƒÖ 1998-2000... potem -80% krach! Trzeba wytrzymaƒá 2 lata bessy. Potrzebne diamentowe rƒôce.','profit'], buy_value_98:[R(-150,80),'WIELKA PU≈ÅAPKA! Warto≈õciowe radzi sobie BRUTALNIE gorzej 1998-2000. Presja otoczenia ogromna. Mo≈ºe byƒá -40% relatywnie. Ryzyko kariery!','neutral'], bonds_caution_98:[R(-100,25),'Ostro≈ºno≈õƒá = KATASTROFA! Przegapi≈Çe≈õ 2 lata +150% boomu. Najgorszy koszt utraconych okazji dekady. Patrzenie z boku = tortura.','loss'],
          // Stycze≈Ñ 1999 - IPO mania
          flip_ipos_99:[R(140,350),'Obracanie IPO to jackpot 1999... ALE potrzebny dostƒôp dla wtajemniczonych! Zwykli inwestorzy dostajƒÖ resztki. Ryzyko wyga≈õniƒôcia blokady. 90% IPO upada p√≥≈∫niej.','profit'], quality_growth_99:[R(90,220),'Amazon jako≈õƒá d≈Çugoterminowo +10000%... ALE -95% spadek 2000-01! $100 ‚Üí $5! Trzeba wytrzymaƒá 7 LAT bessy!','profit'], old_economy_99:[R(-180,50),'MEGA PU≈ÅAPKA! Stara gospodarka (banki, energia) CA≈ÅKOWICIE ignorowana. Przegapiasz tech +300%! Mo≈ºe -50% wynik relatywny. Samob√≥jstwo kariery!','loss'], cash_out_99:[R(-220,30),'Wyp≈Çata got√≥wki 1999 = KATASTROFA! Za wcze≈õnie - Nasdaq jeszcze +85%! Najwiƒôkszy strach przed przegapieniem w historii. Tracisz $100k ‚Üí $500k mo≈ºliwe.','loss'],
          // Marzec 2000 - SZCZYT
          buy_ipos_00:[R(-650,120),'ABSOLUTNY SZCZYT! IPO na szczycie ba≈Ñki = 99% wraca do $0! Pets.com $11‚Üí$0. Webvan $34‚Üí$0. CA≈ÅKOWITE WYKO≈ÉCZENIE mo≈ºliwe!','loss'], rot_quality_00:[R(25,100),'Jako≈õciowe zyskowne przetrwajƒÖ... ale -60% spadek! MSFT $60‚Üí$20. Timing trudny, b√≥l 2 lata. Wiƒôkszo≈õƒá kapituluje.','profit'], rot_value_00:[R(35,120),'Rotacja w warto≈õciowe PERFEKCYJNY timing teoretycznie! Ale patrzenie na Nasdaq +40% marzec boli. Presja otoczenia = rezygnacja ze strategii.','profit'], short_extreme_00:[R(65,190),'Szalone P/S 50x za≈Çamanie! Gra na spadki ≈õwietna... ALE marzec fina≈Çowy sza≈Ç wzrost√≥w +25% = ≈ºƒÖdania dop≈Çat BRUTALNE! Mo≈ºe zlikwidowaƒá przed zyskiem.','profit'],
          // Kwiecie≈Ñ 2000 - Pierwsze pƒôkniƒôcie
          buy_dip_dotcom_00:[R(-550,50),'PU≈ÅAPKA STULECIA! "Kupuj do≈Çek" = ≈Çapanie spadajƒÖcego no≈ºa! To NIE do≈Çek, to poczƒÖtek -78% krachu! 2 lata bessy. KATASTROFA!','loss'], sell_unprofitable_00:[R(90,200),'Niezyskowne ‚Üí $0 ≈õwietna selekcja! ALE timing wyj≈õcia trudny, p≈Çynno≈õƒá wysycha. Mo≈ºesz utknƒÖƒá -50% zanim sprzedasz.','profit'], rotate_defensive_00:[R(45,120),'Defensywa chroni w bessie czƒô≈õciowo. ALE wzrosty w bessie +40% = tortura strachu przed przegapieniem. Trudne psychologicznie.','profit'], short_nasdaq_00:[R(110,270),'Perfekcyjny timing Nasdaq -78%! ALE wzrosty w bessie +50% = ≈ºƒÖdania dop≈Çat! Broker mo≈ºe zamknƒÖƒá. Potrzebne diamentowe rƒôce.','profit'],
          // Listopad 2000 - Kapitulacja funding
          hold_bag_00:[R(-420,25),'Trzymaj i m√≥dl siƒô = ZOSTA≈ÅE≈ö Z TORBƒÑ! Finansowanie wysycha, startupy bankrutujƒÖ codziennie. Mo≈ºe -90% totalnie. Najbardziej bolesna decyzja. B≈ÇƒÖd utopionego kosztu.','loss'], move_cash_00:[R(10,55),'Kapita≈Ç zachowany mƒÖdrze... ale koszty transakcji 3%, podatki 20-35% od zysk√≥w kapita≈Çowych. Nie idealnie ale prze≈ºywasz.','neutral'], buy_prof_00:[R(-80,90),'Zyskowne sp√≥≈Çki te≈º SPADAJƒÑ -40%! Zaraza wszƒôdzie. EBAY, Yahoo mocno oberwa≈Çy. "Jako≈õƒá" nie chroni kr√≥tkoterminowo.','neutral'], hedge_00:[R(25,75),'Zabezpieczenie/gra na spadki pomaga amortyzowaƒá b√≥l... ale po≈õlizg beta, koszty rebalansowania, b≈ÇƒÖd ≈õledzenia. Nie perfekcyjne zabezpieczenie.','profit'],
          // Czerwiec 2001 - Bankruptcy wave
          tech_bounce_01:[R(-200,100),'PU≈ÅAPKA odbicia martwego kota! Wzrost +30% w maju... potem -50% dalej! 9/11 przed nami. Timing = niemo≈ºliwy. Szarpanie brutalne.','neutral'], telecom_value_01:[R(-480,25),'MEGA KATASTROFA! Telecom "warto≈õciowy" = PU≈ÅAPKA WARTO≈öCI! WorldCom $64‚Üí$0 oszustwo! Enron, Global Crossing bankrut. Ca≈Çkowite wyko≈Ñczenie!','loss'], safe_haven_01:[R(45,110),'Obligacje/z≈Çoto bezpieczna przysta≈Ñ dzia≈Ça... ale rentowno≈õci ju≈º niskie 5%. Ograniczony wzrost. Koszt utraconych okazji patrzƒÖc na odbicie tech +30%.','profit'], international_01:[R(-140,65),'Dywersyfikacja miƒôdzynarodowa PORA≈ªKA! Europa/Azja tech te≈º krach -60%. Zaraza globalna. Zabezpieczenie walutowe kosztuje 2-3%.','neutral'],
          // Wrzesie≈Ñ 2001 - 9/11
          buy_defense_01:[R(25,75),'Wykonawcy obronni d≈Çugoterminowo OK... ale KR√ìTKOTERMINOWO panika -20%! Rynki zamkniƒôte 4 dni. P≈Çynno≈õƒá zerowa. Timing wyj≈õcia trudny.','profit'], short_travel_01:[R(45,120),'Linie lotnicze/turystyka zdziesiƒÖtkowane -50%! Gra na spadki dzia≈Ça... ALE ratowanie przez rzƒÖd! Ratunek UAL, mo≈ºe przymusowe zamkniƒôcie pozycji. Ryzyko kontrahenta.','profit'], hold_cash_01:[R(-30,25),'Got√≥wka "bezpieczna" w panice 9/11... ale tracisz odbicie od dna w kszta≈Çcie V +20% w 3 tygodnie! Awaryjne obni≈ºki Fed. Najgorszy timing wyj≈õcia.','neutral'], buy_quality_01:[R(-90,80),'PU≈ÅAPKA! Jako≈õciowe sp√≥≈Çki nadal spadajƒÖ -30% po 9/11! Recesja siƒô pog≈Çƒôbia. Skandal Enron. Zaufanie znika. B√≥l trwa.','neutral'],
          // Lipiec 2002 - WorldCom/Enron
          capitulate_02:[R(-150,40),'KAPITULACJA 2 miesiƒÖce przed DNO! Najgorszy timing w historii! Sprzedajesz $20, odbija do $80. Maksymalny b√≥l. Emocjonalny wrak.','loss'], bluechips_only_02:[R(55,150),'Najbardziej warto≈õciowe MSFT/Intel przetrwajƒÖ OK... ale -60% ju≈º miniony spadek! Timing dna trudny. Mo≈ºe czekaƒá 6 mies przed wzrostem.','profit'], value_cashflow_02:[R(65,170),'Rotacja przep≈Çywy pieniƒô≈ºne/warto≈õƒá dzia≈Ça d≈Çugoterminowo! ALE oszustwa korporacyjne wszƒôdzie = zaufanie zerowe. Skandale ksiƒôgowe. Wysokie ryzyko.','profit'], bonds_only_02:[R(25,65),'Obligacje bezpieczne... ale rentowno≈õƒá tylko 4%. Przegapiasz wzrost tech +100% 2003-04! Masywny koszt utraconych okazji. Patrzenie ze strachem przed przegapieniem.','neutral'],
          // Pa≈∫dziernik 2002 - DNO
          buy_leaders_02:[R(35,120),'Ocaleni AMZN/GOOG = ostatecznie +10000%... ALE trzeba wytrzymaƒá 5-7 LAT! Wielu siƒô poddaje. Spadki -30% po drodze. Diamentowe rƒôce.','profit'], buy_value_02:[R(35,110),'Rotacja warto≈õciowe przep≈Çywy > szum dzia≈Ça... ale timing dna TRUDNY! Mo≈ºliwe fa≈Çszywe starty. Wzrosty w bessie +25% szarpiƒÖ torturƒÖ.','profit'], stay_bonds_02:[R(-20,35),'Obligacje "bezpieczne" ale przegapiasz +100% wzrost tech 2003-07! Najwiƒôksza zmarnowana okazja. Patrzenie z boku = agonia.','neutral'], penny_02:[R(-350,180),'PU≈ÅAPKA! Akcje groszowe $0.10 hazard = 95% bankrutuje! Mo≈ºe +500% ALE mo≈ºe ca≈Çkowita strata. Czysta spekulacja. Los na loterii.','neutral'],
          // Black Monday 1987
          // Stycze≈Ñ 1987 - Reagan Bull Market
          stay_invested_87:[R(-280,80),'PU≈ÅAPKA szczytu! Zosta≈Çe≈õ w pe≈Çni zainwestowany przed -22% krachem w JEDEN DZIE≈É! Ubezpieczenie portfela zawodzi. Bezpieczniki zerowe. B√ìL!','loss'], take_profits_early_87:[R(45,110),'MƒÖdra ostro≈ºno≈õƒá zachowa≈Ça kapita≈Ç... ale tracisz wzrost stycze≈Ñ-sierpie≈Ñ +35%! Koszt utraconych okazji. Timing szczytu = niemo≈ºliwy.','profit'], buy_insurance_87:[R(75,160),'Ubezpieczenie opcjami sprzeda≈ºy pomog≈Ço... ALE premie 5-8% zjad≈Çy czƒô≈õƒá! Rozpad warto≈õci czasowej brutalny. Trzeba perfekcyjny timing realizacji.','profit'], leverage_long_87:[R(-550,40),'KATASTROFA! D≈∫wignia 2-3x przed krachem = ≈ªƒÑDANIE DOP≈ÅAT! -22% x d≈∫wignia = mo≈ºe -60%! Broker likwiduje. CA≈ÅKOWITE WYKO≈ÉCZENIE mo≈ºliwe!','loss'],
          // Kwiecie≈Ñ 1987 - Volcker/Greenspan transition
          bet_greenspan_87:[R(-180,90),'PU≈ÅAPKA! Greenspan ≈Çagodny d≈Çugoterminowo... ALE krach za 6 miesiƒôcy NAJPIERW! -22% jednego dnia. Zostaƒá w pe≈Çni zainwestowanym = ruina.','neutral'], hedge_dollar_87:[R(35,95),'Zabezpieczenie z≈Çoto/waluta pomog≈Ço czƒô≈õciowo. Ale ryzyko bazowe, koszty rolowania 3-4%. Dolar umacnia siƒô w krachu. Nie perfekcyjne zabezpieczenie.','profit'], reduce_exposure_87:[R(25,85),'Ostro≈ºno≈õƒá zmniejszy≈Ça ekspozycjƒô... ale timing trudny. Mo≈ºe wyj≈õcie za wcze≈õnie tracisz +20%. Mo≈ºe za p√≥≈∫no -10%. StresujƒÖce.','profit'], bonds_caution_87:[R(15,65),'Obligacje bezpieczniejsze ni≈º akcje w krachu... ale rentowno≈õci 8% ju≈º wysokie. Ograniczony wzrost. Tracisz wzrost akcji po krachu +30%.','profit'],
          // Sierpie≈Ñ 1987 - Szczyt ATH
          stay_bull_87:[R(-320,30),'MEGA PU≈ÅAPKA szczytu rekord wszechczas√≥w! "Bessa wspina siƒô po ≈õcianie obaw" ALE -22% krach za 2 miesiƒÖce! Ubezpieczenie portfela = iluzja. RUINA!','loss'], buy_puts_87:[R(90,180),'Ochrona opcjami sprzeda≈ºy zadzia≈Ça≈Ça... ALE premia 6-9%! Rozpad warto≈õci czasowej. Timing wyga≈õniƒôcia KRYTYCZNY. Mo≈ºe wygasnƒÖƒá bezwarto≈õciowo dzie≈Ñ przed krachem!','profit'], rotate_bonds_87:[R(25,65),'Obligacje uciek≈Çy przed burzƒÖ OK. Ale koszt utraconych okazji tracisz sierpie≈Ñ wzrost +8%. Timing rotacji = stresujƒÖce zgadywanie.','profit'], short_fut_87:[R(100,220),'Gra na spadki kontrakt√≥w przed krachem trafiona! ALE wymogi depozytu 10-20%! Wycena rynkowa codzienna = mo≈ºliwe ≈ºƒÖdania dop≈Çat przed zyskiem.','profit'],
          // Wrzesie≈Ñ 1987 - Pierwsze pƒôkniƒôcia
          buy_dip_sept_87:[R(-320,50),'WIELKA PU≈ÅAPKA! "Kupuj korekkcjƒô" = ≈Çapanie spadajƒÖcego no≈ºa! To NIE korekta, to poczƒÖtek -22% JEDNEGO dnia krach! KATASTROFA!','loss'], increase_hedges_87:[R(80,170),'Zabezpieczenia timing PERFEKCYJNY teoretycznie! ALE koszty 5-7%, wymogi depozytu brutalne. Mo≈ºe likwidacja przed zyskiem. Ryzyko realizacji.','profit'], move_cash_87:[R(45,95),'Wyj≈õcie w got√≥wkƒô przed krachem mƒÖdre... ale koszty transakcji 2-3%, podatki od zysk√≥w kapita≈Çowych 28%! Zysk netto mniejszy ni≈º siƒô wydaje.','profit'], short_aggressive_87:[R(110,250),'Agresywna gra na spadki przed krachem mo≈ºe jackpot... ALE zasada uptick, lokalizacja akcji, koszty po≈ºyczki 8-12%. ≈ªƒÖdania dop≈Çat MO≈ªLIWE!','profit'],
          // 16 Pa≈∫dziernika - PiƒÖtek
          sell_friday_87:[R(65,120),'≈öwietna decyzja wyj≈õcie przed CZARNYM PONIEDZIA≈ÅKIEM! ALE p≈Çynno≈õƒá wysycha -5% piƒÖtek. Mo≈ºesz utknƒÖƒá -3% realizacja. Po≈õlizg brutalny.','profit'], buy_dip_87:[R(-480,40),'ABSOLUTNA PU≈ÅAPKA! Kupujesz piƒÖtek spadek -5%... PONIEDZIA≈ÅEK -22% WIƒòCEJ! ≈ÅƒÖcznie mo≈ºe -27%! ≈Åapanie spadajƒÖcego fortepianu. RUINA TOTALNA!','loss'], hold_87:[R(-350,25),'Trzymanie piƒÖtek = KATASTROFA! -22% poniedzia≈Çek! Ubezpieczenie portfela ZAWODZI - kaskadowa sprzeda≈º! P≈Çynno≈õƒá ZERO. Telefony nie dzia≈ÇajƒÖ!','loss'], more_puts_87:[R(140,250),'Podwojenie opcji sprzeda≈ºy GENIALNY timing! ALE wyga≈õniƒôcie mo≈ºe byƒá z≈Çe, r√≥≈ºnica kupno-sprzeda≈º 30-50% w panice! Koszmar realizacji.','profit'],
          // 19 Pa≈∫dziernika - BLACK MONDAY
          panic_sell_87:[R(-280,15),'PANICZNA SPRZEDA≈ª przy -22% = NAJGORSZE CENY W HISTORII! P≈Çynno≈õƒá ZERO! Telefony nie dzia≈ÇajƒÖ! R√≥≈ºnica kupno-sprzeda≈º 5-10%! Realizacja -25% ca≈Ço≈õƒá. KOSZMAR!','loss'], buy_crash_87:[R(100,230),'Kupno w Czarny Poniedzia≈Çek LEGENDARNE przeciwstawne! ALE p≈Çynno≈õƒá zero, mo≈ºe siƒô nie zrealizowaƒá! Straszny Wtorek -8% wiƒôcej mo≈ºliwe! Nerwy stalowe!','profit'], wait_stable_87:[R(35,85),'Cierpliwo≈õƒá ciƒô≈ºka emocjonalnie... -22% patrzenie. Straszny Wtorek mo≈ºe byƒá gorszy! Timing dna = niemo≈ºliwa gra w zgadywanie.','profit'], short_more_87:[R(-200,110),'PU≈ÅAPKA! WIƒòCEJ gry na spadki w Czarny Poniedzia≈Çek = interwencja Fed! Straszny Wtorek +5% wzrost = BRUTALNE przymusowe zamkniƒôcie pozycji! ≈ªƒÖdanie dop≈Çat!','neutral'],
          // 20 Pa≈∫dziernika - Wtorek (Terrible Tuesday)
          sell_rally_87:[R(-150,40),'PU≈ÅAPKA! Sprzedajesz wtorek wzrost +5%... ale to INTERWENCJA FED! P≈Çynno≈õƒá Greenspana! Tracisz +15% odbicie w miesiƒÖc. Z≈Çy timing wyj≈õcia!','loss'], buy_fed_put_87:[R(75,180),'P≈Çynno≈õƒá Fed timing PERFEKCYJNY! "Nie walcz z Fed"... ALE zmienno≈õƒá ¬±8% dziennie TYGODNIE! Mo≈ºe szarpniƒôcie -15% przed +30%. Diamentowe rƒôce!','profit'], wait_confirm_87:[R(20,75),'Ostro≈ºne czekanie... ale tracisz poczƒÖtkowe dno w V +10% w 3 dni! Okno interwencji Fed wƒÖskie. Timing = loteria. Maksymalna frustracja.','neutral'], double_short_87:[R(-380,45),'KATASTROFA podw√≥jna gra na spadki! INTERWENCJA Fed bezpieczniki nadchodzƒÖ! Przymusowe zamkniƒôcie pozycji +20% Straszny Wtorek! CA≈ÅKOWITE WYKO≈ÉCZENIE ≈ªƒÑDANIAMI DOP≈ÅAT!','loss'],
          // Grudzie≈Ñ 1987 - Odbicie
          buy_quality_87:[R(55,140),'Jako≈õciowe blue chips odbicie OK... ale zmienno≈õƒá ¬±5% dziennie trwa! Mo≈ºliwe fa≈Çszywe starty. Timing trudny. Psychologia = wrak.','profit'], buy_tech_87:[R(45,120),'Tech MSFT ro≈õnie d≈Çugoterminowo... ALE kr√≥tkoterminowo szarpniƒôcia ¬±10%! Wielu inwestor√≥w kapituluje po urazach Czarnego Poniedzia≈Çku. Nerwy testowane.','profit'], stay_def_87:[R(10,50),'Defensywa "bezpieczna" ale tracisz wzrost odbicia +15%! Koszt utraconych okazji patrzƒÖc. Tortura strachu przed przegapieniem po traumie Czarnego Poniedzia≈Çku.','neutral'], keep_cash_87:[R(-40,25),'Got√≥wka = tracisz NAJWIƒòKSZƒÑ okazjƒô odbicia! Dno w V +20% w 2 miesiƒÖce! Parali≈º traumy = najgorsza decyzja. Patrzenie = agonia.','neutral'],
          // Stycze≈Ñ 1988 - Nowa normalno≈õƒá
          allin_recovery_88:[R(65,155),'Bessa wznowiona OK... ALE wszystko na jednƒÖ kartƒô = wysokie ryzyko! Mo≈ºe korekta -10% w ka≈ºdej chwili. Urazy Czarnego Poniedzia≈Çku realne. Podwy≈ºszona zmienno≈õƒá.','profit'], gradual_entry_88:[R(45,115),'U≈õrednianie kosztu rozsƒÖdne po krachu... ale tracisz poczƒÖtkowy wyskok +12%. Timing wej≈õƒá = szczƒô≈õcie. U≈õrednianie ogranicza wzrosty.','profit'], defensive_88:[R(10,50),'Defensywa za konserwatywna! Bessa wraca +20% 1988! Tracisz okazjƒô. Trauma Czarnego Poniedzia≈Çku parali≈ºuje = ograniczenie kariery.','neutral'], wait_better_88:[R(-65,25),'PU≈ÅAPKA czekania! "Lepsze wej≈õcie" NIGDY nie przychodzi! Bessa biega +50% 1988-89! Najgorszy koszt utraconych okazji. Syndrom wiecznej bessy = bankructwo.','neutral'],
          // GFC 2008
          // Sierpie≈Ñ 2007 - BNP Paribas
          short_mbs_07:[R(75,180),'Za≈Çamanie kredyt√≥w hipotecznych ‚Äì gra na spadki dzia≈Ça, ALE koszty po≈ºyczki 8-12%, brutalne wymogi depozytowe! Timing trudny.','profit'], move_quality_07:[R(10,40),'Jako≈õƒá daje poduszkƒô, ale nie chroni. GE, Citi te≈º upadajƒÖ! Koszty transakcji 2-3%. S≈Çaba ochrona.','neutral'], ignore_07:[R(-250,30),'WIELKA PU≈ÅAPKA! To nie by≈Ço ‚Äûlokalne" ‚Äì globalna zaraza! Lehman przed nami -99%. Mo≈ºe straciƒá -60% ca≈Ço≈õƒá!','loss'], gold_07:[R(15,55),'Z≈Çoto ro≈õnie, ale zmienno≈õƒá ¬±15%! Mar≈ºe dealer√≥w 6-8%, koszty magazynowania. Nie tak solidne jak my≈õla≈Çe≈õ.','profit'],
          // Stycze≈Ñ 2008 - Recesja
          sell_recession_08:[R(50,120),'UniknƒÖ≈Çe≈õ najgorszego ‚Äì mƒÖdra decyzja. ALE koszty transakcji 3%, podatki od zysk√≥w kapita≈Çowych 25%! Zysk mniejszy.','profit'], buy_dip_recession:[R(-280,40),'PU≈ÅAPKA STULECIA! To nie by≈Ç spadek ‚Äì poczƒÖtek bessy -57%! Bear Stearns, Lehman, AIG bankrut przed nami! KATASTROFA!','loss'], rotate_defensive_08:[R(25,80),'Defensywa pomog≈Ça, ale te≈º spad≈Ça -30%! Nawet u≈ºyteczno≈õƒá publiczna cierpi. Recesja zabija wszystko. S≈Çaba ochrona.','profit'], diversify_international_08:[R(-180,30),'MEGA PU≈ÅAPKA! Miƒôdzynarodowe te≈º upad≈Çy GORZEJ! Banki europejskie -80%, Islandia bankrut! Globalna zaraza! RUINA!','loss'],
          // Marzec 2008 - Bear Stearns
          buy_banks_08:[R(-380,80),'ABSOLUTNA PU≈ÅAPKA! Za wcze≈õnie ‚Äì Lehman, Wachovia, WaMu jeszcze upadnƒÖ! Mo≈ºe -90% total! Catching falling knife! RUINA!','loss'], short_fin_08:[R(50,160),'Investment banks collapse ‚Äì short dzia≈Ça, ALE uptick rule, borrow costs 10-15%, SEC ban mo≈ºliwy! Execution trudna.','profit'], cash_08:[R(5,25),'Kapita≈Ç zachowany ‚Äì cash is king. ALE inflation 4%, opportunity cost. Money market funds freeze risk! Nie idealnie.','neutral'], def_08:[R(-65,40),'PU≈ÅAPKA! Defensywy te≈º spadajƒÖ -25%! Utilities cierpiƒÖ, dividend cuts! "Bezpiecze≈Ñstwo" to iluzja w kryzysie!','neutral'],
          // Lipiec 2008 - Fannie/Freddie
          short_regional_banks:[R(75,190),'Masakra bank√≥w regionalnych ‚Äì gra na spadki dzia≈Ça! ALE wymogi depozytowe 15-20%, ryzyko kontrahenta! Mo≈ºe nie zrealizowaƒá przed zyskiem.','profit'], buy_energy_08:[R(-220,40),'WIELKA PU≈ÅAPKA! Krach ropy z $147 do $40 = -73%! Contango, koszty magazynowania, koszty rolowania zabijajƒÖ! ≈ÅƒÖcznie mo≈ºe -80%! KATASTROFA!','loss'], treasuries_08:[R(35,90),'Obligacje skarbowe jako bezpieczna przysta≈Ñ dzia≈ÇajƒÖ. ALE rentowno≈õci ju≈º niskie 3%, ograniczony potencja≈Ç wzrostu. Koszty transakcji 1-2%. OK ale nie wielkie zyski.','profit'], buy_em_08:[R(-340,20),'MEGA KATASTROFA! Rynki wschodzƒÖce spad≈Çy MOCNIEJ -65%! "Oddzielenie" to mit! Brazylia, Rosja, Chiny wszyscy upadli! RUINA TOTALNA!','loss'],
          // Wrzesie≈Ñ 2008 - Lehman
          panic_sell_gfc:[R(-180,30),'PANICZNA sprzeda≈º 2 miesiƒÖce przed dnem! Kryzys p≈Çynno≈õci, r√≥≈ºnica kupno-sprzeda≈º 8-12%! Realizacja z po≈õlizgiem -15%! Najgorszy timing! KATASTROFA!','loss'], safe_haven_08:[R(15,65),'Z≈Çoto i obligacje skarbowe jedyne schronienie. ALE zmienno≈õƒá z≈Çota ¬±20%, rentowno≈õci obligacji ju≈º 2%. Ograniczone zyski. Koszty 3-4%.','profit'], short_cyc_08:[R(35,100),'Sektor cykliczny zdziesiƒÖtkowany ‚Äì gra na spadki dzia≈Ça! ALE koszty po≈ºyczki 12-18%, brutalne wezwania do uzupe≈Çnienia depozytu, SEC mo≈ºe zakaz gry na spadki! Trudna realizacja.','profit'], stay_cash_08:[R(-20,20),'Got√≥wka "bezpieczna", ale tracisz NAJWIƒòKSZE odbicie! Dno w V +70% w 6 mies! Koszt utraconych okazji OGROMNY! Parali≈º = agonia.','neutral'],
          // Pa≈∫dziernik 2008 - TARP
          capitulate_oct08:[R(-140,20),'KAPITULACJA miesiƒÖc przed dnem! Sprzedajesz po $25, rynek odbija do $70! Paniczna sprzeda≈º, zerowa p≈Çynno≈õƒá! Maksymalny b√≥l! Emocjonalny wrak! KATASTROFA!','loss'], buy_index_oct08:[R(75,190),'Blisko dna ‚Äì odwa≈ºna decyzja! ALE zmienno≈õƒá ¬±10% DZIENNIE! Fa≈Çszywe starty mo≈ºliwe. Trafienie w dno = loteria. Nerwy stalowe potrzebne!','profit'], gold_commodities_08:[R(25,80),'Z≈Çoto ro≈õnie OK, ALE surowce spad≈Çy -60%! Mieszane wyniki. Koszty magazynowania, koszty rolowania. Dywersyfikacja kosztowna.','profit'], wait_clarity_08:[R(5,35),'Czekanie "bezpieczne", ale tracisz +60% wzrost w 5 miesiƒôcy! Strata dekady! Koszt utraconych okazji GIGANTYCZNY! Obserwowanie = tortura.','neutral'],
          // Grudzie≈Ñ 2008 - Citi bailout, ZIRP
          buy_fear_dec08:[R(60,150),'Maksymalny strach blisko dna ‚Äì kupno dzia≈Ça! ALE zmienno≈õƒá ¬±8% dziennie, mo≈ºe fa≈Çszywy start -20%! Timing trudny, potrzebne nerwy stalowe!','profit'], quality_dividend_08:[R(45,125),'Dywidendowa arystokracja przetrwa≈Ça ‚Äì mƒÖdre. ALE wiele CIƒòTO dywidendy! GE i finanse upadajƒÖ! Pu≈Çapki warto≈õci! Selekcja krytyczna.','profit'], bonds_deflation_08:[R(15,55),'Ryzyko deflacji przeszacowane, ale obligacje bezpieczne. Rentowno≈õci ju≈º 2%, ograniczony potencja≈Ç wzrostu. Koszty transakcji 1-2%. OK ale nie wielkie zyski.','profit'], international_dec08:[R(-95,45),'PU≈ÅAPKA! Miƒôdzynarodowe rynki te≈º w bessie -50%! Europa GORZEJ, Azja cierpi! "Dywersyfikacja" nie chroni w globalnym kryzysie! Ryzyko!','neutral'],
          // Luty 2009 - Obama stimulus
          allin_feb09:[R(75,210),'Tu≈º przed dnem ‚Äì brave call dzia≈Ça! ALE mo≈ºe false start -15% before +80%! Volatility extreme ¬±12% daily! Diamond hands needed!','profit'], wait_stress_tests:[R(25,80),'Stress tests da≈Çy clarity ‚Äì kupno po nich OK. ALE tracisz +25% initial surge! Timing op√≥≈∫niony. Opportunity cost watching.','profit'], dividend_aristocrats_09:[R(50,135),'Quality dividends wygrywa d≈Çugoterminowo. ALE short term whipsaw -20%! Wiele dividend cuts! Selekcja stock picking critical!','profit'], stay_defensive_09:[R(15,55),'Defensywa "bezpieczna" ale tracisz +100% rally! Miss greatest bull market decade! Opportunity cost = career limiting! FOMO torture.','neutral'],
          // Marzec 2009 - DNO QE1
          allin_09:[R(95,220),'Legendarny bottom ‚Äì trade dekady! ALE timing PERFEKCYJNY needed! Mo≈ºe byƒá -10% false start before +100%! Nerwy stalowe! Volatility ¬±10% daily!','profit'], buy_value_09:[R(60,145),'Value/financials eksplozja dzia≈Ça! ALE wiele bank stocks -80% from peak! Picking winners critical! Citi mo≈ºe $1, JPM survive. Selekcja trudna!','profit'], stay_bonds_09:[R(5,35),'PU≈ÅAPKA bezpiecze≈Ñstwa! Rally by≈Ç prawdziwy +80%! Przegapi≈Çe≈õ greatest trade! Bonds yields 3%, miss everything. Opportunity cost = agonia!','neutral'], wait_09:[R(-65,25),'WIELKA PU≈ÅAPKA czekania! "Better entry" NIGDY nie przychodzi! Market uciek≈Ç +150%! Worst decision ever! Perma-bear syndrome = bankruptcy!','neutral'],
          // COVID 2020
          // Stycze≈Ñ 2020 - Wuhan lockdown
          ignore_wuhan:[R(-140,80),'Nie by≈Ço lokalnym problemem ‚Äì globalna pandemia.','loss'], buy_vix_hedge_covid:[R(280,620),'VIX do 80 ‚Äì perfect hedge!','profit'], short_cruises_early:[R(320,680),'Cruise lines -90% ‚Äì legendarny short!','profit'], rotate_tech_jan:[R(180,420),'Stay home = tech boom early!','profit'],
          // Luty 2020 - Pierwsze alarmy
          ignore_covid:[R(-180,40),'To nie by≈Ça przesada ‚Äì lockdowny sparali≈ºowa≈Çy ≈õwiat.','loss'], short_travel_covid:[R(240,480),'Linie lotnicze i hotele w ruinie ‚Äì idealny short!','profit'], buy_tech_covid:[R(180,420),'Zoom, Netflix ‚Äì pandemia ich wynagradza!','profit'], rotate_def_covid:[R(40,100),'Defensywa chroni przed najgorszym.','profit'],
          // Marzec 2020 - PANIKA
          sell_all_covid:[R(-80,40),'Sprzeda≈Çe≈õ dno ‚Äì najszybsze odbicie w historii.','loss'], buy_dip_covid:[R(300,650),'Fed zadrukowuje biliony ‚Äì genialne kupno!','profit'], buy_safe_haven_covid:[R(120,280),'Z≈Çoto i Bitcoin wystrzeli≈Çy.','profit'], allin_tech_covid:[R(280,580),'Tech dominuje ‚Äì Zoom +600%, Tesla +800%!','profit'],
          // Kwiecie≈Ñ 2020 - Fed BRRR
          buy_index_fed_put:[R(240,520),'Fed put = free money ‚Äì rynek +80%!','profit'], buy_distressed_covid:[R(-120,280),'Bankruptcy complex ‚Äì niekt√≥re 0, inne 10x.','neutral'], stay_cash_wave2:[R(-80,60),'Druga fala by≈Ça, ale rynek ignorowa≈Ç.','loss'], buy_commodities_covid:[R(80,240),'Inflation trade delayed, ale pop≈Çaci≈Ç.','profit'],
          // Maj 2020 - Robinhood traders
          join_meme_party:[R(-180,420),'Hertz bankrut, ale +900% ‚Äì szale≈Ñstwo!','neutral'], fade_rally_may:[R(-220,80),'Rally trwa≈Ç 18 miesiƒôcy ‚Äì ≈∫le wyczu≈Çe≈õ.','loss'], quality_tech_may:[R(220,480),'FAANG, MSFT, NVDA ‚Äì solid winners.','profit'], gold_inflation_hedge:[R(80,220),'Z≈Çoto do $2070, potem flat.','profit'],
          // Lipiec 2020 - Tech bubble 2.0
          double_tech_wfh:[R(180,420),'WFH permanent ‚Äì tech nadal wygrywa.','profit'], rotate_value_july:[R(60,220),'Za wcze≈õnie, ale value 2021 eksplodowa≈Ço.','profit'], short_office_reits:[R(180,380),'Office REITs w ruinie ‚Äì remote work wins!','profit'], equal_weight_balance:[R(120,280),'Diversyfikacja dzia≈Ça ‚Äì mniej stresu.','profit'],
          // Wrzesie≈Ñ 2020 - Tesla split
          buy_tech_dip_sept:[R(140,340),'Korekta by≈Ça p≈Çytka ‚Äì tech resume.','profit'], rotate_cyclicals_sept:[R(180,420),'Cyclicals odbicia z vaccine news!','profit'], hedge_puts_sept:[R(100,240),'Puts ochroni≈Çy, ale korekta kr√≥tka.','profit'], diversify_intl_covid:[R(80,220),'International recovery wolniejszy.','profit'],
          // Listopad 2020 - Biden + Pfizer
          rotate_reopening_nov:[R(220,520),'Airlines, hotels, cruises +100%!','profit'], stay_tech_nov:[R(60,180),'Tech flat vs reopening ‚Äì przegapi≈Çe≈õ.','neutral'], scv_rotation_nov:[R(280,620),'Small cap value +50% w 3 miesiƒÖce!','profit'], em_recovery_nov:[R(140,340),'Emerging markets boom ‚Äì commodities up.','profit'],
          // Grudzie≈Ñ 2020 - Szczepionki rollout
          buy_reopening_covid:[R(140,320),'Szczepionki = rotacja. Linie i hotele odbijajƒÖ!','profit'], stay_tech_covid:[R(80,200),'Tech nadal mocny, ale momentum s≈Çabnie.','profit'], buy_crypto_covid:[R(180,480),'Bitcoin do $60k ‚Äì krypto eksploduje!','profit'], rebalance_covid:[R(60,140),'Zr√≥wnowa≈ºony portfel przetrwa ka≈ºdƒÖ burzƒô.','profit'],
          // FTX 2022
          // Kwiecie≈Ñ 2022 - Fed podnosi stopy
          sell_early_2022:[R(180,380),'UniknƒÖ≈Çe≈õ ca≈Çego krachu ‚Äì ≈õwietna decyzja!','profit'], buy_dip_early_2022:[R(-220,80),'To nie by≈Ç dip ‚Äì to poczƒÖtek bessy.','loss'], defi_farming_2022:[R(-380,120),'Yields wyparowa≈Çy z kryzysem ‚Äì liquidation.','loss'], move_stables_2022:[R(-120,180),'UST implodowa≈Ç, USDC OK. Mieszane uczucia.','neutral'],
          // Maj 2022 - Luna implozja
          short_luna:[R(300,600),'Idealny short ‚Äì Luna do zera!','profit'], buy_luna_dip:[R(-450,50),'‚ÄûDo Kwon oszust" ‚Äì strata 99.9%.','loss'], sell_alts_luna:[R(100,200),'UniknƒÖ≈Çe≈õ efektu domina.','profit'], hold_majors_luna:[R(-40,80),'BTC/ETH spad≈Çy, ale przetrwa≈Çy.','neutral'],
          // Czerwiec 2022 - Celsius freeze
          run_cex_celsius:[R(200,420),'Wyp≈Çaci≈Çe≈õ przed zamro≈ºeniem ‚Äì hero move!','profit'], short_cel_token:[R(280,580),'CEL token -99% ‚Äì perfekcyjny short!','profit'], trust_celsius_process:[R(-420,80),'Celsius bankrut, fundusze zniknƒô≈Çy.','loss'], hardware_wallet_move:[R(160,320),'Self-custody uratowa≈Ça Ciƒô!','profit'],
          // Lipiec 2022 - 3AC bankrutuje
          withdraw_cex:[R(120,240),'Uratowa≈Çe≈õ kapita≈Ç przed FTX!','profit'], short_cex_tokens:[R(200,450),'FTT, CEL do zera ‚Äì jackpot!','profit'], cash_wait_ftx:[R(40,100),'Bezpiecznie, czekasz na dno.','neutral'], buy_btc_crash:[R(-80,180),'Jeszcze spadnie, ale d≈Çugoterminowo OK.','neutral'],
          // Sierpie≈Ñ 2022 - Ethereum Merge
          allin_eth_merge:[R(-120,280),'Merge = sell the news. Volatility.','neutral'], sell_merge_news:[R(140,300),'Klasyczny trade ‚Äì sell the news!','profit'], buy_miners_merge:[R(80,240),'Miners kapitulowali, ale przetrwali.','profit'], diversify_stables:[R(80,180),'USDC, DAI bezpieczniejsze od USDT.','profit'],
          // Wrzesie≈Ñ 2022 - Cisza przed burzƒÖ
          accumulate_sept:[R(-80,220),'FTX crash zabola≈Ç, ale d≈Çugoterminowo OK.','neutral'], risk_off_sept:[R(100,220),'MƒÖdra decyzja ‚Äì uniknƒÖ≈Çe≈õ FTX.','profit'], leverage_long_sept:[R(-320,180),'FTX liquidation zniszczy≈Ça long.','loss'], short_setup_sept:[R(180,420),'Perfect setup ‚Äì FTX crash da≈Ç profit!','profit'],
          // Listopad 2022 - FTX implozja
          panic_ftx:[R(-120,40),'Sprzeda≈Çe≈õ tu≈º przed odbiciem.','loss'], self_custody:[R(150,300),'Not your keys, not your coins ‚Äì ocalony!','profit'], short_all_cex:[R(180,380),'Wszystkie gie≈Çdy w ogniu ‚Äì profit!','profit'], avoid_tether:[R(60,140),'USDT przetrwa≈Ç, ale ostro≈ºno≈õƒá pop≈Çaca.','profit'],
          // Grudzie≈Ñ 2022 - SBF aresztowany, Genesis
          short_gbtc:[R(220,480),'GBTC discount -50% ‚Äì ≈õwietny short!','profit'], genesis_contagion:[R(-80,80),'Panika przesadzona, ale bezpiecznie.','neutral'], buy_btc_fundamentals:[R(120,320),'Fundamenty mocne ‚Äì kupno op≈Çaci≈Ço siƒô.','profit'], wait_regulation:[R(40,140),'Czekanie da≈Ço clarity, przegapi≈Çe≈õ dno.','neutral'],
          // Stycze≈Ñ 2023 - Kapitulacja i odbicie
          allin_btc_dno:[R(250,550),'Bitcoin +300% w rok ‚Äì legendarne kupno!','profit'], dca_btc:[R(120,280),'Dollar cost averaging dzia≈Ça.','profit'], wait_10k:[R(-40,60),'Czeka≈Çe≈õ za d≈Çugo ‚Äì Bitcoin odbi≈Ç.','neutral'], quit_crypto:[R(-80,20),'Odpu≈õci≈Çe≈õ przed najwiƒôkszym odbiciem.','loss'],
          // AI Bubble 2023-2025
          buy_nvda:[R(280,650),'Nvidia +600% ‚Äì picks and shovels AI!','profit'], buy_msft_ai:[R(180,420),'Microsoft kontroluje OpenAI ‚Äì solid bet.','profit'], buy_all_ai:[R(220,520),'Magnificent 7 rally ‚Äì wszyscy wygrywajƒÖ!','profit'], wait_ai_correction:[R(-80,60),'Korekta nie przysz≈Ça ‚Äì miss out.','loss'],
          // GPT-4 i Copilot (Marzec 2023)
          buy_msft_copilot:[R(220,480),'Copilot $30/user ‚Äì Microsoft drukuje cash!','profit'], buy_ai_startups:[R(-120,380),'Venture illiquid, ale niekt√≥re 10x.','neutral'], short_old_software:[R(140,320),'Adobe, Salesforce pod presjƒÖ AI.','profit'], buy_google_catchup:[R(80,220),'Google catch-up wolniejszy ni≈º my≈õlano.','profit'],
          // Nvidia earnings (Maj 2023)
          buy_nvda_breakout:[R(320,720),'Momentum niestoppable ‚Äì Nvidia do $3T!','profit'], short_nvda:[R(-420,80),'Walkowanie shorta ‚Äì P/E nie ma znaczenia w hype.','loss'], buy_amd_ai:[R(120,280),'AMD ro≈õnie, ale Nvidia dominuje.','profit'], buy_cloud:[R(140,320),'AWS, Azure, GCP korzystajƒÖ z AI.','profit'],
          // Open source AI (Sierpie≈Ñ 2023)
          bet_opensource:[R(100,280),'Meta Llama 2 mocne, ale OpenAI liderem.','profit'], bet_proprietary:[R(180,420),'Proprietary modele utrzymujƒÖ przewagƒô.','profit'], stick_nvda:[R(240,540),'Nvidia wygrywa niezale≈ºnie od modeli.','profit'], buy_ai_etf:[R(140,340),'Diversyfikacja dzia≈Ça ‚Äì ca≈Çy sektor ro≈õnie.','profit'],
          // Sam Altman drama (Listopad 2023)
          buy_msft_drama:[R(180,380),'Drama rozwiƒÖzana ‚Äì Microsoft wygrywa.','profit'], sell_openai_drama:[R(-120,40),'Sprzeda≈Çe≈õ zanim drama rozwiƒÖzano.','loss'], buy_anthropic_google:[R(100,260),'Claude i Bard rosnƒÖ, ale OpenAI liderem.','profit'], bet_openai:[R(-40,180),'Private market illiquid ‚Äì trudno wyceniƒá.','neutral'],
          // Gemini launch (Grudzie≈Ñ 2023)
          rotate_google:[R(160,380),'Google Gemini konkurencyjny ‚Äì odbicie!','profit'], bet_duopoly:[R(200,480),'MSFT + GOOGL kontrolujƒÖ AI ‚Äì safe bet.','profit'], bet_anthropic:[R(80,280),'Claude dark horse ‚Äì ro≈õnie wolno.','profit'], nvda_picks_shovels:[R(280,620),'Nvidia sprzedaje ≈Çopaty ‚Äì zawsze wygrywa.','profit'],
          // Sora i valuacje (Luty 2024)
          invest_vc_ai:[R(-80,420),'VC high risk ‚Äì niekt√≥re bankrutujƒÖ, inne 100x.','neutral'], public_only:[R(120,300),'Public markets p≈Çynne ‚Äì rozumny wyb√≥r.','profit'], buy_creative_ai:[R(100,260),'Adobe, Canva adaptujƒÖ AI ‚Äì solid.','profit'], cash_out_early:[R(-140,80),'Za wcze≈õnie ‚Äì jeszcze posz≈Ço w g√≥rƒô.','loss'],
          // Ba≈Ñka czy prze≈Çom (Czerwiec 2024)
          take_profits_ai:[R(80,180),'MƒÖdra decyzja ‚Äì zabezpiecz zyski.','profit'], hodl_ai:[R(180,480),'Diamond hands ‚Äì AI rewolucja trwa!','profit'], rotate_infra:[R(140,340),'ASML, TSM ‚Äì infrastruktura AI kluczowa.','profit'], short_ai_bubble:[R(-280,120),'Za wcze≈õnie ‚Äì AI momentum trwa.','loss'],
          // O1 i AI agents (Pa≈∫dziernik 2024)
          double_down_agi:[R(220,580),'AGI coraz bli≈ºej ‚Äì bet of the decade!','profit'], final_profit_take:[R(100,220),'By≈Ça ≈õwietna jazda ‚Äì realizuj.','profit'], buy_energy_ai:[R(180,420),'Uranium, grid infrastructure ‚Äì AI ≈ºre prƒÖd!','profit'], chips_diversify:[R(160,380),'TSMC, ASML, Broadcom ‚Äì ca≈Çy ≈Ça≈Ñcuch ro≈õnie.','profit']
        };
        if(outcomes[effect]){ [moneyChange,message,type]=outcomes[effect]; }
        else { moneyChange = R(-100,120); message='Efekt zale≈ºy od timingu rynku.'; type = moneyChange>0?'profit':(moneyChange<0?'loss':'neutral'); }
        return { moneyChange, message, type };
      }

      function makeChoice(choiceIndex){
        const ch = chapters[currentChapterKey];
        const s = ch.scenarios[currentScenario];
        const choice = s.choices[choiceIndex];
        const result = calculateResult(choice.effect);
        decisions++;
        capital = Math.max(0, Math.round(capital + result.moneyChange));
        capitalHistory.push(capital); // Track capital after each decision

        // Disable all choice buttons during result display
        dom.gameContent.querySelectorAll('.choice-btn').forEach(btn => btn.disabled = true);

        showResult(choice, result);
        checkAchievements(result); // Check for unlocked achievements
      }

      // --------- ACHIEVEMENTS SYSTEM ---------
      const achievementDefinitions = {
        'first_profit': { icon: 'üí∞', name: 'Pierwszy Zysk', desc: 'Zarobi≈Ç pierwszego dolara' },
        'big_win': { icon: 'üéØ', name: 'Wielka Wygrana', desc: 'Zysk +$500 w jednej decyzji' },
        'survivor': { icon: 'üíé', name: 'Survival', desc: 'Uko≈Ñczy≈Ç epokƒô z kapita≈Çem powy≈ºej startu' },
        'millionaire': { icon: 'üëë', name: 'Milioner', desc: 'OsiƒÖgnƒÖ≈Ç $10,000+' },
        'perfect_timing': { icon: '‚è∞', name: 'Perfect Timing', desc: '3 zyski z rzƒôdu' },
        'risk_taker': { icon: 'üé≤', name: 'Ryzykant', desc: 'Straci≈Ç $500+ w jednej decyzji' },
        'comeback_king': { icon: 'üî•', name: 'Comeback King', desc: 'Odrobi≈Ç straty i wyszed≈Ç na plus' }
      };

      let profitStreak = 0;

      function checkAchievements(result){
        const unlocked = [];

        // First profit
        if(result.moneyChange > 0 && !achievements.includes('first_profit')){
          unlocked.push('first_profit');
          profitStreak++;
        } else if(result.moneyChange < 0){
          profitStreak = 0;
        } else if(result.moneyChange > 0){
          profitStreak++;
        }

        // Big win
        if(result.moneyChange >= 500 && !achievements.includes('big_win')){
          unlocked.push('big_win');
        }

        // Perfect timing (3 profits in a row)
        if(profitStreak >= 3 && !achievements.includes('perfect_timing')){
          unlocked.push('perfect_timing');
        }

        // Risk taker
        if(result.moneyChange <= -500 && !achievements.includes('risk_taker')){
          unlocked.push('risk_taker');
        }

        // Millionaire
        if(capital >= 10000 && !achievements.includes('millionaire')){
          unlocked.push('millionaire');
        }

        // Add to global achievements
        unlocked.forEach(id => {
          if(!achievements.includes(id)){
            achievements.push(id);
            showAchievementNotification(id);
          }
        });
      }

      function showAchievementNotification(achievementId){
        const ach = achievementDefinitions[achievementId];
        if(!ach) return;

        const notification = document.createElement('div');
        notification.className = 'achievement-notification';
        notification.innerHTML = `
          <div class="achievement-content">
            <span class="achievement-icon">${ach.icon}</span>
            <div>
              <div class="achievement-name">üéñÔ∏è ${ach.name}</div>
              <div class="achievement-desc">${ach.desc}</div>
            </div>
          </div>
        `;
        document.body.appendChild(notification);

        setTimeout(() => notification.classList.add('show'), 100);
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => notification.remove(), 500);
        }, 3000);
      }

      function showResult(choice, result){
        const panel = document.createElement('div');
        panel.className = 'result-panel';
        panel.style.cursor = 'pointer';
        panel.innerHTML = `
          <h3 class="panel-title">Wynik decyzji</h3>
          <p><strong>Wybra≈Çe≈õ:</strong> ${choice.text}</p>
          <p class="${result.type}"><strong>Rezultat:</strong> ${result.message}</p>
          <p class="${result.type}"><strong>Zmiana kapita≈Çu:</strong> ${result.moneyChange>0?'+':''}${result.moneyChange} $</p>
          <p style="margin-top:15px;color:var(--accent-2);font-size:0.95rem;">üëÜ Kliknij aby kontynuowaƒá</p>`;
        dom.gameContent.prepend(panel);
        dom.capital.textContent = `$${capital.toLocaleString()}`;

        // Click anywhere on panel to continue
        panel.addEventListener('click', () => {
          panel.remove();
          const ch = chapters[currentChapterKey];
          currentScenario++;
          if(currentScenario >= ch.scenarios.length) {
            endGame();
          } else {
            renderScenario();
          }
        });
      }

      // --------- CAPITAL CHART ---------
      function renderCapitalChart(){
        if(capitalHistory.length < 2) return '<p style="text-align:center;color:var(--muted);">Brak danych do wykresu</p>';

        const width = 600;
        const height = 180;
        const padding = 40;
        const max = Math.max(...capitalHistory);
        const min = Math.min(...capitalHistory);
        const range = max - min || 1;

        // Calculate points
        const points = capitalHistory.map((val, i) => {
          const x = padding + (i / (capitalHistory.length - 1)) * (width - 2 * padding);
          const y = height - padding - ((val - min) / range) * (height - 2 * padding);
          return `${x},${y}`;
        }).join(' ');

        // Area fill points (add bottom corners)
        const areaPoints = `${padding},${height - padding} ` + points + ` ${width - padding},${height - padding}`;

        const startCap = capitalHistory[0];
        const endCap = capitalHistory[capitalHistory.length - 1];
        const change = endCap - startCap;
        const changePercent = ((change / startCap) * 100).toFixed(1);
        const changeColor = change >= 0 ? 'var(--win)' : 'var(--loss)';

        return `
          <div class="capital-chart">
            <svg width="100%" height="${height}" viewBox="0 0 ${width} ${height}">
              <defs>
                <linearGradient id="chartGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                  <stop offset="0%" style="stop-color:var(--accent-2);stop-opacity:0.6" />
                  <stop offset="100%" style="stop-color:var(--accent-2);stop-opacity:0.1" />
                </linearGradient>
              </defs>

              <!-- Grid lines -->
              <line class="chart-grid" x1="${padding}" y1="${padding}" x2="${width - padding}" y2="${padding}" />
              <line class="chart-grid" x1="${padding}" y1="${height/2}" x2="${width - padding}" y2="${height/2}" />
              <line class="chart-grid" x1="${padding}" y1="${height - padding}" x2="${width - padding}" y2="${height - padding}" />

              <!-- Area -->
              <polygon class="chart-area" points="${areaPoints}" />

              <!-- Line -->
              <polyline class="chart-line" points="${points}" />

              <!-- Labels -->
              <text class="chart-label" x="${padding}" y="${height - 10}">Start: $${startCap.toLocaleString()}</text>
              <text class="chart-label" x="${width - padding - 100}" y="${height - 10}">Koniec: $${endCap.toLocaleString()}</text>
              <text class="chart-label" x="${width/2 - 50}" y="20" fill="${changeColor}" font-weight="bold">${change >= 0 ? '+' : ''}${changePercent}%</text>
            </svg>
          </div>
        `;
      }

      function endGame(){
        console.log('üèÅ Game ended!');
        updateProgress();

        // Check final achievement
        const startCap = capitalHistory[0];
        if(capital > startCap && !achievements.includes('survivor')){
          achievements.push('survivor');
        }

        // Save score to leaderboard (only for single epoch mode)
        if(!isCampaignMode){
          const playerName = prompt('üèÖ Zapisz sw√≥j wynik!\n\nPodaj sw√≥j nick (lub zostaw puste):', 'Gracz') || 'Gracz';
          const ch = chapters[currentChapterKey];
          saveScore('single', {
            name: playerName,
            epoch: ch ? ch.title : currentChapterKey,
            capital: capital,
            startCapital: startCap,
            date: Date.now()
          });
        }

        // Handle campaign mode completion
        if(isCampaignMode){
          onEpochComplete();
          return; // Don't show end screen, onEpochComplete handles transitions
        }

        // Generate achievements HTML
        const achievementsHTML = achievements.length > 0 ? `
          <div style="margin:20px 0;">
            <h3 class="panel-title">üéñÔ∏è OsiƒÖgniƒôcia (${achievements.length})</h3>
            <div class="achievements-grid">
              ${achievements.map(id => {
                const ach = achievementDefinitions[id];
                return ach ? `
                  <div class="achievement-badge">
                    <span class="achievement-badge-icon">${ach.icon}</span>
                    <div class="achievement-badge-name">${ach.name}</div>
                  </div>
                ` : '';
              }).join('')}
            </div>
          </div>
        ` : '';

        dom.gameContent.innerHTML = `
          <div class="result-panel">
            <h3 class="panel-title">üèÜ Koniec rozdzia≈Çu</h3>
            <p>≈ÅƒÖczna liczba decyzji: <strong>${decisions}</strong></p>
            <p>Ko≈Ñcowy kapita≈Ç: <strong class="${capital >= startCap ? 'profit' : 'loss'}">$${capital.toLocaleString()}</strong></p>

            <h4 style="margin-top:24px;color:var(--accent-2);">üìà Wykres Kapita≈Çu</h4>
            ${renderCapitalChart()}

            ${achievementsHTML}

            <div style="display:flex;gap:12px;margin-top:24px;justify-content:center;">
              <button class="restart" id="restartChapter">üîÑ Zagraj ponownie</button>
              <button class="restart" id="backToMenu">üè† Wr√≥ƒá do menu</button>
            </div>
          </div>`;

        // Add event listeners to buttons
        const restartBtn = document.getElementById('restartChapter');
        const menuBtn = document.getElementById('backToMenu');

        if (restartBtn) {
          restartBtn.addEventListener('click', () => {
            console.log('üîÑ Restarting chapter:', currentChapterKey);
            startChapter(currentChapterKey);
          });
        }

        if (menuBtn) {
          menuBtn.addEventListener('click', () => {
            console.log('üè† Going back to menu');
            showMainMenu();
          });
        }

        console.log('‚úÖ End game screen ready');
      }

      // INIT - Initialize everything after DOM loads
      document.addEventListener('DOMContentLoaded', () => {
        console.log('üìÑ DOM loaded, initializing game...');
        initMenuSystem();
        console.log('‚úÖ Game ready!');
      });

      // Also call immediately in case DOMContentLoaded already fired
      if (document.readyState === 'loading') {
        console.log('‚è≥ Waiting for DOM...');
      } else {
        console.log('üìÑ DOM already loaded, initializing now...');
        initMenuSystem();
      }

      // Functions are now used via event listeners, no need to export

    } catch (e) {
      showError(e.message || String(e));
      console.error(e);
    }
  })();
  </script>
</body>
</html>
